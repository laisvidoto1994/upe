bizagi.workportal=typeof bizagi.workportal!="undefined"?bizagi.workportal:{};bizagi.workportal.services=typeof bizagi.workportal.services!="undefined"?bizagi.workportal.services:{};bizagi.workportal.services.endPoints=[];bizagi.workportal.services.getEndPoints=function(n){return n.context=="workportal"?(bizagi=typeof bizagi!="undefined"?bizagi:{},bizagi.localization=typeof bizagi.localization!="undefined"?bizagi.localization:{},bizagi.localization.language=typeof bizagi.localization.language!="undefined"?bizagi.localization.language:bizagi.language,{"user-handler":n.proxyPrefix+"RestServices/UserHandler.ashx","process-handler":n.proxyPrefix+"RestServices/ProcessHandler.ashx","query-handler":n.proxyPrefix+"Rest/Handlers/Query","case-handler":n.proxyPrefix+"RestServices/CaseHandler.ashx","query-form":n.proxyPrefix+"App/ListaDetalle/QueryForm.aspx","query-form-edit":n.proxyPrefix+"App/ListaDetalle/SaveQuery.aspx","query-form-delete":n.proxyPrefix+"App/ListaDetalle/QueryForm.aspx","query-form-delete-cube":n.proxyPrefix+"Rest/Queries/Cubes/{idCube}","favorites-handler":n.proxyPrefix+"RestServices/FavoritesHandler.ashx","file-handler":n.proxyPrefix+"RestServices/EntityHandler.ashx","login-handler":n.proxyPrefix+"Rest/Users/UserAuthentication","login-handlerv10":n.proxyPrefix+"RestServices/UserHandler.ashx?action=authenticateUser&userName={0}&password={1}&domain={2}","logoff-handler":n.proxyPrefix+"RestServices/UserHandler.ashx?action=logOff","logoff-handlerv1":n.proxyPrefix+"Rest/Users/LogOff",overrides:n.proxyPrefix+"Rest/Util/Overrides","authorization-handler-getMenuAuthorization":n.proxyPrefix+"Rest/Authorization/MenuAuthorization","authorization-handler-isCaseCreationAuthorized":n.proxyPrefix+"Rest/Authorization/Processes/{0}/IsCaseCreationAuthorized","case-handler-getCaseSummary":n.proxyPrefix+"Rest/Cases/{idCase}/Summary","case-handler-getCaseSummaryByGuid":n.proxyPrefix+"Rest/Cases/{guid}/SummaryByGuid","case-handler-releaseActivity":n.proxyPrefix+"Rest/Cases/{idCase}/ReleaseActivity","case-handler-getCasesList":n.proxyPrefix+"Rest/Processes/GetCases","offline-getProcessTree":n.proxyPrefix+"Rest/Processes/OfflineProcessTree","offline-getForms":n.proxyPrefix+"Rest/RenderForm/offlineForms","offline-sendForm":n.proxyPrefix+"Rest/Cases/SaveAsynchWorkItemOffLine","case-handler-getCaseTasks":n.proxyPrefix+"Rest/Cases/{idCase}/Tasks","case-handler-getCaseEvents":n.proxyPrefix+"Rest/Cases/{idCase}/Events","case-handler-getCaseSubprocesses":n.proxyPrefix+"Rest/Cases/{idCase}/Subprocesses","case-handler-getTaskAssignees":n.proxyPrefix+"Rest/Cases/{idCase}/Tasks/{idTask}/Assignees","case-handler-getCaseAssignees":n.proxyPrefix+"Rest/Cases/{idCase}/Assignees","case-handler-getWorkItems":n.proxyPrefix+"Rest/Cases/{idCase}/WorkItems","case-handler-getWorkItemsByGuid":n.proxyPrefix+"Rest/Cases/{guid}/WorkItemsByGuid","case-handler-getAsynchExecutionState":n.proxyPrefix+"Rest/Cases/{idCase}/AsynchExecutionState","case-handler-addNewCase":n.proxyPrefix+"Rest/Cases","case-handler-startProcess":n.proxyPrefix+"Rest/Processes/StartProcess/{idProcess}","case-handler-supportedLogTypes":n.proxyPrefix+"Rest/Cases/SupportedLogsTypes","case-handler-getActivityLog":n.proxyPrefix+"Rest/Cases/{idCase}/ActivityLog","case-handler-getActivityDetailLog":n.proxyPrefix+"Rest/Cases/{idCase}/Workitem/{idWorkItemFrom}/ActivityDetailLog","case-handler-getEntityLog":n.proxyPrefix+"Rest/Cases/{idCase}/EntityLog","case-handler-getEntityDetailLog":n.proxyPrefix+"Rest/Cases/{idCase}/EntityDetailLog","case-handler-getUserLog":n.proxyPrefix+"Rest/Cases/{idCase}/UserLog","case-handler-getUserDetailLog":n.proxyPrefix+"Rest/Cases/{idCase}/{idUser}/UserDetailLog","case-handler-getAdminLog":n.proxyPrefix+"Rest/Cases/{idCase}/AdminLog","case-handler-getCaseFormsRenderVersion":n.proxyPrefix+"Rest/Cases/{idCase}/FormsRenderVersion","case-handler-getCaseFormsRenderVersionByGuid":n.proxyPrefix+"Rest/Cases/{guid}/FormsRenderVersionByGuid","favorites-handler-saveFavorite":n.proxyPrefix+"Rest/Favorites","favorites-handler-deleteFavorite":n.proxyPrefix+"Rest/Favorites/{guidFavorite}","bamAnalytics-handler-getAnalisysQueries":n.proxyPrefix+"Rest/BAMAnalytics/AnalisysQueries","bamAnalytics-handler-updateQuery":n.proxyPrefix+"Rest/BAMAnalytics/Reports/Ids/{idQuery}","inbox-handler-getInboxSummary":n.proxyPrefix+"Rest/Inbox/Summary","MessageHandler-NewComment":n.proxyPrefix+"Rest/Cases/Comments","MessageHandler-GetComments":n.proxyPrefix+"Rest/Cases/Comments","MessageHandler-SetCategoryToComment":n.proxyPrefix+"Rest/Cases/Comments/{idComment}","MessageHandler-RemoveComment":n.proxyPrefix+"Rest/Cases/Comments/{idComment}","MessageHandler-ReplyComment":n.proxyPrefix+"Rest/Cases/Comments/{idComment}/Replies","MessageHandler-RemoveReply":n.proxyPrefix+"Rest/Cases/Comments/{idComment}/Replies/{idReply}","MessageHandler-GetCategoryColors":n.proxyPrefix+"Rest/Cases/Comments/CategoryColors","MessageHandler-RenameCategoryColor":n.proxyPrefix+"Rest/Cases/Comments/CategoryColors/{idColorCategory}","MessageHandler-CountNewComments":n.proxyPrefix+"Rest/Cases/Comments/{idComment}/NewComments/Count","process-handler-getAllProcesses":n.proxyPrefix+"Rest/Processes","process-handler-getFavourites":n.proxyPrefix+"Rest/Home/MyFavorites/Count","process-handler-getMyStuff":n.proxyPrefix+"Rest/Home/MyStuff","process-handler-getFavouriteCases":n.proxyPrefix+"Rest/Home/MyFavorites","process-handler-getActions":n.proxyPrefix+"Rest/Home/Actions","process-handler-getCustomizedColumnsData":n.proxyPrefix+"Rest/Processes/CustomizedColumnsData","process-handler-getCategory":n.proxyPrefix+"Rest/Processes/Categories","process-handler-getRecentProcesses":n.proxyPrefix+"Rest/Processes/RecentProcesses","process-handler-getCustomizedColumnsDataInfo":n.proxyPrefix+"Rest/Processes/CustomizedColumnsDataInfo","process-handler-getOrganizations":n.proxyPrefix+"Rest/Profile/Organizations","process-handler-getActivitiesData":n.proxyPrefix+"Api/Processes/CasesData/MyActivities","process-handler-getPendingsData":n.proxyPrefix+"Api/Processes/CasesData/MyPendings","process-handler-getUsersCases":n.proxyPrefix+"Api/Cases/{caseId}/Users","process-handler-getActionsEvents":n.proxyPrefix+"Api/Cases/{caseId}/CurrentEvents","query-handler-getqueries":n.proxyPrefix+"Rest/Queries","query-handler-getqueries-definitions":n.proxyPrefix+"Rest/Queries/Definitions","query-handler-getQueryFormResponse":n.proxyPrefix+"Rest/Queries/Search","query-handler-getQueryFormExportExcel":n.proxyPrefix+"Rest/Queries/ExportToExcel","query-handler-getQueryForm":n.proxyPrefix+"Rest/Handlers/Render","query-handler-storedQueryForm":n.proxyPrefix+"Rest/StoredQueryForms","query-handler-storedQueryForm-id":n.proxyPrefix+"Rest/StoredQueryForms/{idStoredQueryForm}","preferences-handler-getPreferencesForm":n.proxyPrefix+"Rest/Handlers/Render","user-handler-getCurrentUser":n.proxyPrefix+"Rest/Users/CurrentUser","old-render":n.proxyPrefix+"App/ListaDetalle/Detalle.aspx",Reports:n.proxyPrefix+"RestServices/BAMAnalyticsHandler.ashx","reports-handler-deleteQueries":n.proxyPrefix+"Rest/BAMAnalytics/Reports/{QueryId}","folders-handler-getUserQueries":n.proxyPrefix+"Rest/SmartFolders","folders-associate-deleteSmartFolder":n.proxyPrefix+"Rest/SmartFolders/{idSmartFolder}","folders-handler":n.proxyPrefix+"RestServices/SmartFoldersHandler.ashx","folders-associate":n.proxyPrefix+"App/Ajax/AJAXGateway.aspx","smartfolders-integration":n.proxyPrefix+"App/WorkPortal/ConfigureFilteredFolder.aspx",AlarmAdmin:n.proxyPrefix+"App/Admin/AlarmsAdmin.aspx",AnalyticsProcess:n.proxyPrefix+"App/Cockpit/AnalyticsProcess.aspx",AnalyticsSensor:n.proxyPrefix+"App/Cockpit/AnalyticsSensor.aspx",AnalyticsTask:n.proxyPrefix+"App/Cockpit/AnalyticsTask.aspx",AsynchronousWorkitemRetries:n.proxyPrefix+"App/Admin/AsynchDisabledWorkitems.aspx",AuthenticationLogQuery:n.proxyPrefix+"App/Admin/AuthLogQuery.aspx",BAMProcess:n.proxyPrefix+"App/Cockpit/BAMProcess.aspx",BAMTask:n.proxyPrefix+"App/Cockpit/BAMTask.aspx",BusinessPolicies:n.proxyPrefix+"App/Admin/BusinessPolicies/BusinessPoliciesSelector.aspx",CaseAdmin:n.proxyPrefix+"App/Admin/CaseSearch.aspx",adminReassignCases:"CaseAdmin",asyncECMUpload:"asyncECMUpload",CasesMonitor:n.proxyPrefix+"App/Admin/CasesMonitor.aspx",Closed:n.proxyPrefix+"App/ListaDetalle/listaitems.aspx?h_Location=Cerrados&I_ProcessState=Completed",CurrentUser:n.proxyPrefix+"App/Admin/CurrentUser.aspx",EncryptionAdmin:n.proxyPrefix+"App/Admin/Encrypt.aspx",MobileUpdatesAdmin:n.proxyPrefix+"App/MobileUpdates/default.aspx",EntityAdmin:n.proxyPrefix+"App/Admin/Entity.aspx",LocationResources:n.proxyPrefix+"App/Admin/AdminLocResources.aspx",NewCase:n.proxyPrefix+"App/Radicar/application.aspx",Pending:n.proxyPrefix+"App/ListaDetalle/listaitems.aspx?h_Location=Pendientes&I_processState=Running",Profiles:n.proxyPrefix+"App/Admin/ProfilesAdminSearch.aspx",Search:n.proxyPrefix+"App/ListaDetalle/Search.aspx",UserAdmin:n.proxyPrefix+"App/Admin/ListUsers.aspx",UserDefaultAssignation:n.proxyPrefix+"App/Admin/DefaultAssignationUser.aspx?h_AdminDefaultAssign=1",UserPendingRequests:n.proxyPrefix+"App/Admin/UserPendingRequests.aspx",ListPreferences:bizagi.UserPreferencesUrl!=""?n.proxyPrefix+bizagi.UserPreferencesUrl:n.proxyPrefix+"App/Admin/CurrentUser.aspx",GRDimensionAdmin:n.proxyPrefix+"App/Cockpit/DimensionEdit.aspx",Licenses:n.proxyPrefix+"App/Admin/Licenses.aspx",AnalysisQueries:n.proxyPrefix+"App/Inicio/WPAnalysisQuery.aspx",DocumentTemplates:n.proxyPrefix+"App/Admin/AdminDocumentTemplates.aspx",ProcessAdmin:n.proxyPrefix+"App/Admin/AdminProcess.aspx",ResourceBAM:n.proxyPrefix+"App/Cockpit/BAMResourceMonitor.aspx",WorkPortalVersion:n.proxyPrefix+"Rest/Util/Version",PreferenceFormOld:n.proxyPrefix+"App/Admin/CurrentUserByForm.aspx","entities-administration":"RestServices/EntityHandler.ashx",logout:n.proxyPrefix+"Rest/Authentication/logout",logoutDotNet:n.proxyPrefix+"App/Inicio/LogOff.aspx",authenticationConfig:n.proxyPrefix+"Api/Authentication/BizagiConfig","logout-oauth2":n.proxyPrefix+"Api/Authentication/OAuth2/IdentityProvider/Server/Logout",oauth2AuthenticationConfig:n.proxyPrefix+"Api/Authentication/OAuth2/OAuth2AuthenticationConfig","massive-activity-assignments-getOrganizationInfo":n.proxyPrefix+"Rest/Users/OrganizationInfo","massive-activity-assignments-getCasesByOrganization":n.proxyPrefix+"Rest/Queries/GetCasesByOrganization","massive-activity-assignments-reassignCases":n.proxyPrefix+"Rest/Cases/ReassignCases","massive-activity-assignments-searchUsers":n.proxyPrefix+"Rest/Users","massive-activity-assignments-searchUsersById":n.proxyPrefix+"Rest/Users/ByIds","async-ecm-upload-baseService":n.proxyPrefix+"Rest/Handlers/Metadata",domains:n.proxyPrefix+"Rest/Authentication/Domains",ThemeBuilder:n.proxyPrefix+"ThemeBuilder/index.html?language="+bizagi.localization.language,getCurrentTheme:n.proxyPrefix+"Api/Theme/Current","admin-getAuthenticationLog":n.proxyPrefix+"Rest/Users/AuthLog","admin-getAuthenticationDomains":n.proxyPrefix+"Rest/Users/Domains","admin-getAuthenticationEventsTypes":n.proxyPrefix+"Rest/Users/EventTypes","admin-getAuthenticationEventSubTypes":n.proxyPrefix+"Rest/Users/EventSubTypes","admin-EncryptString":n.proxyPrefix+"Rest/Util/EncryptString","admin-UserPendingRequests":n.proxyPrefix+"Rest/Users/UserPendingRequests","admin-UserAuthenticationInfo":n.proxyPrefix+"Rest/Users/UserAuthenticationInfo","admin-updateUserAuthenticationInfo":n.proxyPrefix+"Rest/Users/UpdateUserAuthenticationInfo","admin-generateRandomPassword":n.proxyPrefix+"Rest/Util/GenerateRandomPassword","admin-GenerateDataToSendByEmail":n.proxyPrefix+"Rest/Users/GenerateDataToSendByEmail","admin-sendEmail":n.proxyPrefix+"Rest/Util/SendEmail/","admin-sendUserEmail":n.proxyPrefix+"Rest/Users/SendUserEmail","admin-getApplicationList":n.proxyPrefix+"Rest/Application","admin-getApplicationProcesses":n.proxyPrefix+"Rest/Application/{idApp}/Process","admin-getProcessVersion":n.proxyPrefix+"Rest/Processes/Version","admin-getProcessTasks":n.proxyPrefix+"Rest/Processes/Version/{version}/Tasks","admin-userGetPositions":n.proxyPrefix+"Rest/Users/GetPositions","admin-usersform":n.proxyPrefix+"Rest/Handlers/Render","admin-getTaskAlarms":n.proxyPrefix+"Rest/Alarm/TaskAlarms","admin-getLapseMode":n.proxyPrefix+"Rest/Alarm/LapseMode","admin-getRecurrMode":n.proxyPrefix+"Rest/Alarm/RecurrMode","admin-getScheduleType":n.proxyPrefix+"Rest/Alarm/ScheduleType","admin-getBossList":n.proxyPrefix+"Rest/Alarm/Boss","admin-addAlarm":n.proxyPrefix+"Rest/Alarm","admin-editAlarm":n.proxyPrefix+"Rest/Alarm/{idAlarm}","admin-deleteAlarm":n.proxyPrefix+"Rest/Alarm","admin-alarmRecipients":n.proxyPrefix+"Rest/Alarm/{idAlarm}/Recipient","admin-deleteAlarmRecipients":n.proxyPrefix+"Rest/Alarm/Recipient","admin-recipientToAlarm":n.proxyPrefix+"Rest/Alarm/{idAlarm}/Recipient/{idRecipient}","admin-enableAlarm":n.proxyPrefix+"Rest/Alarm/Task/{idTask}/ToggleAlarm","admin-getUsersForAssignation":n.proxyPrefix+"Rest/Users/UsersForAssignation","admin-getUsersList":n.proxyPrefix+"Rest/Users/SearchUsers","admin-getCategoriesList":n.proxyPrefix+"Rest/Application/Category","admin-getCasesList":n.proxyPrefix+"Rest/Queries/SearchCases","admin-abortItems":n.proxyPrefix+"Rest/Cases/Abort","admin-reassignItems":n.proxyPrefix+"Rest/Cases/Reassign","admin-getDefaultAssignationUserToAllProcess":n.proxyPrefix+"Rest/Users/{serviceAction}/","admin-getDefaultAssignationUserToProcess":n.proxyPrefix+"Rest/Users/Process/{process}/AssignationUser","admin-setDefaultAssignationUserToProcess":n.proxyPrefix+"Rest/Users/Process/{process}/AssignationUser","admin-getProfilesTypes":n.proxyPrefix+"Rest/Profile/Types","admin-searchProfiles":n.proxyPrefix+"Rest/Profile","admin-getUsersByProfile":n.proxyPrefix+"Rest/Users/Profile/{type}/{id}","admin-removeUserFromProfile":n.proxyPrefix+"Rest/Profile/{type}/{id}/User/{idUser}/","admin-addUserToProfile":n.proxyPrefix+"Rest/Profile/{type}/{id}/User/{idUser}/","admin-async-activities-get-activities":n.proxyPrefix+"Rest/Cases/Asynchronous/Activities","admin-async-activities-get-retry-now":n.proxyPrefix+"Rest/Cases/{idCase}/Workitem/{idworkItem}/{idAsynchWorkitem}/RetryNow","admin-async-activities-get-activities-by-task":n.proxyPrefix+"Rest/Cases/Asynchronous/Activities/Task","admin-async-activities-enable-execution":n.proxyPrefix+"Rest/Cases/Asynchronous/Enable","admin-async-activities-enable-multiple":n.proxyPrefix+"Rest/Cases/Asynchronous/EnableMultiple","admin-async-activities-async-execution":n.proxyPrefix+"Rest/Cases/{idCase}/Workitem/{idWorkitem}/AsynchExecution","admin-async-activities-async-execution-log":n.proxyPrefix+"Rest/Cases/{idCase}/Workitem/{idworkItem}/{idAsynchWorkitem}/AsynchExecutionLog","admin-Licenses":n.proxyPrefix+"Rest/Licenses","admin-audit-license":n.proxyPrefix+"Rest/Licenses/auditLicense","admin-GetDimensions":n.proxyPrefix+"Rest/Dimensions","admin-EditDimension":n.proxyPrefix+"Rest/Dimensions/{id}","admin-CreateAdministrableDimension":n.proxyPrefix+"Rest/Dimensions/Administrable","admin-DeleteDimension":n.proxyPrefix+"Rest/Dimensions/{id}?isAdministrable={administrable}","admin-EntityPathChildNodesAction":n.proxyPrefix+"Rest/Dimensions/EntityChildNodes","admin-GetActiveWFClasses":n.proxyPrefix+"Rest/Dimensions/ActiveProcess","admin-document-templates-storeDocumentTemplates":n.proxyPrefix+"Rest/DocumentTemplates/StoreDocumentTemplates","admin-document-templates-restoreDocumentTemplates":n.proxyPrefix+"Rest/DocumentTemplates/RestoreDocumentTemplate","admin-document-templates-uploadDocumentTemplate":n.proxyPrefix+"Rest/DocumentTemplates/UploadDocumentTemplate","admin-processes-workflowClasses":n.proxyPrefix+"Rest/Processes/WorkflowClasses","admin-processes-tasksByWorkflow":n.proxyPrefix+"Rest/Processes/TasksByWorkflow","admin-processes-modifyProcessDuration":n.proxyPrefix+"Rest/Processes/{idWorkflow}/Duration/","admin-processes-modifyTaskDuration":n.proxyPrefix+"Rest/Processes/Task/{idTask}/Duration/","admin-entities-list":n.proxyPrefix+"Api/Entities/Parametrics","admin-stakeholders-list":n.proxyPrefix+"Api/Entities/Stakeholders","admin-entities-row-data":n.proxyPrefix+"Api/Entities/{guidEntity}/Data","admin-user-stakeholders":n.proxyPrefix+"Api/Users/{idUser}/Stakeholders","admin-entities-migrated-entity":n.proxyPrefix+"Rest/Entities/migratedEntity","admin-entities-get-form":n.proxyPrefix+"Rest/Handlers/Render","admin-entity-simpleData":n.proxyPrefix+"Rest/Entities/{idEntity}/Instances/Brief","admin-language-bizagi-objects":n.proxyPrefix+"Rest/Multilanguage/BizagiObjects","admin-language-entities":n.proxyPrefix+"Rest/Multilanguage/Entities","admin-language-resource":n.proxyPrefix+"Rest/Multilanguage/Resource","admin-language-resource-download":n.proxyPrefix+"Rest/Multilanguage/LanguageExcel","admin-language-entities-download":n.proxyPrefix+"Rest/Multilanguage/EntitiesExcel","admin-language-languages":n.proxyPrefix+"Rest/Multilanguage/Languages","admin-language-reset":n.proxyPrefix+"Rest/Multilanguage/ResetPersonalization","admin-holidays-schemas":n.proxyPrefix+"Api/WorkingTimeSchema/Holidays","admin-holidays-schema":n.proxyPrefix+"Api/WorkingTimeSchema/Holidays/{schema}","admin-projectname":n.proxyPrefix+"Api/Project/Name","bam-resourcemonitor-myteam":n.proxyPrefix+"Rest/Reports/BAM/Resources/MyTeam","reports-analysisquery":n.proxyPrefix+"Rest/Reports/AnalysisQueries","reports-analysisquery-update":n.proxyPrefix+"Rest/Reports/AnalysisQueries","reports-analysisquery-delete":n.proxyPrefix+"Rest/Reports/AnalysisQueries","processviewer-processdefinition":n.proxyPrefix+"Rest/Reports/Components/ProcessDefinition","processviewer-processgraphicinfo":n.proxyPrefix+"Rest/Reports/Components/ProcessGraphicInfo","processviewer-paths":n.proxyPrefix+"Rest/Reports/Analytics/Process/FrequentPaths","mobile-getLastUpdate":n.proxyPrefix+"Rest/Util/mobileUpdates","admin-userslog":n.proxyPrefix+"Rest/Users/UserAdminLog","admin-userslicenses":n.proxyPrefix+"Rest/Licenses/CanAddNewUser","admin-createuserform":n.proxyPrefix+"Rest/Users/CreateUserAdminForm","graphicquery-trailusers":n.proxyPrefix+"Rest/Cases/TrailUsers","admin-userpreferenceform-isnew":n.proxyPrefix+"Rest/Authorization/UserPreferenceForm","time-schemas-effectiveduration":n.proxyPrefix+"Api/WorkingTimeSchema/EffectiveDuration?idUser={idUser}&fromDate={fromDate}&toDate={toDate}","time-schemas-end-hour-working-by-date":n.proxyPrefix+"Api/WorkingTimeSchema/EndHourWorkingByDate?idUser={idUser}&date={date}","project-resource-action":n.proxyPrefix+"Api/CaseResource/{typeResource}","project-resource-get":n.proxyPrefix+"Api/CaseResource/{typeResource}?globalParent={globalParent}","project-resource-delete":n.proxyPrefix+"Api/CaseResource/{typeResource}/{idResource}","project-users-get":n.proxyPrefix+"Rest/Users/UserPictures","project-comments-get":n.proxyPrefix+"Api/CaseResource/{idParent}/Comment?dateTime={dateTime}&count={count}","project-comments-count-by-parent":n.proxyPrefix+"Api/CaseResource/{idParent}/Comment/Count","project-util-current-time":n.proxyPrefix+"Api/CaseResource/Util/CurrentTime","project-comments-uploadfiles":n.proxyPrefix+"Api/CaseResource/Attachment","project-attachment-download":n.proxyPrefix+"Api/CaseResource/Attachment/{Attachment}","project-files-upload":n.proxyPrefix+"Api/CaseResource/File","project-files-list":n.proxyPrefix+"Api/CaseResource/File?globalParent={globalParent}","project-files-thumbnails":n.proxyPrefix+"Api/CaseResource/File/Thumbnails","project-plan-createactivity":n.proxyPrefix+"Api/Plans/{idPlan}/Activities","project-plan-get":n.proxyPrefix+"Api/Plans/{idPlan}","project-plan-get-case":n.proxyPrefix+"Api/Plans/{idPlan}/IdCase","project-plan-get-by-parent":n.proxyPrefix+"Api/Plans?parentWorkItem={parentWorkItem}","project-plan-execute":n.proxyPrefix+"Api/Plans/Execute","project-plan-close":n.proxyPrefix+"Api/Plans/Close","project-plan-delete":n.proxyPrefix+"Api/Plans/{idPlan}","project-plan-activities":n.proxyPrefix+"Api/Plans/{idPlan}/Activities","project-plan-workitems":n.proxyPrefix+"Api/Plans/{idPlan}/WorkItems","project-plan-parent":n.proxyPrefix+"Api/Plans/{idPlan}/ParentCase","project-plan-first-parent-plan":n.proxyPrefix+"Api/Plans/{idPlan}/FirstParentPlan","project-plan-first-parent":n.proxyPrefix+"Api/Plans/{idPlan}/FirstParentCase","project-activity-update-progress":n.proxyPrefix+"Api/Plans/Activity/{idActivity}/Progress","project-plan-update":n.proxyPrefix+"Api/Plans/{idPlan}","project-plan-activity-tasks-get":n.proxyPrefix+"Api/Plans/{idPlan}/Activities/{idActivity}/Items","project-plan-activity-get":n.proxyPrefix+"Api/Plans/{idPlan}/Activities/{idActivity}","project-plan-activity-delete":n.proxyPrefix+"Api/Plans/{idPlan}/Activities/{id}","project-plan-activity-edit":n.proxyPrefix+"Api/Plans/{idPlan}/Activities/{id}","project-plan-transitions-get":n.proxyPrefix+"Api/Plans/{idPlan}/Activities/Transitions","project-plan-transitions-put":n.proxyPrefix+"Api/Plans/{idPlan}/Activities/Transitions","project-plan-template-create-by-plan":n.proxyPrefix+"Api/Plans/Templates","project-plan-template-get":n.proxyPrefix+"Api/Templates","project-timeline-events-get":n.proxyPrefix+"Api/CaseResource/TimeLine?globalParent={idCase}","project-workitem-assignees":n.proxyPrefix+"Api/CaseResource/{idWorkitem}/Assignees","project-plan-create":n.proxyPrefix+"Api/Plans","project-plan-create-by-template":n.proxyPrefix+"Api/Templates/{idTemplate}/Plans","project-plan-get-all":n.proxyPrefix+"Api/Plans/Templates/get",plans:n.proxyPrefix+"Api/Plans","stuff-handler-getUserStuff":n.proxyPrefix+"Api/CurrentUser/Collections","get-current-theme":n.proxyPrefix+"Api/CurrentUser/GetCurrentTheme","process-handler-getIdCasesOfProcessEntities":n.proxyPrefix+"Api/Entities/Cases","handler-get-myShortcuts":n.proxyPrefix+"Api/CurrentUser/Shortcuts","handler-execute-action-start":n.proxyPrefix+"Api/Cases/{processId}/Start","handler-validate-action-has-start-form":n.proxyPrefix+"Api/Processes/{processId}/StartContext","process-getIcon":n.proxyPrefix+"Api/Processes/{processId}/Icon","collections-getIcon":n.proxyPrefix+"Api/CurrentUser/Collections/{collectionId}/Icon","data-navigation-handler-collection":n.proxyPrefix+"Api/CurrentUser/Collections/{reference}/Data/{surrogateKey}","data-navigation-handler-entity":n.proxyPrefix+"Api/CurrentUser/Entities/{reference}/Data/{surrogateKey}/{xpath}","data-navigation-handler-entity-filters":n.proxyPrefix+"Api/CurrentUser/Entities/{reference}/Filters/{surrogateKey}/{xpath}","action-handler-getProcessAddAction":n.proxyPrefix+"Api/CurrentUser/Collections/{reference}/{surrogateKey}/Actions","entities-handler-getMapping":n.proxyPrefix+"Rest/Entities/Mapping","entities-handler-getActions":n.proxyPrefix+"Api/Entities/{guidEntity}/{surrogateKey}/actions","actions-handler-getDataForm":n.proxyPrefix+"Rest/Handlers/Render","actions-handler-hasStartForm":n.proxyPrefix+"Rest/Processes/HasStartForm","actions-handler-executeRule-simple":n.proxyPrefix+"Api/Rules/{ruleId}/Execute","actions-handler-executeRule-multiple":n.proxyPrefix+"Api/Rules/{ruleId}/ExecuteMultiple","sort-bar-getMultipleInstancesActions":n.proxyPrefix+"Rest/Entities/multipleInstancesActions","sort-bar-getMapping":n.proxyPrefix+"Rest/Entities/Mapping","sort-bar-execute":n.proxyPrefix+"Api/Action/Execute","activity-map":n.proxyPrefix+"Rest/Processes/ActivityMap/","activity-map-getActivitySummary":n.proxyPrefix+"Rest/Processes/ActivitySummary","subprocess-map":n.proxyPrefix+"Rest/Processes/SubProcessMap","shorcuts-getStakeHolderShorcuts":n.proxyPrefix+"/Api/Stakeholder/Shortcuts","my-search-getSearchLists":n.proxyPrefix+"Api/CurrentUser/Searches","my-search-getFilters":n.proxyPrefix+"Api/CurrentUser/Searches/{guidSearch}/Filters","my-search-getFiltersData":n.proxyPrefix+"Api/CurrentUser/Searches/{guidSearch}/FilterData","my-search-getData":n.proxyPrefix+"Api/CurrentUser/Searches/{guidSearch}/Data","admin-createNewAdhocProcess":n.proxyPrefix+"Api/AdhocProcessesTemp","adhoc-process-start":n.proxyPrefix+"Api/AdhocProcesses/{processId}/Start","admin-getAdhocProcessesList":n.proxyPrefix+"Api/AdhocProcesses/Search","admin-createAdhocProcess":n.proxyPrefix+"Api/AdhocProcesses/Create","admin-updateAdhocProcess":n.proxyPrefix+"Api/AdhocProcesses/Update","admin-updateAdhocTask":n.proxyPrefix+"Api/AdhocProcesses/{processId}/Activity","admin-deleteAdhocTask":n.proxyPrefix+"Api/AdhocProcesses/{processId}/Activity/{taskId}","admin-deleteAdhocProcess":n.proxyPrefix+"Api/AdhocProcesses/{processId}","admin-publishAdhocProcess":n.proxyPrefix+"Api/AdhocProcesses/Publish","admin-cloneAdhocProcess":n.proxyPrefix+"Api/AdhocProcesses/Clone","admin-getAdhocDataSchema":n.proxyPrefix+"Api/AdhocProcesses/DataSchema/{processId}","admin-getAdhocProcessDiagram":n.proxyPrefix+"Api/AdhocProcessesTemp/{processId}/Diagram/{diagramId}","admin-getAdhocTask":n.proxyPrefix+"Api/AdhocProcesses/{processId}/Task/{taskId}","admin-getAllEntities":n.proxyPrefix+"Api/AdhocProcesses/Entities","admin-getAllCategories":n.proxyPrefix+"Api/AdhocProcesses/Categories","admin-saveAdhocProcessDiagram":n.proxyPrefix+"Api/AdhocProcessesTemp/{processId}/Diagram","admin-adhoc-entities-list":n.proxyPrefix+"Api/AdhocProcesses/AdhocEntity/All","admin-saveAdhocEntity":n.proxyPrefix+"Api/AdhocProcesses/AdhocEntity/Save","admin-saveAdhocEntityInstance":n.proxyPrefix+"Api/AdhocProcesses/AdhocEntity/{entityId}/Instance/{isNew}","admin-adhoc-entity-instances":n.proxyPrefix+"Api/AdhocProcesses/AdhocEntity/{entityId}/Instances","admin-entity-values":n.proxyPrefix+"Api/AdhocProcesses/{context}/{entityId}/Values","admin-adhoc-user-group-list":n.proxyPrefix+"Api/AdhocProcesses/AdhocGroup/All","admin-adhoc-user-group-save":n.proxyPrefix+"Api/AdhocProcesses/AdhocGroup/Save","admin-adhoc-user-group-delete":n.proxyPrefix+"Api/AdhocProcesses/AdhocGroup/{groupId}","admin-adhoc-user-group-data-get":n.proxyPrefix+"Api/AdhocProcesses/AdhocGroup/{groupId}/Users","admin-adhoc-user-group-data-add":n.proxyPrefix+"Api/AdhocProcesses/AdhocGroup/{groupId}/Users/{userId}/Add","admin-adhoc-user-group-data-remove":n.proxyPrefix+"Api/AdhocProcesses/AdhocGroup/{groupId}/Users/{userId}","admin-adhoc-authorization-data-get":n.proxyPrefix+"Api/AdhocProcesses/Authorization","admin-adhoc-authorization-data-save":n.proxyPrefix+"Api/AdhocProcesses/{processId}/{isAdhocTask}/Authorization/Save","oauth2-getApplications":n.proxyPrefix+"oauth2/server/application","oauth2-getApplication":n.proxyPrefix+"oauth2/server/application/id/{applicationId}","oauth2-createApplication":n.proxyPrefix+"oauth2/server/application","oauth2-deleteApplication":n.proxyPrefix+"oauth2/server/application/{applicationId}","oauth2-updateApplication":n.proxyPrefix+"oauth2/server/application/{applicationId}","oauth2-updateClientSecretKeysApplication":n.proxyPrefix+"oauth2/server/application/{applicationId}/updateClientSecretKeys"}):n.context=="sharepoint"||n.context=="portal"?(typeof n.sharepointProxyPrefix=="undefined"&&alert("sharepointProxyPrefix param is requiered to build endpoints when context is 'sharepoint'"),{"user-handler":n.sharepointProxyPrefix+"RestServices/UserHandler.ashx","process-handler":n.sharepointProxyPrefix+"RestServices/ProcessHandler.ashx","query-handler":n.sharepointProxyPrefix+"Rest/Handlers/Query","case-handler":n.sharepointProxyPrefix+"RestServices/CaseHandler.ashx","query-form":n.sharepointProxyPrefix+"App/ListaDetalle/QueryForm.aspx","query-form-edit":n.sharepointProxyPrefix+"App/ListaDetalle/SaveQuery.aspx","query-form-delete":n.sharepointProxyPrefix+"App/ListaDetalle/QueryForm.aspx","query-form-delete-cube":n.sharepointProxyPrefix+"Rest/Queries/Cubes/{idCube}","favorites-handler":n.sharepointProxyPrefix+"RestServices/FavoritesHandler.ashx","file-handler":n.sharepointProxyPrefix+"RestServices/EntityHandler.ashx","login-handler":n.sharepointProxyPrefix+"RestServices/UserHandler.ashx?action=authenticateUser&userName={0}&password={1}&domain={2}","logoff-handler":n.sharepointProxyPrefix+"RestServices/UserHandler.ashx?action=logOff",overrides:n.sharepointProxyPrefix+"Rest/Util/Overrides","authorization-handler-getMenuAuthorization":n.sharepointProxyPrefix+"Rest/Authorization/MenuAuthorization","authorization-handler-isCaseCreationAuthorized":n.sharepointProxyPrefix+"Rest/Authorization/Processes/{0}/IsCaseCreationAuthorized","case-handler-getCaseSummary":n.sharepointProxyPrefix+"Rest/Cases/{idCase}/Summary","case-handler-getCaseSummaryByGuid":n.sharepointProxyPrefix+"Rest/Cases/{guid}/SummaryByGuid","case-handler-releaseActivity":n.proxyPrefix+"Rest/Cases/{idCase}/ReleaseActivity","case-handler-getCaseTasks":n.sharepointProxyPrefix+"Rest/Cases/{idCase}/Tasks","case-handler-getCaseEvents":n.sharepointProxyPrefix+"Rest/Cases/{idCase}/Events","case-handler-getCaseSubprocesses":n.sharepointProxyPrefix+"Rest/Cases/{idCase}/Subprocesses","case-handler-getTaskAssignees":n.sharepointProxyPrefix+"Rest/Cases/{idCase}/Tasks/{idTask}/Assignees","case-handler-getCaseAssignees":n.sharepointProxyPrefix+"Rest/Cases/{idCase}/Assignees","case-handler-getWorkItems":n.sharepointProxyPrefix+"Rest/Cases/{idCase}/WorkItems","case-handler-getWorkItemsByGuid":n.sharepointProxyPrefix+"Rest/Cases/{guid}/WorkItemsByGuid","case-handler-getAsynchExecutionState":n.sharepointProxyPrefix+"Rest/Cases/{idCase}/AsynchExecutionState","case-handler-addNewCase":n.sharepointProxyPrefix+"Rest/Cases","case-handler-startProcess":n.sharepointProxyPrefix+"Rest/Processes/StartProcess/{idProcess}","case-handler-getActivityLog":n.sharepointProxyPrefix+"Rest/Cases/{idCase}/ActivityLog","case-handler-getActivityDetailLog":n.sharepointProxyPrefix+"Rest/Cases/{idWorkItemFrom}/ActivityDetailLog","case-handler-getEntityLog":n.sharepointProxyPrefix+"Rest/Cases/{idCase}/EntityLog","case-handler-getEntityDetailLog":n.sharepointProxyPrefix+"Rest/Cases/{idCase}/EntityDetailLog","case-handler-getUserLog":n.sharepointProxyPrefix+"Rest/Cases/{idCase}/UserLog","case-handler-getUserDetailLog":n.sharepointProxyPrefix+"Rest/Cases/{idCase}/UserDetailLog","case-handler-getCaseFormsRenderVersion":n.sharepointProxyPrefix+"Rest/Cases/{idCase}/FormsRenderVersion","case-handler-getCaseFormsRenderVersionByGuid":n.sharepointProxyPrefix+"Rest/Cases/{guid}/FormsRenderVersionByGuid","offline-getProcessTree":n.proxyPrefix+"Rest/Processes/OfflineProcessTree","offline-getForms":n.proxyPrefix+"Rest/RenderForm/offlineForms","offline-sendForm":n.proxyPrefix+"Rest/Cases/SaveAsynchWorkItemOffLine","case-handler-getCasesList":n.proxyPrefix+"Rest/Processes/GetCases","favorites-handler-saveFavorite":n.sharepointProxyPrefix+"Rest/Favorites","favorites-handler-deleteFavorite":n.sharepointProxyPrefix+"Rest/Favorites/{guidFavorite}","bamAnalytics-handler-getAnalisysQueries":n.sharepointProxyPrefix+"Rest/BAMAnalytics/AnalisysQueries","bamAnalytics-handler-updateQuery":n.sharepointProxyPrefix+"Rest/BAMAnalytics/Reports/Ids/{idQuery}","inbox-handler-getInboxSummary":n.sharepointProxyPrefix+"Rest/Inbox/Summary","MessageHandler-NewComment":n.sharepointProxyPrefix+"Rest/Cases/{idCase}/Comments","MessageHandler-GetComments":n.sharepointProxyPrefix+"Rest/Cases/{idCase}/Comments","MessageHandler-SetCategoryToComment":n.sharepointProxyPrefix+"Rest/Cases/{idCase}/Comments/{idComment}","MessageHandler-RemoveComment":n.sharepointProxyPrefix+"Rest/Cases/{idCase}/Comments/{idComment}","MessageHandler-ReplyComment":n.sharepointProxyPrefix+"Rest/Cases/{idCase}/Comments/{idComment}/Replies","MessageHandler-RemoveReply":n.sharepointProxyPrefix+"Rest/Cases/{idCase}/Comments/{idComment}/Replies/{idReply}","MessageHandler-GetCategoryColors":n.sharepointProxyPrefix+"Rest/Cases/Comments/CategoryColors","MessageHandler-RenameCategoryColor":n.sharepointProxyPrefix+"Rest/Cases/Comments/CategoryColors/{idColorCategory}","MessageHandler-CountNewComments":n.sharepointProxyPrefix+"Rest/Cases/{idCase}/Comments/{idLastComment}","process-handler-getAllProcesses":n.sharepointProxyPrefix+"Rest/Processes","process-handler-getCustomizedColumnsData":n.sharepointProxyPrefix+"Rest/Processes/CustomizedColumnsData","process-handler-getCategory":n.sharepointProxyPrefix+"Rest/Processes/Categories","process-handler-getRecentProcesses":n.sharepointProxyPrefix+"Rest/Processes/RecentProcesses","process-handler-getCustomizedColumnsDataInfo":n.sharepointProxyPrefix+"Rest/Processes/CustomizedColumnsDataInfo","process-handler-getActivitiesData":n.sharepointProxyPrefix+"Rest/Processes/CasesData/MyActivities","process-handler-getPendingsData":n.proxyPrefix+"Rest/Processes/CasesData/MyPendings","query-handler-getqueries":n.sharepointProxyPrefix+"Rest/Queries","user-handler-getCurrentUser":n.sharepointProxyPrefix+"Rest/Users/CurrentUser","old-render":n.sharepointProxyPrefix+"App/ListaDetalle/Detalle.aspx",Reports:n.sharepointProxyPrefix+"RestServices/BAMAnalyticsHandler.ashx","reports-handler-deleteQueries":n.sharepointProxyPrefix+"Rest/BAMAnalytics/Reports/{QueryId}","folders-handler-getUserQueries":n.sharepointProxyPrefix+"Rest/SmartFolders","folders-associate-deleteSmartFolder":n.sharepointProxyPrefix+"Rest/SmartFolders/{idSmartFolder}","folders-handler":n.sharepointProxyPrefix+"RestServices/SmartFoldersHandler.ashx","folders-associate":n.sharepointProxyPrefix+"App/Ajax/AJAXGateway.aspx","smartfolders-integration":n.sharepointProxyPrefix+"App/WorkPortal/ConfigureFilteredFolder.aspx",AlarmAdmin:n.sharepointProxyPrefix+"App/Admin/AlarmsAdmin.aspx",AnalyticsProcess:n.sharepointProxyPrefix+"App/Cockpit/AnalyticsProcess.aspx",AnalyticsSensor:n.sharepointProxyPrefix+"App/Cockpit/AnalyticsSensor.aspx",AnalyticsTask:n.sharepointProxyPrefix+"App/Cockpit/AnalyticsTask.aspx",AsynchronousWorkitemRetries:n.sharepointProxyPrefix+"App/Admin/AsynchDisabledWorkitems.aspx",AuthenticationLogQuery:n.sharepointProxyPrefix+"App/Admin/AuthLogQuery.aspx",BAMProcess:n.sharepointProxyPrefix+"App/Cockpit/BAMProcess.aspx",BAMTask:n.sharepointProxyPrefix+"App/Cockpit/BAMTask.aspx",BusinessPolicies:n.sharepointProxyPrefix+"App/Admin/BusinessPolicies/BusinessPoliciesSelector.aspx",CaseAdmin:n.sharepointProxyPrefix+"App/Admin/CaseSearch.aspx",CasesMonitor:n.sharepointProxyPrefix+"App/Admin/CasesMonitor.aspx",Closed:n.sharepointProxyPrefix+"App/ListaDetalle/listaitems.aspx?h_Location=Cerrados&I_ProcessState=Completed",CurrentUser:n.sharepointProxyPrefix+"App/Admin/CurrentUser.aspx",EncryptionAdmin:n.sharepointProxyPrefix+"App/Admin/Encrypt.aspx",MobileUpdatesAdmin:n.sharepointProxyPrefix+"App/MobileUpdates/default.aspx",EntityAdmin:n.sharepointProxyPrefix+"App/Admin/Entity.aspx",LocationResources:n.sharepointProxyPrefix+"App/Admin/AdminLocResources.aspx",NewCase:n.sharepointProxyPrefix+"App/Radicar/application.aspx",Pending:n.sharepointProxyPrefix+"App/ListaDetalle/listaitems.aspx?h_Location=Pendientes&I_processState=Running",Profiles:n.sharepointProxyPrefix+"App/Admin/ProfilesAdminSearch.aspx",Search:n.sharepointProxyPrefix+"App/ListaDetalle/Search.aspx",UserAdmin:n.sharepointProxyPrefix+"App/Admin/ListUsers.aspx",UserDefaultAssignation:n.sharepointProxyPrefix+"App/Admin/DefaultAssignationUser.aspx?h_AdminDefaultAssign=1",UserPendingRequests:n.sharepointProxyPrefix+"App/Admin/UserPendingRequests.aspx",ListPreferences:n.sharepointProxyPrefix+"App/Admin/CurrentUser.aspx",GRDimensionAdmin:n.sharepointProxyPrefix+"App/Cockpit/DimensionEdit.aspx",Licenses:n.sharepointProxyPrefix+"App/Admin/Licenses.aspx",AnalysisQueries:n.sharepointProxyPrefix+"App/Inicio/WPAnalysisQuery.aspx",ProcessAdmin:n.sharepointProxyPrefix+"App/Admin/AdminProcess.aspx",ResourceBAM:n.sharepointProxyPrefix+"App/Cockpit/BAMResourceMonitor.aspx",WorkPortalVersion:n.sharepointProxyPrefix+"Rest/Util/Version","entities-administration":"RestServices/EntityHandler.ashx",getCurrentTheme:n.sharepointProxyPrefix+"Api/Theme/Current","process-handler-getFavourites":n.proxyPrefix+"Rest/Home/MyFavorites/Count","process-handler-getFavouriteCases":n.proxyPrefix+"Rest/Home/MyFavorites","stuff-handler-getUserStuff":n.sharepointProxyPrefix+"Rest/Stakeholder/Collections","stuff-handler-getUserStuff-v2":n.sharepointProxyPrefix+"Rest/Stakeholder/Collections/v2","templates-handler-getCollectionData":n.proxyPrefix+"Api/Collection/{idFact}/Data","templates-handler-getVirtualCollectionData":n.proxyPrefix+"Api/Collection/{guidVirtualCollection}/VirtualData","entities-handler-getMapping":n.sharepointProxyPrefix+"Rest/Entities/Mapping","entities-handler-getActions":n.sharepointProxyPrefix+"Rest/Entities/Actions","actions-handler-getDataForm":n.sharepointProxyPrefix+"Rest/Handlers/Render","actions-handler-hasStartForm":n.sharepointProxyPrefix+"Rest/Processes/HasStartForm","actions-handler-executeRule":n.sharepointProxyPrefix+"Rest/Action/Rule","process-handler-getUsersAndEvents":n.sharepointProxyPrefix+"Rest/Processes/CasesData/UsersAndEvents"}):{}};
$.Class.extend("bizagi.workportal.services.context",{},{init:function(n){this.context=n.context;this.endPoints=bizagi.workportal.services.getEndPoints(n);this.proxyPrefix=bizagi.util.isEmpty(n.proxyPrefix)?"":n.proxyPrefix},getUrl:function(n){return this.endPoints[n]==undefined&&bizagi.log("Url not found","No endpoint defined for: "+n),this.endPoints[n]}});
$.Class.extend("bizagi.workportal.services.service",{BA_CONTEXT_PARAMETER_PREFIX:"h_",ENTITIES_QUERY_PAGE_SIZE:10},{init:function(n){n=typeof n=="object"?n:{};n.context=bizagi.util.isEmpty(n.context)?"workportal":n.context;n.proxyPrefix=bizagi.util.isEmpty(n.proxyPrefix)?"":n.proxyPrefix;n.proxyPrefix=this.normalizeUrl(n.proxyPrefix);bizagi.RPproxyPrefix=n.proxyPrefix;n.sharepointProxyPrefix=bizagi.util.isEmpty(n.sharepointProxyPrefix)?"":n.sharepointProxyPrefix;n.sharepointProxyPrefix=this.normalizeUrl(n.sharepointProxyPrefix);this.serviceLocator=new bizagi.workportal.services.context(n);this.pageSize=10;typeof BIZAGI_INBOX_ROWS_PER_PAGE!="undefined"&&(this.pageSize=$.isNumeric(BIZAGI_INBOX_ROWS_PER_PAGE)?BIZAGI_INBOX_ROWS_PER_PAGE:this.pageSize);bizagi.injector.registerInstance("dataService",this)},getUrl:function(n){var t=this;return t.serviceLocator.getUrl(n.endPoint)},normalizeUrl:function(n){return n!=""&&(n[n.length-1]!="/"&&(n=n.concat("/")),n.indexOf("http://")==-1&&n.indexOf("https://")==-1&&(n="http://"+n)),n},getCurrentTheme:function(){var n=this,t=n.serviceLocator.getUrl("getCurrentTheme");return $.read(t)},getOverrides:function(){var n=this;return $.ajax({url:n.serviceLocator.getUrl("overrides")}).pipe(function(n){return n=n||{},$.each(n,function(t,i){var r=i.toUpperCase();(r=="TRUE"||r=="FALSE")&&(n[t]=bizagi.util.parseBoolean(i))}),n})},authenticatedUser:function(){var t=this,n=t.serviceLocator.getUrl("login-handler");return $.read({url:n,data:{userName:BIZAGI_USER,password:BIZAGI_PASSWORD,domain:BIZAGI_DOMAIN}}).pipe(function(n){return n},function(){return n=t.serviceLocator.getUrl("login-handlerv10"),n=n.replace("{0}",BIZAGI_USER||""),n=n.replace("{1}",BIZAGI_PASSWORD||""),n=n.replace("{2}",BIZAGI_DOMAIN||""),$.ajax({url:n,type:"GET",dataType:"json"})})},logoutUser:function(){var n=this,t=n.serviceLocator.getUrl("logoff-handlerv1");return $.read({url:t})},logOffUser:function(){var n=this,t=n.serviceLocator.getUrl("logoff-handler");return $.read({url:t})},getCurrentUser:function(){var n=this;return $.read(n.serviceLocator.getUrl("user-handler-getCurrentUser"))},getInboxSummary:function(){var n=this;return $.read(n.serviceLocator.getUrl("inbox-handler-getInboxSummary")).pipe(function(n){return n.inboxSummary})},getAllProcesses:function(n){var r=this,t,i;return n=n||{},t={},i=r.serviceLocator.getUrl("process-handler-getAllProcesses"),n.taskState!=undefined&&(t.taskState=n.taskState),n.onlyFavorites!=undefined&&n.onlyFavorites!=""&&(t.onlyFavorites=n.onlyFavorites),n.myActivities!=undefined&&n.myActivities!=""&&(t.myActivities=n.myActivities),n.myPendings!=undefined&&n.myPendings!=""&&(t.myPendings=n.myPendings),n.smartfoldersParameters&&(i=i+"?"+n.smartfoldersParameters),bizagi.isMobile()&&(t.mobileDevice=!0),$.read(i,t).pipe(function(t){if(!!n.skipAggrupate)return t;var u={},i={},r=bizagi.localization.getResource("workportal-widget-inbox-all-processes"),f={name:bizagi.localization.getResource("workportal-widget-inbox-all-cases"),path:"",category:r,isFavorite:n.onlyFavorites||!1,guidFavorite:"",idworkflow:"",guidWFClass:"",count:0};i[r]=[];i[r].workflows=[];i[r].workflows.push(f);t.workflows&&$.each(t.workflows.workflow,function(n,t){i[t.category]||(i[t.category]=[],i[t.category].workflows=[]);i[t.category].workflows.push(t);f.count+=Number(t.count)});u.categories=[];for(key in i)u.categories.push({name:key,workflows:i[key].workflows});return u})},getProcessIcon:function(n){var t=this,i={processId:n.processId};return $.read({url:t.serviceLocator.getUrl("process-getIcon"),data:i,batchRequest:!0})},getCollectionIcon:function(n){var t=this,i={collectionId:n.collectionId};return $.read({url:t.serviceLocator.getUrl("collections-getIcon"),data:i,batchRequest:!0})},getFavourites:function(){var n=this,t=n.serviceLocator.getUrl("process-handler-getFavourites");return $.read(t,{}).pipe(function(n){return n})},getMyStuff:function(){var n=this,t=n.serviceLocator.getUrl("process-handler-getMyStuff");return $.read(t,{}).pipe(function(n){return n})},getFavouriteCases:function(n){var i=this,t={},r=i.serviceLocator.getUrl("process-handler-getFavouriteCases");return n=n||{},t.pageSize=n.pageSize||i.pageSize,t.page=n.page||1,bizagi.isMobile()&&(t.mobileDevice=!0),$.read(r,t).pipe(function(n){return n})},getActions:function(n){var r=this,t,i;return n=n||{},t={},i=r.serviceLocator.getUrl("process-handler-getActions"),bizagi.isMobile()&&(t.mobileDevice=!0),$.read(i,t).pipe(function(n){return n})},getCasesList:function(n){var r=this,t,i;return n=n||{},t={},i=r.serviceLocator.getUrl("case-handler-getCasesList"),t.pageSize=n.pageSize||10,t.page=n.page||1,t.numberOfFields=n.numberOfFields||"-1",t.idWfClass=n.idWfClass||"-1",$.read(i,t).pipe(function(n){for(var i={overdue:[],today:[],tomorrow:[],upcoming:[],page:n.page,totalPages:n.totalPages},r=new Date,s=r.getMonth(),u=r.getDate(),h=r.getYear(),f=0;n.elements.length>f;f++){var t=n.elements[f],e=new Date(t[3]),o=e.getDate(),c=e.getMonth(),l=e.getYear();u>o||s>c&&h>=l?(t[3]=bizagi.util.dateFormatter.formatDate(new Date(t[3]),"dd MMM"),i.overdue.push(t)):u==o?(t[3]=bizagi.util.dateFormatter.formatDate(new Date(t[3]),"hh:mm"),i.today.push(t)):u+1==o?(t[3]=bizagi.util.dateFormatter.formatDate(new Date(t[3]),"hh:mm"),i.tomorrow.push(t)):(t[3]=bizagi.util.dateFormatter.formatDate(new Date(t[3]),"dd MMM"),i.upcoming.push(t))}return i})},getAllAdministrableEntities:function(n){var i=this,t;return n=n||{},t={},t.action="entitiesList",t.kind="administrable",$.ajax({url:i.serviceLocator.getUrl("entities-administration"),data:t,type:"POST",dataType:"json"}).pipe(function(n){var t={entities:[]};return $.each(n,function(n,i){t.entities.push(i)}),t})},getEntitiesList:function(n){var t=this;return n=n||{},n.action="entitiesList",n.kind="entitiesData",$.ajax({url:t.serviceLocator.getUrl("entities-administration"),data:n,type:"POST",dataType:"json"})},getCasesByWorkflow:function(n){var i=this,t,r,u;return n=n||{},t={},r=i.serviceLocator.getUrl("process-handler-getCustomizedColumnsDataInfo"),bizagi.util.isEmpty(n.taskState)||(t.taskState=n.taskState),bizagi.util.isEmpty(n.idWorkflow)||(t.idWorkflow=n.idWorkflow),n.onlyFavorites==!0&&(t.onlyFavorites=!0,t.taskState="all"),t.pageSize=n.pageSize||i.pageSize,t.page=n.page||1,bizagi.isMobile()&&(t.mobileDevice=!0),n.smartfoldersParameters&&(u=n.smartfoldersParameters.split("&"),$.each(u,function(n,i){var r=i.split("=");t[r[0]]=r[1]})),$.read(r,t).pipe(function(n){return $.each(n.cases.rows,function(t,i){var r=[];n.cases.rows[t].radnumber=i.id;$.each(i.fields,function(i,u){if(u!=undefined)try{u.isRadNumber!=undefined&&u.isRadNumber=="true"?n.cases.rows[t].radnumber=u.Value:u.workitems!=undefined?n.cases.rows[t].workitems=u.workitems:r.push(u)}catch(f){}});n.cases.rows[t].fields=r}),n.cases})},getOrganizationsList:function(){var t=this,i=t.serviceLocator.getUrl("process-handler-getOrganizations"),n={};return n.type=12,n.name="",$.read(i,n)},getCustomizedColumnsData:function(n){var i=this,t,r,u;return n=n||{},t={},r=i.serviceLocator.getUrl("process-handler-getCustomizedColumnsData"),t.pageSize=n.pageSize||i.pageSize,t.page=n.page||1,t.orderFieldName=n.orderFieldName||"",t.orderType=n.orderType||"0",t.order=n.order||"",bizagi.isMobile()&&(t.mobileDevice=!0),n.taskState=n.taskState||"all",n.taskState.toString().toLowerCase()===""&&(n.taskState="all"),n.taskState.toString().toLowerCase()==="red"&&(n.taskState="Red"),n.taskState.toString().toLowerCase()==="yellow"&&(n.taskState="Yellow"),n.taskState.toString().toLowerCase()==="green"&&(n.taskState="Green"),t.taskState=n.taskState,bizagi.util.isEmpty(n.idWorkflow)||(t.idWorkflow=n.idWorkflow),bizagi.util.isEmpty(n.idTask)||(t.idTask=n.idTask),bizagi.util.isEmpty(n.radNumber)||(t.radNumber=n.radNumber),n.onlyFavorites==!0&&(t.onlyFavorites=!0,t.taskState="all"),n.smartfoldersParameters&&(u=n.smartfoldersParameters.split("&"),$.each(u,function(n,i){var r=i.split("=");t[r[0]]=r[1]})),n.group&&(t.group=n.group),$.read(r,t)},getCategories:function(n){var i=this,t;return n=n||{},t={},n.idCategory&&(t.idCategory=n.idCategory),n.idApp&&(t.idApp=n.idApp),bizagi.isMobile()&&(t.mobileDevice=!0),t.groupByApp=n.groupByApp||!1,$.read(i.serviceLocator.getUrl("process-handler-getCategory"),t)},getRecentProcesses:function(n){var t=this;return n=n||{},$.read(t.serviceLocator.getUrl("process-handler-getRecentProcesses"),n)},getCaseSummary:function(n){var t=this;return(n=n||{},typeof n.idCase!="undefined")?$.read({url:t.serviceLocator.getUrl("case-handler-getCaseSummary"),data:{idCase:n.idCase,eventAsTasks:n.eventAsTasks||"false",onlyUserWorkItems:n.onlyUserWorkItems||"true",mobileDevice:bizagi.isMobile()||"false"},serviceType:"GETSUMMARY"}).pipe(function(n){return n}):typeof n.guid!="undefined"?$.read({url:t.serviceLocator.getUrl("case-handler-getCaseSummaryByGuid"),data:{guid:n.guid,eventAsTasks:n.eventAsTasks||"false",onlyUserWorkItems:n.onlyUserWorkItems||"true",mobileDevice:bizagi.isMobile()||"false"},serviceType:"GETSUMMARY"}).pipe(function(n){return n}):void 0},getCaseAssignees:function(n){var t=this;return n=n||{},$.read(t.serviceLocator.getUrl("case-handler-getCaseAssignees"),{idCase:n.idCase}).pipe(function(n){return n})},getCaseTasks:function(n){var t=this;return n=n||{},$.read(t.serviceLocator.getUrl("case-handler-getCaseTasks"),{idCase:n.idCase})},getCaseEvents:function(n){var t=this;return n=n||{},$.read({url:t.serviceLocator.getUrl("case-handler-getCaseEvents"),data:{idCase:n.idCase},serviceType:"GETEVENTS"}).pipe(function(n){return n})},getCaseSubprocesses:function(n){var t=this;return n=n||{},$.read({url:t.serviceLocator.getUrl("case-handler-getCaseSubprocesses"),data:{idCase:n.idCase},serviceType:"GETSUBPROCESSES"}).pipe(function(n){return n})},getCaseFormsRenderVersion:function(n){var t=this;return n=n||{},typeof n.guid!="undefined"?$.read(t.serviceLocator.getUrl("case-handler-getCaseFormsRenderVersionByGuid"),{guid:n.guid}):$.read(t.serviceLocator.getUrl("case-handler-getCaseFormsRenderVersion"),{idCase:n.idCase})},getCaseFormsRenderVersionDataContent:function(n){var i=this,t=new $.Deferred;return $.when(i.getCaseFormsRenderVersion(n)).done(function(n){t.resolve(n)}),t.promise()},getTaskAssignees:function(n){var t=this;return n=n||{},$.read(t.serviceLocator.getUrl("case-handler-getTaskAssignees"),{idCase:n.idCase,idTask:n.idTask})},getWorkitems:function(n){var r=this,t,i;return n=n||{},t={},typeof n.guid!="undefined"&&(t.guid=n.guid),t.idCase=n.idCase,n.fromTask!="0"&&(t.fromTask=n.fromTask),n.fromWorkItemId!=""&&(t.fromWorkItemId=n.fromWorkItemId),t.mobileDevice=bizagi.isMobile(),n.eventAsTasks?t.eventAsTasks=n.eventAsTasks:"",typeof n.onlyUserWorkItems!="undefined"&&(t.onlyUserWorkItems=n.onlyUserWorkItems),i=r.serviceLocator.getUrl("case-handler-getWorkItems"),typeof n.guid!="undefined"&&typeof n.idCase=="undefined"&&(i=r.serviceLocator.getUrl("case-handler-getWorkItemsByGuid").replace("{guid}",n.guid)),$.read({url:i,data:t,serviceType:"GETWORKITEMS"})},getQueriesDefinitions:function(n){var t=this,i,r;return t.hashQueriesDef&&n.idNode?bizagi.override.enableQueriesClassicMenu?t.hashQueriesDef[n.idNode]:n.idNode==-1||t.hashQueriesDef[n.idNode].length!=1||t.hashQueriesDef[n.idNode][0].guidForm!="00000000-0000-0000-0000-000000000000"||t.hashQueriesDef[n.idNode][0].notMigratedUrl?n.idNode!=-1&&t.hashQueriesDef[n.idNode].length>1?(i=[],$.each(t.hashQueriesDef[n.idNode],function(n,r){if(r.nodes.length>0){var u=t.getQueriesDefinitions({idNode:r.idNode});$.merge(i,u)}else i.push(r)}),i):t.hashQueriesDef[n.idNode]:t.getQueriesDefinitions({idNode:t.hashQueriesDef[n.idNode][0].idNode}):(r=new $.Deferred,$.read(t.serviceLocator.getUrl("query-handler-getqueries-definitions")).done(function(n){t.hashQueriesDef={};t.hashQueriesDef[0]={};t.processQueriesDefinitions("-1",n.query);r.resolve(t.hashQueriesDef["-1"])}),r.promise())},processQueriesDefinitions:function(n,t){var i=this;$.each(t,function(t,r){i.hashQueriesDef[n]||(i.hashQueriesDef[n]=[]);i.hashQueriesDef[n].push(r);r.nodes?i.processQueriesDefinitions(r.idNode,r.nodes):r.nodes={}})},getQueries:function(n){var t=this,i;return t.hashQueries&&n.idElement?t.hashQueries[n.idElement]:(i=new $.Deferred,$.read(t.serviceLocator.getUrl("query-handler-getqueries")).done(function(n){t.hashQueries={};t.hashQueries[0]={};t.processQueries(n.query);i.resolve(t.hashQueries["-1"])}),i.promise())},processQueries:function(n){var t=this;$.each(n,function(n,i){t.hashQueries[i.idParent]||(t.hashQueries[i.idParent]=[]);t.hashQueries[i.idParent].push(i);i.nodes?t.processQueries(i.nodes):i.nodes={}})},createNewCase:function(n){var i=this,t={};return n=n||{},n.caseData&&(n.caseData=JSON.stringify(n.caseData)),n.idWfClass&&(t.idWfClass=n.idWfClass),n.idOrganization&&(t.idOrganization=n.idOrganization),$.create({url:i.serviceLocator.getUrl("case-handler-addNewCase"),data:t,serviceType:"NEWCASE"})},startProcess:function(n){var i=this,t;return n=n||{},n.isAdhocProcess==="true"?(t=i.serviceLocator.getUrl("adhoc-process-start"),$.create({url:t.replace("{processId}",n.idProcess),serviceType:"STARTPROCESS"})):(t=i.serviceLocator.getUrl("case-handler-startProcess"),$.create({url:t,data:{idProcess:n.idProcess},serviceType:"STARTPROCESS"}))},searchCases:function(n){var i=this,t;return n=n||{},t={},t.h_action="SEARCHCASES",t.onlyUserCases=!1,t.active=!1,t.page=n.page||1,n.radNumber&&(t.radNumber=$.trim(n.radNumber)),t.pageSize=n.pageSize||i.pageSize,$.ajax({url:i.serviceLocator.getUrl("query-handler"),data:t,type:"POST",dataType:"json"})},queryCases:function(n){var i=this,t;return n=n||{},t={},t.h_action="QUERYCASES",t.onlyUserCases=n.onlyUserCases||!1,t.active=n.active&&!0,t.page=n.page||1,n.radNumber&&(t.radNumber=$.trim(n.radNumber)),t.pageSize=n.pageSize||i.pageSize,t.filter=n.filter,t.outputxpath=n.outputxpath,t.orderFieldName=n.orderFieldName||"",t.orderType=n.orderType=="asc"||n.orderType==1?1:0,t.order=n.order||"",$.ajax({url:i.serviceLocator.getUrl("query-handler"),data:t,type:"POST",dataType:"json"})},queryEntities:function(n){var i=this,t;return n=n||{},t={},t.h_action="QUERYENTITIES",t.page=n.page||1,t.pageSize=i.Class.ENTITIES_QUERY_PAGE_SIZE,t[i.Class.BA_CONTEXT_PARAMETER_PREFIX+"idEnt"]=n.idEntity,t.filter=n.filter,t.outputxpath=n.outputxpath,t.orderFieldName=n.orderFieldName||"",t.orderType=n.orderType||"",t.order=n.order||"",$.ajax({url:i.serviceLocator.getUrl("query-handler"),data:t,type:"POST",dataType:"json"})},getMenuAuthorization:function(){var n=this;return $.read(n.serviceLocator.getUrl("authorization-handler-getMenuAuthorization"))},isCaseCreationAuthorized:function(n){var i=this,t=i.serviceLocator.getUrl("authorization-handler-isCaseCreationAuthorized");return t=t.replace("{0}",n.idWfClass||""),$.read({url:t})},getAsynchExecutionState:function(n){var t=this;return n=n||{},n.idCase!=-1?$.read({url:t.serviceLocator.getUrl("case-handler-getAsynchExecutionState"),data:{idCase:n.idCase,idAsynchWorkitem:n.idAsynchWorkitem},serviceType:"ASYNCHEXECUTION"}):$.read({url:t.serviceLocator.getUrl("case-handler-getAsynchExecutionState"),data:{idCase:n.idCase,idAsynchWorkitem:n.idAsynchWorkitem},serviceType:"ASYNCHEXECUTION"})},supportedLogTypes:function(){var n=this;return $.read(n.serviceLocator.getUrl("case-handler-supportedLogTypes"))},getActivityLog:function(n){var t=this;return n=n||{},$.read(t.serviceLocator.getUrl("case-handler-getActivityLog"),{idCase:n.idCase,orden:n.sort||0,idActualPage:n.idActualPage||1,pageSize:n.pageSize||10}).pipe(function(n){var u=0,t,r,i;for(n.rows&&n.rows.length&&(u=n.rows.length),t=0,i=4,t;t<u;t++)r=new Date(n.rows[t][i]),n.rows[t][i]=r=="Invalid Date"?n.rows[t][i]:bizagi.util.dateFormatter.formatDate(r,bizagi.localization.getResource("dateFormat")+" "+bizagi.localization.getResource("timeFormat"));return n})},getActivityDetailLog:function(n){var t=this;return n=n||{},$.read(t.serviceLocator.getUrl("case-handler-getActivityDetailLog"),{idCase:n.idCase,idWorkItemFrom:n.idWorkItemFrom,idActualPage:n.idActualPage||1,pageSize:n.pageSize||10}).pipe(function(n){return n})},getEntityLog:function(n){var t=this;return n=n||{},$.read(t.serviceLocator.getUrl("case-handler-getEntityLog"),{idCase:n.idCase,orden:n.sort||0,idActualPage:n.idActualPage||1,pageSize:n.pageSize||10}).pipe(function(n){return n})},getEntityDetailLog:function(n){var t=this;return n=n||{},$.read(t.serviceLocator.getUrl("case-handler-getEntityDetailLog"),{idCase:n.idCase,idEntity:n.idEntity||-1,userFullName:n.userFullName||"",attribDisplayName:n.attribDisplayName||"",idActualPage:n.idActualPage||1,pageSize:n.pageSize||10}).pipe(function(n){return n})},getUserLog:function(n){var t=this;return n=n||{},$.read(t.serviceLocator.getUrl("case-handler-getUserLog"),{idCase:n.idCase,orden:n.sort||0,idActualPage:n.idActualPage||1,pageSize:n.pageSize||10}).pipe(function(n){return n})},getUserDetailLog:function(n){var t=this;return n=n||{},$.read(t.serviceLocator.getUrl("case-handler-getUserDetailLog"),{idCase:n.idCase,idUser:n.idUser,entDisplayName:n.entDisplayName||"",attribDisplayName:n.attribDisplayName||"",idActualPage:n.idActualPage||1,pageSize:n.pageSize||10}).pipe(function(n){return n})},getAdminLog:function(n){var t=this;return n=n||{},$.read(t.serviceLocator.getUrl("case-handler-getAdminLog"),{idCase:n.idCase,orden:n.sort||0,idActualPage:n.idActualPage||1,pageSize:n.pageSize||10}).pipe(function(n){return n})},addFavorite:function(n){var t=this;return n=n||{},$.create(t.serviceLocator.getUrl("favorites-handler-saveFavorite"),{idObject:n.idObject,favoriteType:n.favoriteType}).pipe(function(n){return n})},delFavorite:function(n){var t=this;return n=n||{},$.destroy(t.serviceLocator.getUrl("favorites-handler-deleteFavorite"),{guidFavorite:n.idObject}).pipe(function(n){return n})},summaryAssigness:function(n){var i=this,t=new $.Deferred,r=n.idCase||"";return $.when(i.getCaseAssignees({idCase:r})).done(function(n){for(var i=n.assignees||[],h=i.length,u={showAssignees:bizagi.override.showAssignees&&i.length>0?!0:!1,assignees:{},events:"",activities:""},f="",e="",o=[],s=[],r=0;r<h;r++)bizagi.util.parseBoolean(i[r].isEvent)?o.indexOf(i[r].idUser)==-1&&(o.push(i[r].idUser),f+=i[r].Name+", "):s.indexOf(i[r].idUser)==-1&&(s.push(i[r].idUser),e+=i[r].Name+", ");u.events=f.substring(0,f.length-2);u.activities=e.substring(0,e.length-2);t.resolve(u)}),t.promise()},summarySubProcess:function(n){var i=this,t=$.Deferred(),r=n.idCase||"";return $.when(i.getCaseSubprocesses({idCase:r})).done(function(n){var u,i,r;if(n.showSubProcess=n.subProcesses.length>=1?!0:!1,n.showSubProcesColumns=n.CustFields[0]!==undefined&&n.CustFields[0][0].length>=1?!0:!1,n.showSubProcesColumns)for(n.subProcPersonalized={},i=0;i<n.CustFields.length;i++){for(u=0,r=0;r<n.subProcesses.length;r++)n.subProcesses[r].idCustData==i&&(n.subProcPersonalized[i]=n.subProcPersonalized[i]||{},n.subProcPersonalized[i].subProcesses=n.subProcPersonalized[i].subProcesses||{},n.subProcPersonalized[i].subProcesses[u++]=n.subProcesses[r]);n.subProcesses[i].idCustData!=-1&&n.subProcPersonalized[i]!=undefined&&(n.subProcPersonalized[i].CustFields=n.CustFields[i],n.subProcPersonalized[i].idCase=n.idCase)}t.resolve(n)}),t.promise()},summaryCaseEvents:function(n){var i=this,t=$.Deferred(),r=n.idCase||"";return $.when(i.getCaseEvents({idCase:r})).done(function(n){n.showEvents=n.events.length>=1?!0:!1;t.resolve(n)}),t.promise()},summaryCaseDetails:function(n){var u=this,t=new $.Deferred,r=n.idWorkitem||0;return $.when(u.getCaseSummaryDataContent(n)).done(function(n){var f,u,e;for(n.currentState=n.currentState||[],f=n.currentState.length,n.showEvents=n.countEvents>=1?!0:!1,n.showParentProcess=n.idParentCase>=1?!0:!1,n.parentProcess={displayName:n.parentDisplayName,idCase:n.idParentCase},n.isClosedForAllUsers=bizagi.util.parseBoolean(n.isClosed),n.isClosed=bizagi.util.parseBoolean(n.isOpen)?!1:!0,n.showAssignees=bizagi.override.showAssignees&&n.countAssigness>0?!0:!1,n.showSubProcess=n.countSubProcesses>0?!0:!1,n.showForm=bizagi.util.parseBoolean(n.hasGlobalForm)?!0:!1,n.allowsReassign="false",i=0;i<f;i++)n.currentState[i].idWorkItem==r&&(n.allowsReassign=n.currentState[i].allowsReassign);for(u=[],e=0,i=0;i<f;i++)!bizagi.util.parseBoolean(n.currentState[i].isEvent)&&bizagi.util.parseBoolean(n.currentState[i].assignToCurrentUser)&&n.currentState[i].idWorkItem!=r&&(u[e++]=n.currentState[i]);n.currentStateTypes=u;n.showActivities=u.length>0?!0:!1;t.resolve(n)}).fail(function(n){t.reject(n)}),t.promise()},releaseActivity:function(n){var r=this,i=r.serviceLocator.getUrl("case-handler-releaseActivity"),t;return i=i.replace("{idCase}",n.idCase),t={},n&&(t.idCase=n.idCase,t.idWorkItem=n.idWorkItem),$.ajax({url:i,data:t,type:"POST",dataType:"json"})},summaryActivities:function(n){var t={},i=n.data||{},r=r||n.idWorkitem||0;try{t.showActivities=i.currentStateTypes.length>=1?!0:!1;t.currentState=i.currentStateTypes;t.globalIdWorkitem=r;t.creationDate=i.creationDate}catch(u){}return t},getCaseSummaryDataContent:function(n){var i=this,t=new $.Deferred;return $.when(i.getCaseSummary(n)).done(function(n){n.taskState=i.icoTaskState;n.createdBy&&(n.createdByName=n.createdBy.Name,n.createdByUserName=n.createdBy.userName,n.caseDescription=n.caseDescription==""?"":n.caseDescription,n.processPath=n.processPath.replace(/\//g," > ")+n.process,n.showWorkOnIt=!0);t.resolve(n)}).fail(function(n){t.reject(n)}),t.promise()},getSmartFolders:function(n){var t=this,i={};return i.idFolder=n||"",$.read(t.serviceLocator.getUrl("folders-handler-getUserQueries"),i).pipe(function(i){return n==-1||n==""?i:t.searchFolders(n,i)||[]})},deleteSmartFolder:function(n){var i=this,t={};return t.action="6",n=n||{},t.idSmartFolder=n.idSmartFolder||"",t.idUser=n.idUser||"",$.destroy(i.serviceLocator.getUrl("folders-associate-deleteSmartFolder"),t)},getFolders:function(n){var i=this,t={};return t.action="getUserFolder",t.idFolder=n||"",$.ajax({url:i.serviceLocator.getUrl("folders-handler"),type:"POST",data:t,dataType:"json"}).pipe(function(t){return n==""?{folders:[{name:bizagi.localization.getResource("workportal-widget-folders"),id:"-1",idParent:0,childs:t}]}:n==-1?t:i.searchFolders(n,t)||[]})},searchFolders:function(n,t){for(var r,i=0;i<t.folders.length;i++)if(r=t.folders[i],r.id==n)return t.folders[i].childs;return undefined},getCasesByFolder:function(n){return n=n||"",$.ajax({cache:!0,url:"RestServices/"+n,type:"GET",dataType:"json"})},makeFolder:function(n){var i=this,t={};return t.action="CreateUpdateFolder",t.folderName=n.folderName||"No Name",n.idParentFolder!=undefined&&n.idParentFolder>1&&(t.idParentFolder=n.idParentFolder),$.ajax({url:i.serviceLocator.getUrl("folders-handler"),data:t,type:"POST",dataType:"json"})},updateFolder:function(n){var i=this,t={};return n=n||{},t.action="CreateUpdateFolder",t.idFolder=n.idFolder||"",n.folderName&&(t.folderName=n.folderName),n.idParentFolder&&(t.idParentFolder=n.idParentFolder),$.ajax({url:i.serviceLocator.getUrl("folders-handler"),data:t,type:"POST",dataType:"json"})},associateCaseToFolder:function(n){var i=this,t={};return t.action="4",n=n||{},t.idCase=n.idCase||"",t.idCustomFolder=n.idCustomFolder,$.ajax({url:i.serviceLocator.getUrl("folders-associate"),data:t,type:"POST",dataType:"json"})},dissasociateCaseFromFolder:function(n){var i=this,t={};return t.action="DeleteCaseFromFolder",n=n||{},t.idFolder=n.idFolder,t.idCase=n.idCase,$.ajax({url:i.serviceLocator.getUrl("folders-handler"),data:t,type:"POST",dataType:"json"})},deleteFolder:function(n){var i=this,t={};return t.action="5",n=n||{},t.idCustomFolder=n.idCustomFolder||"",$.ajax({url:i.serviceLocator.getUrl("folders-associate"),data:t,type:"POST",dataType:"json"})},getFile:function(n){var r=this,t={},i=this.serviceLocator.getUrl("file-handler");return n=n||{},t.action="getFileContent",t.uploadId=n.uploadId||"",t.entityId=n.entityId||"",t.entityKey=n.entityKey||"",bizagi.services.ajax.pathToBase+i+"?"+jQuery.param(t)},getComments:function(n){var t=this;return n=n||{},$.read(encodeURI(t.serviceLocator.getUrl("MessageHandler-GetComments")),{idCase:n.idCase||"",idColorCategory:typeof n.idColorCategory=="number"?n.idColorCategory:"",pag:n.pag||1,pagSize:n.pagSize||10}).pipe(function(n){var i=new $.Deferred,r="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";return n.comments?$.each(n.comments,function(t){n.comments[t].hasOwnProperty("CategoryColor")||(n.comments[t].CategoryColor="")}):n.comments=[],n.users?$.each(n.users,function(t){n.users[t].Picture=n.users[t].Picture===""?r:n.users[t].Picture}):$.when(t.getCurrentUser()).done(function(t){n.users=[];n.users.push({Id:t.idUser,Name:t.user,DisplayName:t.userName,Picture:r})}),i.resolve(n),i.promise()})},makeNewComment:function(n){var t=this,i="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";return $.create(t.serviceLocator.getUrl("MessageHandler-NewComment"),{idCase:n.idCase||"",comment:n.comment.replace(/\n/g,"<br>")||""}).pipe(function(n){var r,t;return n.comments&&(r=[n.comments],$.each(r,function(n){r[n].CategoryColor=""}),n.comments=r),n.users&&(t=[n.users],$.each(t,function(n){t[n].Picture=t[n].Picture==""?i:t[n].Picture}),n.users=t),n})},makeNewReply:function(n){var t=this,i="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";return n=n||{},$.create(t.serviceLocator.getUrl("MessageHandler-ReplyComment"),{idCase:n.idCase||"",idComment:n.idComment||"",comment:n.comment.replace(/\n/g,"<br>")||""}).pipe(function(n){if(n.comments&&(n.Replies=[n.comments]),n.users){var t=[n.users];$.each(t,function(n){t[n].Picture=t[n].Picture==""?i:t[n].Picture});n.users=t}return n})},removeComment:function(n){var t=this;return n=n||{},$.destroy(t.serviceLocator.getUrl("MessageHandler-RemoveComment"),{idCase:n.idCase||"",idComment:n.idComment||""})},removeReply:function(n){var t=this;return n=n||{},$.destroy(t.serviceLocator.getUrl("MessageHandler-RemoveReply"),{idCase:n.idCase||"",idComment:n.idComment||"",idReply:n.idReply||""})},renameCommentCategory:function(n){var t=this;return n=n||{},$.update(t.serviceLocator.getUrl("MessageHandler-RenameCategoryColor"),{idColorCategory:n.idColorCategory>=0?n.idColorCategory:"",colorName:n.colorName||""})},setCommentCategory:function(n){var t=this;return n=n||{},$.update(t.serviceLocator.getUrl("MessageHandler-SetCategoryToComment"),{idCase:n.idCase||"",idComment:n.idComment||"",idColorCategory:typeof n.idColorCategory=="number"?n.idColorCategory:""})},getCommentsCategories:function(){var n=this;return $.read(n.serviceLocator.getUrl("MessageHandler-GetCategoryColors")).pipe(function(n){return n.length>1&&n[0].categories?n[0]:n})},getNewComments:function(n){var i=this,t;return n=n||{},t={idCase:n.idCase||0,idComment:n.idComment||0},$.read(i.serviceLocator.getUrl("MessageHandler-CountNewComments"),t)},getAnalisysQueries:function(){var n=this;return $.read(n.serviceLocator.getUrl("bamAnalytics-handler-getAnalisysQueries"))},updateQueries:function(n){var t=this;return $.update(t.serviceLocator.getUrl("bamAnalytics-handler-updateQuery"),{idQuery:n.idQuery>=0?n.idQuery:"",queryName:n.queryName||"",queryDescription:n.queryDescription||""})},deleteQueries:function(n){var i=this,t={};return t.action="1612",t.QueryId=n||"",$.destroy(i.serviceLocator.getUrl("reports-handler-deleteQueries"),t)},getConfiguration:function(){var n=this,t=n.serviceLocator.getUrl("authenticationConfig");return $.read(t)},logout:function(n){var t=this,i={sourceLogout:"user"};sessionStorage.removeItem("bizagiAuthentication");try{$.when(t.getConfiguration()).done(function(r){var u=r.authenticationType;switch(u){case"Federate":$.when($.create(t.serviceLocator.getUrl("logout"),i)).done(function(){var t=r.logOffURL;n&&n!=""&&(t=t.replace(/wreply=[^&]*/,"wreply="+n));location.href=t}).fail(function(){bizagi.log("Error logging out")}).always(function(){location.href=r.logOffURL});break;case"SAML":loader.nativeAjax(loader.getPathUrl(t.serviceLocator.getUrl("logout"),i),function(n){var i=JSON.parse(n.responseText),r,t;if(i.logout===!0)if(typeof i.samlUrlRedirect!="undefined"){r=decodeURI(i.samlUrlRedirect);t=document.createElement("iframe");document.getElementsByTagName("body")[0].appendChild(t);$(t).on("load",function(){var n=bizagi.util.isIE8()?$(this.contentWindow.document.body):$(this.contentWindow.eval("document.body")),t=n.text();location.reload()});t.src=r}else location.reload();else bizagi.log("Error logging out")});break;case"OAuth2":$.when($.create(t.serviceLocator.getUrl("logout"),i)).done(function(){$.when($.read(t.serviceLocator.getUrl("oauth2AuthenticationConfig"))).done(function(t){if(t.logoutUrl&&t.logoutUrl!=""){var i=t.logoutUrl,r=n||t.homeUrl;i=i.replace(/post_logout_redirect_uri=[^&]*/,"post_logout_redirect_uri="+r);location.href=i}else location.reload()}).fail(function(){bizagi.log("Error logging out")})}).fail(function(){bizagi.log("Error logging out")});break;default:$.when($.create(t.serviceLocator.getUrl("logout"),i)).done(function(){n?location.href=n:window.location=bizagi.services.ajax.loginPage}).fail(function(){bizagi.log("Error logging out")})}}).fail(function(n){console.log(n)})}catch(r){console.log(r)}},logoutMobile:function(){var t=this,n;return sessionStorage.removeItem("bizagiAuthentication"),n=t.serviceLocator.getUrl("logout"),$.read(n)},logoutBeforeUnload:function(){var n=this;sessionStorage.removeItem("bizagiAuthentication");$.ajax({type:"POST",async:!1,data:{sourceLogout:"browser"},url:n.serviceLocator.getUrl("logout")})},getOrganizationInfo:function(n){var i=this,t={};return t.objectType=n,$.ajax({url:i.serviceLocator.getUrl("massive-activity-assignments-getOrganizationInfo"),data:t,type:"GET",dataType:"json"})},getCasesByOrganization:function(n){var i=this,t={};return t.roles=n.roles?"["+n.roles.toString()+"]":"[]",t.skills=n.skills?"["+n.skills.toString()+"]":"[]",t.locations=n.locations?"["+n.locations.toString()+"]":"[]",$.ajax({url:i.serviceLocator.getUrl("massive-activity-assignments-getCasesByOrganization"),data:t,type:"GET",dataType:"json"})},reassignCases:function(n){var i=this,t={};return t.users=n.user?"["+n.user.toString()+"]":"[]",t.roles=n.roles?"["+n.roles.toString()+"]":"[]",t.skills=n.skills?"["+n.skills.toString()+"]":"[]",t.locations=n.locations?"["+n.locations.toString()+"]":"[]",$.ajax({url:i.serviceLocator.getUrl("massive-activity-assignments-reassignCases"),data:t,type:"POST",dataType:"json"})},searchUsers:function(n){var i=this,t={};return t.userName=n.userName||"",t.fullName=n.fullName||"",t.domain=n.domain||"",$.ajax({url:i.serviceLocator.getUrl("massive-activity-assignments-searchUsers"),data:t,type:"GET",dataType:"json"})},searchUsersByID:function(n){var t=this,i={ids:"["+n.toString()+"]"};return $.ajax({url:t.serviceLocator.getUrl("massive-activity-assignments-searchUsersById"),data:i,type:"POST",dataType:"json"})},getUsersList:function(n){var t=this;return $.read(t.serviceLocator.getUrl("admin-getUsersList"),n)},getUsersForAssignation:function(n){var t=this;return $.read(t.serviceLocator.getUrl("admin-getUsersForAssignation"),n)},getOAuth2Applications:function(n){var t=this;return $.read(t.serviceLocator.getUrl("admin-getUsersForAssignation"),n)},getAdhocProcessesList:function(n){var t=this;return $.ajax({url:t.serviceLocator.getUrl("admin-getAdhocProcessesList"),data:n,type:"POST",dataType:"json"})},createAdhocProcess:function(n){var t=this;return $.ajax({url:t.serviceLocator.getUrl("admin-createAdhocProcess"),data:n,type:"POST",dataType:"json"})},createNewAdhocProcess:function(n){var t=this;return $.create({url:t.serviceLocator.getUrl("admin-createNewAdhocProcess"),data:JSON.stringify(n),dataType:"json",contentType:"application/json"})},updateAdhocProcess:function(n){var t=this;return $.ajax({url:t.serviceLocator.getUrl("admin-updateAdhocProcess"),data:n,type:"POST",dataType:"json"})},publishAdhocProcess:function(n){var t=this;return $.ajax({url:t.serviceLocator.getUrl("admin-publishAdhocProcess"),data:n,type:"POST",dataType:"json"})},deleteAdhocProcess:function(n){var t=this,i=t.serviceLocator.getUrl("admin-deleteAdhocProcess");return $.ajax({url:i.replace("{processId}",n),type:"DELETE",dataType:"json"})},cloneAdhocProcess:function(n){var t=this;return $.ajax({url:t.serviceLocator.getUrl("admin-cloneAdhocProcess"),data:n,type:"POST",dataType:"json"})},deleteAdhocTask:function(n){var t=this,i=t.serviceLocator.getUrl("admin-deleteAdhocTask");return $.ajax({url:i.replace("{processId}",n.idProcess).replace("{taskId}",n.idTask),type:"DELETE",dataType:"json"})},updateAdhocTask:function(n){var t=this,i=t.serviceLocator.getUrl("admin-updateAdhocTask");return $.ajax({url:i.replace("{processId}",n.idProcess),data:n.task,type:"POST",dataType:"json"})},getAdhocDataSchema:function(n){var t=this,i=t.serviceLocator.getUrl("admin-getAdhocDataSchema");return $.ajax({url:i.replace("{processId}",n),type:"GET",dataType:"json"})},getAdhocProcessDiagram:function(n,t){var i=this,r=i.serviceLocator.getUrl("admin-getAdhocProcessDiagram");return $.ajax({url:r.replace("{processId}",n).replace("{diagramId}",t),type:"GET",dataType:"json"})},getAdhocTask:function(n,t){var i=this,r=i.serviceLocator.getUrl("admin-getAdhocTask");return $.ajax({url:r.replace("{processId}",n).replace("{taskId}",t),type:"GET",dataType:"json"})},saveAdhocProcessDiagram:function(n,t){var i=this,r=i.serviceLocator.getUrl("admin-saveAdhocProcessDiagram");return $.ajax({url:r.replace("{processId}",n),data:t,type:"POST",dataType:"json"})},getAdhocEntitiesList:function(){var n=this,t=n.serviceLocator.getUrl("admin-adhoc-entities-list");return $.read(t,{})},getAdhocUserGroupList:function(){var n=this,t=n.serviceLocator.getUrl("admin-adhoc-user-group-list");return $.read(t,{})},loadUsersByGroup:function(n){var t=this,i=t.serviceLocator.getUrl("admin-adhoc-user-group-data-get");return $.ajax({url:i.replace("{groupId}",n),type:"GET",dataType:"json"})},loadAuthItemInfoByInstance:function(n){var t=this;return $.ajax({url:t.serviceLocator.getUrl("admin-adhoc-authorization-data-get"),data:n,type:"POST",dataType:"json"})},saveAdhocAuthorizationInfo:function(n){var t=this;return $.ajax({url:t.serviceLocator.getUrl("admin-adhoc-authorization-data-save").replace("{processId}",n.processId).replace("{isAdhocTask}",n.isAdhocTask),data:n.auth,type:"POST",dataType:"json"})},deleteAdhocGroup:function(n){var t=this,i=t.serviceLocator.getUrl("admin-adhoc-user-group-delete");return $.ajax({url:i.replace("{groupId}",n),type:"DELETE",dataType:"json"})},saveAdhocGroup:function(n){var t=this;return $.ajax({url:t.serviceLocator.getUrl("admin-adhoc-user-group-save"),data:n,type:"POST",dataType:"json"})},addUserToGroup:function(n){var t=this,i=t.serviceLocator.getUrl("admin-adhoc-user-group-data-add");return $.ajax({url:i.replace("{groupId}",n.groupId).replace("{userId}",n.userId),type:"GET",dataType:"json"})},removeUserFromGroup:function(n,t){var i=this,r=i.serviceLocator.getUrl("admin-adhoc-user-group-data-remove");return $.ajax({url:r.replace("{groupId}",n).replace("{userId}",t),type:"DELETE",dataType:"json"})},getAdhocEntityInstances:function(n){var t=this,i=t.serviceLocator.getUrl("admin-adhoc-entity-instances");return $.ajax({url:i.replace("{entityId}",n),type:"GET",dataType:"json"})},getEntityValues:function(n,t){var i=this,r=i.serviceLocator.getUrl("admin-entity-values");return $.ajax({url:r.replace("{context}",n).replace("{entityId}",t),type:"GET",dataType:"json"})},saveAdhocEntity:function(n){var t=this;return $.ajax({url:t.serviceLocator.getUrl("admin-saveAdhocEntity"),data:n,type:"POST",dataType:"json"})},saveAdhocEntityInstance:function(n){var t=this;return $.ajax({url:t.serviceLocator.getUrl("admin-saveAdhocEntityInstance").replace("{entityId}",n.entityId).replace("{isNew}",n.isNew),data:n.instance,type:"POST",dataType:"json"})},getAllEntities:function(){var n=this;return $.ajax({url:n.serviceLocator.getUrl("admin-getAllEntities"),type:"GET",dataType:"json"})},getAllCategories:function(){var n=this;return $.ajax({url:n.serviceLocator.getUrl("admin-getAllCategories"),type:"GET",dataType:"json"})},getDomainList:function(){var n=this,t=n.serviceLocator.getUrl("domains");return $.read(t)},getEcmAllScheduledJobs:function(){var t=this,n={};return n.action="getEcmAllScheduledJobs",$.read(t.serviceLocator.getUrl("async-ecm-upload-baseService"),n)},retryECMPendingScheduledJob:function(n){var i=this,t={};return t.action="retryECMPendingScheduledJob",t.idJob=n,$.read(i.serviceLocator.getUrl("async-ecm-upload-baseService"),t)},getWorkPortalVersion:function(){var n=this;return $.ajax({url:n.serviceLocator.getUrl("WorkPortalVersion"),type:"GET",dataType:"json"}).always(function(n){return n=n||{},n.version==""&&(n.version=bizagi.loader.productBuild||""),n})},getAuthenticationLogData:function(n){var i=this,t="";return t=n.dataType=="domains"?"admin-getAuthenticationDomains":n.dataType=="events"?"admin-getAuthenticationEventsTypes":"admin-getAuthenticationEventSubTypes",$.ajax({url:i.serviceLocator.getUrl(t),data:{},type:"GET",dataType:"json"})},getAuthenticationLogResult:function(n){var i=this,t={};return t.action=n.action,t.domain=n.domain,t.userName=n.userName,t.dtFrom=n.dtFrom,t.dtTo=n.dtTo,t.eventSubType=n.eventSubType,t.eventType=n.eventType,t.pag=n.pag,t.pagSize=n.pagSize,$.ajax({url:i.serviceLocator.getUrl("admin-getAuthenticationLog"),data:t,type:"GET",dataType:"json"}).pipe(function(n){var f=n.rows.length,t=0,i=0;for(t;t<f;t++){var r=n.rows[t][i],u=new Date(r),e=bizagi.util.dateFormatter.formatDate(u,bizagi.localization.getResource("dateFormat"));n.rows[t][i]=u=="Invalid Date"?r:e}return n})},encryptString:function(n){var i=this,t={};return n=n||{},t.entry=n.entry,$.ajax({url:i.serviceLocator.getUrl("admin-EncryptString"),data:t,type:"POST",dataType:"json"})},userPendingRequests:function(n){var t=this,i={pag:n.pag,pagSize:n.pagSize};return $.read(t.serviceLocator.getUrl("admin-UserPendingRequests"),i)},userAuthenticationInfo:function(n){var t=this;return $.read(t.serviceLocator.getUrl("admin-UserAuthenticationInfo"),{idUser:n.idUser})},updateUserAuthenticationInfo:function(n){var t=this;return $.create(t.serviceLocator.getUrl("admin-updateUserAuthenticationInfo"),{idUser:n.idUser,password:n.password,enabled:n.enabled,expired:n.expired,locked:n.locked})},generateRandomPassword:function(n){var t=this;return n=n||{},n.action="generateRandomPassword",$.ajax({url:t.serviceLocator.getUrl("admin-generateRandomPassword"),data:n,type:"POST",dataType:"json"})},generateDataToSendByEmail:function(n){var i=this,t;return n=n||{},t={},t.action="GenerateDataToSendByEmail",t.idUser=n.idUser,t.password=n.password,$.ajax({url:i.serviceLocator.getUrl("admin-GenerateDataToSendByEmail"),data:n,type:"POST",dataType:"json"})},sendEmail:function(n){var i=this,t;return n=n||{},t={},t.action="sendEmail",t.emailTo=n.emailTo,t.subject=n.subject,t.body=n.body,$.ajax({url:i.serviceLocator.getUrl("admin-sendEmail"),data:n,type:"POST",dataType:"json"})},sendUserEmail:function(n){var i=this,t;return n=n||{},t={},t.action="SendUserEmail",t.emailTo=n.emailTo,t.subject=n.subject,t.body=n.body,$.ajax({url:i.serviceLocator.getUrl("admin-sendUserEmail"),data:n,type:"POST",dataType:"json"})},getApplicationCategoriesList:function(n){var r=this,t={},i="";return n.action=="Applications"?(i="admin-getApplicationList",$.ajax({url:r.serviceLocator.getUrl(i),type:"GET",dataType:"json"})):(i="admin-getCategoriesList",t.idApp=n.idApp,t.idCategory=n.idCategory,t.idCategory==""&&(t.idCategory=-1),typeof n.filterStartEvent!="undefined"&&(t.filterStartEvent=n.filterStartEvent),$.ajax({url:r.serviceLocator.getUrl(i),data:t,type:"GET",dataType:"json"}))},getAdminCasesList:function(n){var t=this,i=n||{};return $.ajax({cache:!0,url:t.serviceLocator.getUrl("admin-getCasesList"),data:i,type:"GET",dataType:"json"})},getApplicationProcesses:function(n){var i=this,r=i.serviceLocator.getUrl("admin-getApplicationProcesses"),t={};return t.idApp=n.idApp?n.idApp:-1,$.read(r,t)},getProcessVersion:function(n){var i=this,r=i.serviceLocator.getUrl("admin-getProcessVersion"),t={};return t.idWfClass=n.idWFClass,$.read(r,t)},getProcessTasks:function(n){var i=this,r=i.serviceLocator.getUrl("admin-getProcessTasks"),t={};return t.idWfClass=n.idWFClass,t.version=n.version?n.version:undefined,$.read(r,t)},getTaskAlarms:function(n){var i=this,r=i.serviceLocator.getUrl("admin-getTaskAlarms"),t={};return t.idTask=n.idTask,$.read(r,t)},getLapseMode:function(){var n=this,t=n.serviceLocator.getUrl("admin-getLapseMode");return $.read(t)},getRecurrMode:function(){var n=this,t=n.serviceLocator.getUrl("admin-getRecurrMode");return $.read(t)},getScheduleType:function(){var n=this,t=n.serviceLocator.getUrl("admin-getScheduleType");return $.read(t)},getBossList:function(){var n=this,t=n.serviceLocator.getUrl("admin-getBossList");return $.read(t)},addAlarm:function(n){var i=this,r=i.serviceLocator.getUrl("admin-addAlarm"),t={};return t.idTask=n.idTask,t.idRecurrMode=n.idRecurrMode,t.idLapseMode=n.idLapseMode,t.scheduleType=n.scheduleType,t.alarmTime=n.alarmTime,t.alarmRecurrTime=n.alarmRecurrTime,t.sendToCurrentAssignee=n.sendToCurrentAssignee,$.update(r,t)},editAlarm:function(n){var i=this,r=i.serviceLocator.getUrl("admin-editAlarm"),t={};return t.idTask=n.idTask,t.idAlarm=n.idAlarm,t.idRecurrMode=n.idRecurrMode,t.idLapseMode=n.idLapseMode,t.scheduleType=n.scheduleType,t.alarmTime=n.alarmTime,t.alarmRecurrTime=n.alarmRecurrTime,t.sendToCurrentAssignee=n.sendToCurrentAssignee,$.update(r,t)},deleteAlarm:function(n){var t=this,i=t.serviceLocator.getUrl("admin-deleteAlarm");return{}.idAlarm=n.idAlarm,$.destroy(i,n)},getAlarmRecipients:function(n){var i=this,r=i.serviceLocator.getUrl("admin-alarmRecipients"),t={};return t.idAlarm=n.idAlarm,$.read(r,t)},addRecipientToAlarm:function(n){var i=this,r=i.serviceLocator.getUrl("admin-recipientToAlarm"),t={};return t.idAlarm=n.idAlarm,t.idRecipient=n.idRecipient,$.update(r,t)},deleteRecipientsFromAlarm:function(n){var i=this,r=i.serviceLocator.getUrl("admin-deleteAlarmRecipients"),t={};return t.idRecipients=n.idRecipients,$.destroy(r,t)},enableAlarm:function(n){var i=this,r=i.serviceLocator.getUrl("admin-enableAlarm"),t={};return t.idTask=n.idTask,$.create(r,t)},abortReassignItems:function(n){var t=this,i=n||{},r=n.action=="abort"?"admin-abortItems":"admin-reassignItems";return $.ajax({url:t.serviceLocator.getUrl(r),data:i,type:"POST",dataType:"json"})},asyncActivitiesServices:function(n){var i=this,u=n,t="",r="GET";return n.action=="getActivities"?t=i.serviceLocator.getUrl("admin-async-activities-get-activities"):n.action=="retryNow"?(r="POST",t=i.serviceLocator.getUrl("admin-async-activities-get-retry-now"),t=t.replace("{idCase}",n.idCase),t=t.replace("{idworkItem}",n.idWorkitem),t=t.replace("{idAsynchWorkitem}",n.idAsynchWorkitem)):n.action=="getActivitiesByTask"?t=i.serviceLocator.getUrl("admin-async-activities-get-activities-by-task"):n.action=="enableExecution"?(r="POST",t=i.serviceLocator.getUrl("admin-async-activities-enable-execution")):n.action=="enableMultiple"?(t=i.serviceLocator.getUrl("admin-async-activities-enable-multiple"),r="POST"):n.action=="asyncExecution"?t=i.serviceLocator.getUrl("admin-async-activities-async-execution"):n.action=="asyncExecutionLog"?(t=i.serviceLocator.getUrl("admin-async-activities-async-execution-log"),t=t.replace("{idCase}",n.idCase),t=t.replace("{idworkItem}",n.idWorkItem),t=n.idCase==-1?t.replace("{idAsynchWorkitem}",n.idAsynchWorkitem):t.replace("{idAsynchWorkitem}","-1")):n.action=="getAsyncExecution"&&(t=i.serviceLocator.getUrl("admin-async-activities-async-get-current-execution-log")),$.ajax({url:t,data:u,type:r,dataType:"json"})},getDefaultAssignationUserToAllProcess:function(){var n=this;return $.read(n.serviceLocator.getUrl("admin-getDefaultAssignationUserToAllProcess"),{serviceAction:"getDefaultAssignationUserToAllProcess"})},getDefaultAssignationUserToProcess:function(n){var i=this,t;return t=n.idWFClass==""?-1:n.idWfClass,$.read(i.serviceLocator.getUrl("admin-getDefaultAssignationUserToProcess"),{serviceAction:"getDefaultAssignationUserToProcess",process:t})},setDefaultAssignationUserToProcess:function(n){var t=this;return process=n.idWFClass==""?-1:n.idWfClass,$.create(t.serviceLocator.getUrl("admin-setDefaultAssignationUserToProcess"),{serviceAction:"setDefaultAssignationUserToProcess",process:process,idUser:n.idUser})},getProfilesTypes:function(){var n=this;return $.read(n.serviceLocator.getUrl("admin-getProfilesTypes"))},searchProfiles:function(n){var i=this,r=i.serviceLocator.getUrl("admin-searchProfiles"),t={};return t.type=n.profileType,t.name=n.profileName,t.orgId=n.orgId?n.orgId:null,$.read(r,t)},getUsersByProfile:function(n){var i=this,r=i.serviceLocator.getUrl("admin-getUsersByProfile"),t={};return t.type=n.profileType,t.id=n.idProfile,$.read(r,t)},removeUserFromProfile:function(n){var i=this,r=i.serviceLocator.getUrl("admin-removeUserFromProfile"),t={};return t.type=n.profileType,t.id=n.idProfile,t.idUser=n.idUser,$.destroy(r,t)},addUserToProfile:function(n){var i=this,r=i.serviceLocator.getUrl("admin-addUserToProfile"),t={};return t.type=n.profileType,t.id=n.idProfile,t.idUser=n.idUser,$.update(r,t)},licenses:function(){var n=this,t=n.serviceLocator.getUrl("admin-Licenses");return $.read(t)},getDimensions:function(){var n=this,t=n.serviceLocator.getUrl("admin-GetDimensions");return $.read(t)},editDimension:function(n){var r=this,t,i;return n=n||{},t={},t.id=n.id,t.displayName=n.displayName,t.name=n.name,t.idWfClass=n.idWfClass,t.entityPath=n.entityPath,t.description=n.description,i=r.serviceLocator.getUrl("admin-EditDimension"),$.create(i,t)},createAdministrableDimension:function(n){var i=this,t;return n=n||{},t={},t.displayName=n.displayName,t.name=n.name,t.idWfClass=n.idWfClass,t.entityPath=n.entityPath,t.Description=n.description,$.ajax({url:i.serviceLocator.getUrl("admin-CreateAdministrableDimension"),data:n,type:"PUT",dataType:"json"})},deleteDimension:function(n){var i=this,r=i.serviceLocator.getUrl("admin-DeleteDimension"),t;return n=n||{},t={},t.id=n.id,t.idDimension=n.id,t.administrable=n.administrable,$.destroy(r,t)},entityPathChildNodesAction:function(n){var i=this,t;return n=n||{},t={},t.pathNodeType=n.nodeType,t.idNode=n.idNode,t.nodeDisplayPath=n.nodeDisplayPath,t.nodePath=n.nodePath,t.idWfClass=n.idWfClass,$.ajax({url:i.serviceLocator.getUrl("admin-EntityPathChildNodesAction"),data:n,type:"GET",dataType:"json"})},getActiveWFClasses:function(n){var t=this,i=n||{};return $.ajax({cache:!0,url:t.serviceLocator.getUrl("admin-GetActiveWFClasses"),data:i,type:"GET",dataType:"json"})},storeDocumentTemplates:function(){var n=this,t=n.serviceLocator.getUrl("admin-document-templates-storeDocumentTemplates");return $.read(t)},restoreDocumentTemplates:function(n){var i=this,t=i.serviceLocator.getUrl("admin-document-templates-restoreDocumentTemplates");return t+="?Guid="+n.Guid,$.read(t)},getWorkFlowClasses:function(){var n=this,t=n.serviceLocator.getUrl("admin-processes-workflowClasses");return $.read(t)},getTaskByWorkFlow:function(n){var i=this,r=i.serviceLocator.getUrl("admin-processes-tasksByWorkflow"),t={};return t.idWorkflow=n.idWorkflow,$.read(r,t)},modifyProcessDuration:function(n){var i=this,r=i.serviceLocator.getUrl("admin-processes-modifyProcessDuration"),t={};return t.idWorkflow=n.idWorkflow,t.duration=n.duration,$.create(r,t)},modifyTaskDuration:function(n){var i=this,r=i.serviceLocator.getUrl("admin-processes-modifyTaskDuration"),t={};return t.idTask=n.idTask,t.duration=n.duration,$.create(r,t)},processesHierarchy:function(){var t=this,n={};return n.removeOnlineItems="true",$.ajax({url:t.serviceLocator.getUrl("offline-getProcessTree"),data:n,dataType:"json",type:"GET"})},syncOfflineCases:function(n){var t=this;return $.ajax({url:t.serviceLocator.getUrl("offline-sendForm"),data:{idCase:n.idCase,idWFClass:n.idWfClass,awCaseCreationContext:JSON.stringify(n.objToSend),idWorkflow:n.idWfClass},type:"POST",dataType:"json",serviceType:"LOAD"})},processesHierarchyTofetchForms:function(n){var i=this,t={};return t.idChangeSet=n.changeSet,$.ajax({url:i.serviceLocator.getUrl("offline-getForms"),data:t,dataType:"json"})},getDataForMyTeam:function(){var n=this;return $.ajax({url:n.serviceLocator.getUrl("bam-resourcemonitor-myteam"),type:"GET",dataType:"json"})},getReporstAnalysisQuery:function(){var n=this;return $.read(n.serviceLocator.getUrl("reports-analysisquery"))},updateReportData:function(n){var t=this;return $.update(t.serviceLocator.getUrl("reports-analysisquery-update"),n)},deleteReportData:function(n){var t=this;return $.destroy(t.serviceLocator.getUrl("reports-analysisquery-delete")+"?"+n)},getAdminEntitiesList:function(){var n=this,t=n.serviceLocator.getUrl("admin-entities-list");return $.read(t,{})},getAdminStakeholdersList:function(){var n=this,t=n.serviceLocator.getUrl("admin-stakeholders-list");return $.read(t,{})},getAdminEntitiesRowData:function(n){var i=this,r=i.serviceLocator.getUrl("admin-entities-row-data"),t={guidEntity:n.guidEntity,pag:n.pag||1,pagSize:n.pagSize||10};return typeof n.orderField!="undefined"&&(t.orderField=n.orderField),typeof n.orderType!="undefined"&&(t.orderType=n.orderType),typeof n.filters!="undefined"&&$.isArray(n.filters)&&n.filters.length>0&&(t.filters=JSON.stringify(n.filters)),$.read(r,t)},getUserStakeholders:function(n){var t=this,i=t.serviceLocator.getUrl("admin-user-stakeholders"),r={idUser:n.idUser};return $.read(i,r)},getAdminEntityData:function(n){var i=this,r=i.serviceLocator.getUrl("admin-entity-simpleData"),t={};return t.idEntity=n.idEntity,$.read(r,t)},getAdminEntityMigrated:function(n){var i=this,r=i.serviceLocator.getUrl("admin-entities-migrated-entity"),t={};return t.guidEntity=n,$.read(r,t)},getAdminEntitiesForm:function(n){var i=this,r=i.serviceLocator.getUrl("admin-entities-get-form"),t={h_action:"LOADENTITYFORM",h_contexttype:"entity"};return typeof n.guid!="undefined"&&(t.h_guidEntity=n.guid),typeof n.guidForm!="undefined"&&(t.h_guidForm=n.guidForm),typeof n.idRow!="undefined"&&(t.h_surrogateKey=n.idRow),typeof n.idPageCache!="undefined"&&(t.h_pageCacheId=n.idPageCache,t.h_isRefresh=!0),typeof n.isStakeholder!="undefined"&&n.isStakeholder&&(t.h_showDisabled=!1,t.h_showAssociateUser=!0),$.ajax({url:r,data:t,type:"POST",dataType:"json"})},getBizagiObjects:function(){var n=this,t=n.serviceLocator.getUrl("admin-language-bizagi-objects");return $.read(t,{})},getEntitiesList:function(){var n=this,t=n.serviceLocator.getUrl("admin-language-entities");return $.read(t,{})},getStoreLanguageTemplates:function(){var n=this,t=n.serviceLocator.getUrl("admin-language-languages");return $.read(t,{})},setLanguages:function(n){var t=this,i=t.serviceLocator.getUrl("admin-language-languages"),r=n;return $.ajax({url:i,data:{languages:r},type:"POST",dataType:"json"})},resetPersonalization:function(){var n=this;return $.ajax({url:n.serviceLocator.getUrl("admin-language-reset"),data:{},type:"DELETE",dataType:"json"})},getLanguageTemplate:function(n){var r=this,t,i="",u,f;n.elements?(t="admin-language-resource-download",i="&elements="+n.elements):n.entities?(t="admin-language-entities-download",i="&entities="+n.entities):t="admin-language-resource-download";u=r.device==="tablet_android"?"_system":"_self";f=encodeURI(r.serviceLocator.getUrl(t)+"?cultureName="+n.cultureName+i);window.open(f,u,"location=yes")},getHolidaysSchemas:function(n){var t=this;return $.read(t.serviceLocator.getUrl("admin-holidays-schemas"),n)},getHolidaysBySchema:function(n){var t=this;return $.read(t.serviceLocator.getUrl("admin-holidays-schema"),n).pipe(function(n){n=n||{};var t=function(n){n=n||"";var t=n.split("T");return t[0]+"T00:00:00"};return $.each(n,function(i,r){n[i].date=t(r.date)}),n})},saveHolidaysBySchema:function(n){var t=this,i=t.serviceLocator.getUrl("admin-holidays-schema").replace("{schema}",n.schema);$.ajax({method:"POST",url:i,data:n.data,contentType:"application/json"})},getProjectName:function(){var n=this,t=n.serviceLocator.getUrl("admin-projectname");return $.read(t)},setProjectName:function(n){var t=this,i=t.serviceLocator.getUrl("admin-projectname"),r={projectName:n};return $.create(i,r)},getAuditLicense:function(){var t=this,n=$.Deferred(),i=t.serviceLocator.getUrl("admin-audit-license");return n.resolve("OK"),document.location=i,n.promise()},processDefinition:function(n){var t=this;return $.read(t.serviceLocator.getUrl("processviewer-processdefinition"),n)},graphicInfo:function(n){var t=this;return $.read(t.serviceLocator.getUrl("processviewer-processgraphicinfo"),n)},getQueryFormResponse:function(n){var t=this;return $.create(t.serviceLocator.getUrl("query-handler-getQueryFormResponse"),n)},getQueryFormExportExcel:function(n){var e=this,r=$.Deferred(),u="",f="_self",t,i;return bizagi.util.isIE()&&(f="iframeExcel"),t=$("<form>",{action:e.serviceLocator.getUrl("query-handler-getQueryFormExportExcel"),target:f,id:"formExportExcel",method:"POST",style:"display:none"}),$(t).attr("enctype","application/x-www-form-urlencoded"),$(t).attr("accept-charset","UTF-8"),i=$("<iframe>",{name:"iframeExcel",id:"iframeExcel",style:"display:none"}),$.each(n,function(n,i){u=$("<input>",{name:n,value:i,type:"hidden"});$(t).append(u)}),$("body").append(t),$("body").append(i),t.submit().remove(),i.submit().remove(),r.resolve("OK"),r.promise()},getQueryForm:function(n){var t=this;return n=n||{},$.ajax({url:t.serviceLocator.getUrl("query-handler-getQueryForm"),data:n,type:"POST",dataType:n.dataType||"json"})},getPreferencesForm:function(n){var t=this;return $.ajax({url:t.serviceLocator.getUrl("preferences-handler-getPreferencesForm"),data:n,type:"POST",dataType:"json"})},saveStoredQueryForm:function(n){var t=this;return $.ajax({url:t.serviceLocator.getUrl("query-handler-storedQueryForm"),data:n,type:"POST",dataType:"json"})},updateStoredQueryForm:function(n){var t=this;return $.ajax({url:t.serviceLocator.getUrl("query-handler-storedQueryForm"),data:n,type:"PUT",dataType:"json"})},deleteStoredQueryForm:function(n){var t=this,i=t.serviceLocator.getUrl("query-handler-storedQueryForm-id");return $.destroy(i,n)},getStoredQueryFormList:function(n){var t=this;return $.ajax({url:t.serviceLocator.getUrl("query-handler-storedQueryForm"),data:n,type:"GET",dataType:"json"})},getStoredQueryFormResponse:function(n){var i=this,r=i.serviceLocator.getUrl("query-handler-storedQueryForm-id"),t={};return t.idStoredQueryForm=n,$.read(r,t)},getGraphicQueryInfo:function(n){var t=this;return $.read("Rest/Cases/Workitems",n)},getCasePath:function(n){var t=this;return $.read("Rest/Cases/TransitionLog",n)},getUsersForm:function(n){var t=this;return $.create(t.serviceLocator.getUrl("admin-usersform"),n)},getLastUpdateByMobile:function(){var n=this;return $.read({url:n.serviceLocator.getUrl("mobile-getLastUpdate")})},getUsersAdministrationLog:function(n){var t=this;return $.read({url:t.serviceLocator.getUrl("admin-userslog"),data:n})},queryUsersLicenses:function(){var n=this;return $.read({url:n.serviceLocator.getUrl("admin-userslicenses")})},createUserAdministrationForm:function(){var n=this;return $.get(n.serviceLocator.getUrl("admin-createuserform"))},getPreferenceFormParams:function(){var n=this;return $.read(n.serviceLocator.getUrl("admin-userpreferenceform-isnew"))},getUserPositions:function(){var n=this;return $.read(n.serviceLocator.getUrl("admin-userGetPositions"))},getAssignationQueues:function(){var n=this;return $.read(n.serviceLocator.getUrl("admin-assignation-queues"))},getSegmentationQueues:function(){var n=this;return $.read(n.serviceLocator.getUrl("admin-assignation-queues-segmentation"))},getQueueSuscribers:function(){var n=this;return $.read(n.serviceLocator.getUrl("admin-assignation-queues-suscribers"))},unsuscribeQueueUser:function(n){var t=this;return $.destroy(t.serviceLocator.getUrl("admin-assignation-queues-unsuscribe"),{userId:n,segmentation:"x"})},getUserInfoByTask:function(n,t){var i=this,r={idCase:n,guidTask:t};return $.read(i.serviceLocator.getUrl("graphicquery-trailusers"),r)},getSearchLists:function(){var n=this;return $.read(n.serviceLocator.getUrl("my-search-getSearchLists"),{})},defineFilterObject:function(n,t,i){function s(n){var i=n.properties,r=i.typeSearch,t=n.value,e,s,u,o;if(i.type=="boolean"&&(t.toLowerCase()==="null"?(t=null,r="Nullable"):(t=bizagi.util.parseBoolean(t),r="exact")),(i.type=="number"||i.type=="money"||i.type=="date")&&(r="exact"),typeof n.value=="object"){if(t=[],Array.isArray(n.value))for(e=0,s=n.value.length;e<s;e++)u=parseInt(n.value[e].id),isNaN(u)||t.push(u);else u=parseInt(n.value.id),isNaN(u)||t.push(u);r="exact";t=t.length>0?t:undefined}return i.rangeQuery&&i.rangeQuery!=="none"&&(t={min:n.value,max:n.value},r="range"),r=r||"approx",o={xpath:f,searchType:r},i.type==="hidden"&&(o.isHidden=!0),typeof t!="undefined"&&(o.value=t),o}var u=n.properties,f=u.xpath.split("@")[0],r=t.find(function(n){return n.xpath==f}),e,o;r?(u.rangeQuery=="from"?(r.value=r.value||{},r.searchType="range",r.value.min=n.value):u.rangeQuery=="to"?(r.value=r.value||{},r.searchType="range",r.value.max=n.value):(n.properties.typeSearch=r.searchType,e=s(n),$.extend(r,e)),u.orderType&&(r.orderType=u.orderType),i&&i(bizagi.clone(r))):(o=u.defaultFilter||!1,r=s(n),u.orderType&&(r.orderType=u.orderType),(typeof r.value!="undefined"||r.orderType||o)&&(t.push(r),i&&i(bizagi.clone(r))))},serializeEntityData:function(n){function o(n,t){var r={data:{},guid:t.guidEntity,timestamp:n.timestamp},u=n.columns,e=t.row,i,f;for(name in t)t.hasOwnProperty(name)&&name.toString()!=="row"&&name.toString()!=="id"&&(r[name]=t[name]);for(i=0,f=u.length;i<f;i+=1)r.data[u[i]]=e[i];return r}var t=n,u,i,f,r,e;for(t.entities=[],u=-1;i=n.rows[++u];)for(f=-1;r=n.cells[++f];)if(r.id===i.id){e=o(r,i);t.entities.push(e);break}return t},getOAuth2Applications:function(){var n=this;return $.ajax({url:n.serviceLocator.getUrl("oauth2-getApplications"),type:"GET",dataType:"json"})},getOAuth2Application:function(n){var t=this,i=t.serviceLocator.getUrl("oauth2-getApplication");return $.ajax({url:i.replace("{applicationId}",n),type:"GET",dataType:"json"})},createOAuth2Application:function(n){var t=this;return $.ajax({url:t.serviceLocator.getUrl("oauth2-createApplication"),type:"POST",dataType:"json",data:n})},deleteOAuth2Application:function(n){var t=this,i=t.serviceLocator.getUrl("oauth2-deleteApplication");return $.ajax({url:i.replace("{applicationId}",n),type:"DELETE",dataType:"json"})},updateOAuth2Application:function(n,t){var i=this,r=i.serviceLocator.getUrl("oauth2-updateApplication");return $.ajax({url:r.replace("{applicationId}",t),data:n,type:"PUT",dataType:"json"})},updateClientSecretKeysOAuth2Application:function(n,t){var i=this,r=i.serviceLocator.getUrl("oauth2-updateClientSecretKeysApplication");return $.ajax({url:r.replace("{applicationId}",t),data:n,type:"PUT",dataType:"json"})}});
$.Class.extend("bizagi.workportal.services.routing",{},{init:function(n){var t=this;n=n||{};t.params=n.params||{};t.dataService=n.dataService||{};t.modules={projectDashboard:bizagi.util.isMobileDevice()?"activityform":"projectDashboard",oldRender:"oldrenderintegration",async:"async",activitySelector:"routing"};t.renderVersion=2;t.resetRouteInformation()},resetRouteInformation:function(){var n=this;n.route={module:"",moduleParams:{}}},setRenderParams:function(n){var t=this;t.params=t.getRenderParams(n)},getRenderParams:function(n){var r=this,t={idCase:parseInt(n.idCase||0),guid:n.guid,idWorkflow:parseInt(n.idWorkflow||0),idWorkitem:n.isOfflineForm==!0?0:parseInt(n.idWorkItem||0),idTask:parseInt(n.idTask||0),eventAsTasks:n.eventAsTasks||!1,onlyUserWorkItems:n.onlyUserWorkItems||"true",formsRenderVersion:n.formsRenderVersion||0,referrer:n.referrer||"",isComplex:n.isComplex!==undefined?!0:!1,formsRenderVersion:2,onClose:n.onClose||"",isOfflineForm:n.isOfflineForm||!1,caseLink:n.caseLink},i;typeof t.guid!="undefined"&&t.idCase==0&&delete t.idCase;i=!0;try{i=BIZAGI_SETTINGS.skipSubprocessGlobalForm||!0}catch(u){}return r.skipSubprocessGlobalForm=i=="true",t},getRoute:function(n){var t=this,i=new $.Deferred,r,u;return t.params=n?n:t.params,n.data&&n.data.hasStartForm?i.resolve({module:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_START_FORM,moduleParams:{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_START_FORM,data:n.data}}):(r=n.fromTask||n.idTask||"",u=n.fromWorkItemId||n.idWorkItem||"",$.when(t.getRenderVersion(t.params)).done(function(n){t.renderVersion=n;t.route.moduleParams=t.getRenderParams(t.params);var f={};f=typeof t.params.guid!="undefined"?{guid:t.params.guid,onlyUserWorkItems:t.params.onlyUserWorkItems,isOfflineForm:t.params.isOfflineForm,fromTask:r,fromWorkItemId:u}:{idCase:t.params.idCase,onlyUserWorkItems:t.params.onlyUserWorkItems,isOfflineForm:t.params.isOfflineForm,fromTask:r,fromWorkItemId:u};$.when(t.dataService.getWorkitems(f)).done(function(r){var e,u,f;if(t.route.moduleParams.hasWorkItems=r.workItems.length?!0:!1,t.route.moduleParams.hasGlobalForm=bizagi.util.parseBoolean(r.hasGlobalForm),t.route.moduleParams.idWorkitem>0)t.setRenderModuleName(t.getRenderModuleName(n)),t.route.moduleParams.idTask==0&&(t.route.moduleParams.idTask=t.searchIdTask(t.route.moduleParams.idWorkitem)),t.route.moduleParams.radNumber=r.radNumber||"",t.route.moduleParams.idWorkflow=r.idWorkFlow||"",i.resolve(t.route),t.resetRouteInformation();else if(e=t.checkAsyncWorkItems(r),r.workItems.length==0)t.route.moduleParams.idWorkflow=r.idWorkFlow||"",t.route.moduleParams.radNumber=r.radNumber||"",$.trim(r.msgTask)!==""?i.resolve(t.routeToMessageForm(r.msgTask)):bizagi.util.parseBoolean(r.hasGlobalForm)?i.resolve(t.routeToGlobalForm(r)):i.resolve(t.routeToGlobalFormWithoutData());else if(r.workItems.length==1||e.length>0){if(u=0,e.length>0)for(f=0;f<r.workItems.length;f++)if(r.workItems[f].isAsynch=="true"){u=f;break}typeof(t.route.moduleParams.guid!="undefined")&&typeof r.workItems[u].guid!="undefined"?t.route.moduleParams.guid=r.workItems[u].guid:typeof(t.route.moduleParams.idCase!="undefined")&&(t.route.moduleParams.idCase=r.workItems[u].idCase);t.route.moduleParams.idTask=r.workItems[u].idTask;t.route.moduleParams.fromTask=r.workItems[u].idTask;t.route.moduleParams.idWorkitem=r.workItems[u].idWorkItem;t.route.moduleParams.idWorkflow=r.workItems[u].idWorkFlow;t.route.moduleParams.displayName=r.workItems[u].displayName?r.workItems[u].displayName:"";t.route.moduleParams.radNumber=r.radNumber||"";e.length>0?t.setRenderModuleName(t.modules.async):t.setRenderModuleName(t.getRenderModuleName(n));i.resolve(t.route);t.resetRouteInformation()}else r.checkProcess=r.subProcesses.length>0&&t.skipSubprocessGlobalForm?!0:!1,r.checkWorkItems=r.workItems.length>1?!0:!1,r.fromSearchWidget=t.params.referrer=="search"?!0:!1,t.setRenderModuleName(t.modules.activitySelector),t.route.moduleParams.data=r,i.resolve(t.route),t.resetRouteInformation()}).fail(function(){var n=bizagi.localization.getResource("workportal-menu-search-found-no-cases");i.resolve(t.routeToMessageForm(n))})})),i.promise()},setRenderModuleName:function(n){var t=this;t.route.module=n;t.route.moduleParams.widgetName=n},getRenderModuleName:function(n){var t=this;return n==1?t.modules.oldRender:t.modules.projectDashboard},searchIdTask:function(n,t){var r=0,i;for(n=n||[],i=0;i<n.length;i++)if(parseInt(n[i].idWorkItem)==parseInt(t)){r=parseInt(n[i].idTask);break}return r},checkAsyncWorkItems:function(n){var t=[];return $.each(n.workItems,function(i){n.workItems[i].isAsynch=="true"&&t.push({idCase:n.idCase,idWorkitem:n.workItems[i].idWorkItem,idTask:n.workItems[i].idTask})}),t},routeToGlobalForm:function(n){var t=this;if(t.route.moduleParams.idCaseForGraphicQuery=t.route.moduleParams.idCase,t.route.moduleParams.idCase=$.isNumeric(n.idCaseForGlobalForm)&&n.idCaseForGlobalForm>0?n.idCaseForGlobalForm:t.route.moduleParams.idCase,t.route.moduleParams.idWorkflow=parseInt(n.idWorkFlow||0),t.renderVersion==1){var i=t.dataService.serviceLocator.getUrl("old-render")+"?PostBack=1&idCase=%s&idWorkitem=%s&idTask=%s",r=t.route.moduleParams.idCase||"",u=t.route.moduleParams.idWorkitem||"",f=t.route.moduleParams.idTask||"",e=printf(i,r,u,f);t.route.moduleParams.onlyUserWorkItems=t.route.moduleParams.idCase||"";t.setRenderModuleName(t.modules.oldRender);t.route.moduleParams.url=e}else t.setRenderModuleName(t.modules.projectDashboard);return t.route},routeToGlobalFormWithoutData:function(){var n=this;return n.setRenderModuleName(n.modules.projectDashboard),n.route.moduleParams.withOutGlobalForm=!0,n.route},routeToMessageForm:function(n){var t=this;return n=n||"",t.setRenderModuleName(t.modules.projectDashboard),t.route.moduleParams.withOutGlobalForm=!0,t.route.moduleParams.messageForm=n,t.route},getRenderVersion:function(n){var r=this,i=new $.Deferred,t=n.formsRenderVersion||0;return t!=0?i.resolve(t):$.when(r.dataService.getCaseFormsRenderVersion({idCase:n.idCase,guid:n.guid})).done(function(n){t=parseInt(n.formsRenderVersion);i.resolve(t)}),i.promise()}});
bizagi.workportal.services.routing.extend("bizagi.workportal.services.routing",{},{init:function(n){this._super(n)},getRoute:function(n){var t=this,r=new $.Deferred,i;return t.params=n?n:t.params,typeof n.offlineAction!="undefined"&&n.offlineAction=="next"?(i=new $.Deferred,i.resolve(t.routeToGlobalFormWithoutData()),i.promise()):t._super(n)}});
bizagi.workportal.services.loadtemplates=function(){var n=this;return n.tmpl={},n.loadTemplates=function(t){var r=n.templatesDeferred=new $.Deferred,u=[],f=t.useNewEngine!=undefined?t.useNewEngine:!0;for(var i in t)i!="useNewEngine"&&u.push(n.loadTemplate({name:i,path:t[i],useNewEngine:f}));return $.when.apply($,u).done(function(){r.resolve()}),r.promise()},n.loadTemplate=function(t){return n.tmpl[t.name]?n.tmpl[t.name]:t.useNewEngine?bizagi.templateService.getTemplateWidget(t.path).done(function(i){n.tmpl[t.name]=i}):bizagi.templateService.getTemplate(t.path).done(function(i){n.tmpl[t.name]=i})},n.getTemplate=function(t){return n.tmpl.hasOwnProperty(t)?n.tmpl[t]:null},{loadTemplates:n.loadTemplates,getTemplate:n.getTemplate}};bizagi.injector.register("loadTemplatesService",[bizagi.workportal.services.loadtemplates]);
bizagi.workportal.services.globalhandlers=function(n){var t=this;return t.publish=function(n,t){$(document).triggerHandler(n,t)},t.showDialogWidget=function(t){return n.renderWidget(t),n},{publish:t.publish,showDialogWidget:t.showDialogWidget}};bizagi.injector.register("globalHandlersService",["dialogWidgets",bizagi.workportal.services.globalhandlers]);
bizagi.workportal.services.behaviors=bizagi.workportal.services.behaviors||{};bizagi.workportal.services.behaviors.collapsiblepanels=function(){var n=this;return n.addClassesCollapseSideBar=function(t,i,r){var u=$(window).width();u>1366?r?$("#ui-bizagi-wp-project-homeportal-main",n.content).removeClass("ui-bizagi-wp-project-collapse"+i):$("#ui-bizagi-wp-project-homeportal-main",n.content).toggleClass("ui-bizagi-wp-project-collapse"+i,function(){$(this).hasClass("ui-bizagi-wp-project-collapse"+i)?($("#ui-bizagi-wp-project-homeportal-main",n.content).removeClass("ui-bizagi-wp-project-open"+i),$(".ui-bizagi-wp-project-dashboard-breadcrumb-container",n.content).css("margin-bottom","1px")):($("#ui-bizagi-wp-project-homeportal-main",n.content).addClass("ui-bizagi-wp-project-open"+i),$(".ui-bizagi-wp-project-dashboard-breadcrumb-container",n.content).css("margin-bottom",""))}):r?$("#ui-bizagi-wp-project-homeportal-main",n.content).addClass("ui-bizagi-wp-project-open"+i):$("#ui-bizagi-wp-project-homeportal-main",n.content).toggleClass("ui-bizagi-wp-project-open"+i,function(){$(this).hasClass("ui-bizagi-wp-project-open"+i)?$("#ui-bizagi-wp-project-homeportal-main",n.content).removeClass("ui-bizagi-wp-project-collapse"+i):$("#ui-bizagi-wp-project-homeportal-main",n.content).addClass("ui-bizagi-wp-project-collapse"+i)});n.calculateBarsDays(t)},n.calculateBarsDays=function(n){var t=$(".ui-bizagi-wp-project-plan-progress .remaining-days .time-remaining",n),i=$(".ui-bizagi-wp-project-plan-progress .remaining-days .days",n).width();t.css("padding-left",(i+7).toString()+"px");t=$(".ui-bizagi-wp-project-plan-time .remaining-days .time-remaining",n);i=$(".ui-bizagi-wp-project-plan-time .remaining-days .days",n).width();t.css("padding-left",(i+7).toString()+"px")},n.enableSideBar=function(){var n=this;$("#ui-bizagi-wp-project-homeportal-main",n.content).removeClass("ui-bizagi-wp-project-collapse-right");$("#ui-bizagi-wp-project-homeportal-main",n.content).addClass("ui-bizagi-wp-project-open-right");$("#ui-bizagi-wp-project-dashboard-sidebar-right").show()},n.disableSideBar=function(){var n=this;$("#ui-bizagi-wp-project-homeportal-main",n.content).addClass("ui-bizagi-wp-project-collapse-right");$("#ui-bizagi-wp-project-homeportal-main",n.content).removeClass("ui-bizagi-wp-project-open-right");$("#ui-bizagi-wp-project-dashboard-sidebar-right").hide()},{addClassesCollapseSideBar:n.addClassesCollapseSideBar,enableSideBar:n.enableSideBar,disableSideBar:n.disableSideBar}};bizagi.injector.register("behaviorCollapsiblePanels",[bizagi.workportal.services.behaviors.collapsiblepanels]);
bizagi.workportal.services.behaviors=bizagi.workportal.services.behaviors||{};bizagi.workportal.services.behaviors.projectDashboard=function(n){var t=this;return t.dataService=n,t.TYPE_WORKITEM_ACTIVITY="ACTIVITY",t.TYPE_WORKITEM_TASK="TASK",t.NOTIFICATION_NAVIGATOR_BACK="NAVIGATOR_BACK",t.CONTEXT_HOME="HOME",t.CONTEXT_ACTIVITY="ACTIVITY",t.CONTEXT_OVERVIEW="OVERVIEW",t.CONTEXT_PLANACTIVITIES="PLANACTIVITIES",t.CONTEXT_PLANCREATE="PLANCREATE",t.CONTEXT_ACTIVITYPLAN="ACTIVITYPLAN",t.CONTEXT_ACTIVITYPLANCREATE="ACTIVITYPLANCREATE",t.CONTEXT_ACTIVITYPLANOVERVIEW="ACTIVITYPLANOVERVIEW",t.dataDashboard={},t.dataDashboard.params={},t.pendingContext="HOME",t.init=function(){},t.getRadNumber=function(n,i,r){var u=$.Deferred();return r?u.resolve(n.radNumber||n.idCase):$.when(t.getFirstParentPlan(i.idPlan)).done(function(n){n?u.resolve(n.id):u.resolve(i.idPlan)}),u.promise()},t.getRadNumberForPlanDashboard=function(n,t){var r=this,i=$.Deferred();return t?$.when(r.getFirstParentCase(n)).done(function(t){t===null?$.when(r.getFirstParentPlan(n)).done(function(n){i.resolve(n.id)}):i.resolve(t.radNumber)}):$.when(r.getFirstParentPlan(n)).done(function(n){i.resolve(n.id)}),i.promise()},t.getContextToShow=function(n){var i=$.Deferred();return n.idCase?$.when(t.callDataServicesForBehaviorDashboard(n)).done(function(){t.dataDashboard.params.menuDashboard=t.dataDashboard.menuDashboard;i.resolve(t.dataDashboard)}):$.when(t.getServerDateDifference()).then(function(){var n=bizagi.services.projectDashboardContext||t.CONTEXT_HOME;bizagi.services.projectDashboardContext="";i.resolve({contextToShow:n,params:{differenceMillisecondsServer:t.dataDashboard.params.differenceMillisecondsServer}})}),i.promise()},t.getTypeWorkItem=function(n){return n.idPlan?t.TYPE_WORKITEM_ACTIVITY:t.TYPE_WORKITEM_TASK},t.getIsCurrentUserAssignedToWorkitem=function(n,t,i){var r=[];return n.length>0?(r=n.filter(function(n){return n.idWorkItem==t}),r.length>0?i?$.extend(r[0],i):r[0]:!1):null},t.getContextActionWhenClickButtonPlan=function(n,i){return n===t.TYPE_WORKITEM_TASK?i?t.CONTEXT_PLANACTIVITIES:t.CONTEXT_PLANCREATE:n===t.TYPE_WORKITEM_ACTIVITY?i?t.CONTEXT_PLANACTIVITIES:t.CONTEXT_ACTIVITYPLANCREATE:void 0},t.getIsVisibleButtonOverview=function(n,i){var r=!1;return n===t.TYPE_WORKITEM_TASK?r=bizagi.util.parseBoolean(i.showForm):n===t.TYPE_WORKITEM_ACTIVITY&&(r=!0),r},t.getIsVisibleButtonForm=function(n,i,r){return n===t.TYPE_WORKITEM_TASK?i?r:!1:n===t.TYPE_WORKITEM_ACTIVITY?i:void 0},t.callDataServicesForBehaviorDashboard=function(n){var u=$.Deferred();t.dataDashboard.menuDashboard={};var i=!1,r=!1,f=t.getCaseSummaryDetails(n),e=t.getServerDateDifference();return $.when(f,e).then(function(f){var e,o,s;f.hasGlobalForm=n.hasGlobalForm;e=t.getTypeWorkItem(f);t.dataDashboard.responseGetCaseSummaryDetails=f;o=t.getIsCurrentUserAssignedToWorkitem(f.currentState,n.idWorkitem);o&&(i=!0,r=!0);t.dataDashboard.params.belongCurrentUser=i;t.dataDashboard.menuDashboard.showFormOverview=t.getIsVisibleButtonOverview(e,f);t.dataDashboard.menuDashboard.showCommentsOptionMenu=t.getPropertiesByDataServices(e,i,r,!1,bizagi.menuSecurity).isVisibleButtonComments;t.dataDashboard.menuDashboard.showFilesOptionMenu=t.getPropertiesByDataServices(e,i,r,!1,bizagi.menuSecurity).isVisibleButtonFiles;t.dataDashboard.menuDashboard.showTimeLineOptionMenu=t.getPropertiesByDataServices(e,i,r,!1,bizagi.menuSecurity).isVisibleButtonTimeLine;t.dataDashboard.menuDashboard.showPlanOptionMenu=t.getPropertiesByDataServices(e,i,r,!1,bizagi.menuSecurity).isVisibleButtonPlan;t.dataDashboard.menuDashboard.showFormActivity=t.getPropertiesByDataServices(e,i,r,!1,bizagi.menuSecurity).isVisibleButtonForm;f.idPlan?(s=$.when(t.getWorkitemsPlan(f.idPlan)),$.when(s).done(function(s){var h=t.getIsCurrentUserAssignedToWorkitem(s,n.idWorkitem,o),c;t.dataDashboard.params.guidWorkItem=h.guidWorkitem;c=$.when(t.getPlanByParent(h.guidWorkitem));$.when(c).then(function(o){t.dataDashboard.menuDashboard.contextFormActivityOptionMenu=t.getPropertiesByDataServices(e,i,r,h).contextToShow;t.dataDashboard.contextToShow=t.dataDashboard.menuDashboard.contextFormActivityOptionMenu;t.dataDashboard.nameWorkItem=t.getPropertiesByDataServices(e,i,r,h).nameWorkItem;var s=o.length>0;t.dataDashboard.menuDashboard.contextPlanOptionMenu=t.getContextActionWhenClickButtonPlan(e,s);t.dataDashboard.params.plan={};$.when(t.getPlan(f.idPlan)).done(function(i){t.dataDashboard.params.plan=i;h&&(t.dataDashboard.params.plan.idActivitySelected=h.guidActivity);s&&(t.dataDashboard.params.planChild={},t.dataDashboard.params.planChild.id=o[0].id,t.dataDashboard.params.planChild.currentState=o[0].currentState);var r=$.when(t.getFirstParentCase(t.dataDashboard.params.plan.id));$.when(t.getRadNumber(n,f,i.contextualized),r).done(function(n,i){t.dataDashboard.params.radNumber=n;i&&i.idCase&&(t.dataDashboard.params.caseIdOfFirstParent=i.idCase,t.dataDashboard.params.workitemIdOfFirstParent=i.idWorkitem);u.resolve()})})})})):$.when(t.getRadNumber(n,f,!0)).done(function(n){if(t.dataDashboard.params.radNumber=n,t.dataDashboard.params.plan={},o){t.dataDashboard.params.guidWorkItem=o.guidWorkItem;var f=$.when(t.getPlanByParent(o.guidWorkItem));$.when(f).then(function(n){t.dataDashboard.menuDashboard.contextFormActivityOptionMenu=t.getPropertiesByDataServices(e,i,r,o).contextToShow;t.dataDashboard.contextToShow=t.dataDashboard.menuDashboard.contextFormActivityOptionMenu;t.dataDashboard.nameWorkItem=t.getPropertiesByDataServices(e,i,r,o).nameWorkItem;var f=n.length>0;t.dataDashboard.menuDashboard.contextPlanOptionMenu=t.getContextActionWhenClickButtonPlan(e,f);f&&(t.dataDashboard.params.planChild={},t.dataDashboard.params.planChild.id=n[0].id,t.dataDashboard.params.planChild.currentState=n[0].currentState);u.resolve()})}else t.dataDashboard.menuDashboard.contextFormActivityOptionMenu=t.CONTEXT_ACTIVITY,t.dataDashboard.contextToShow=t.dataDashboard.menuDashboard.contextFormActivityOptionMenu,t.dataDashboard.nameWorkItem=t.getPropertiesByDataServices(e,i,r,o).nameWorkItem,u.resolve()})}),u.promise()},t.getPropertiesByDataServices=function(n,i,r,u,f){f=f||{};var e={isVisibleButtonForm:null,isVisibleButtonComments:null,isVisibleButtonFiles:null,isVisibleButtonTimeLine:null,isVisibleButtonPlan:null,contextToShow:null,nameWorkItem:null};return $.extend(e,t.getMenuDashboardSecurity(f)),n===t.TYPE_WORKITEM_TASK?(e.isVisibleButtonForm=!0,i?r?(e.isVisibleButtonPlan=f.Plans||!1,e.contextToShow=t.CONTEXT_ACTIVITY,u&&(e.nameWorkItem=u.state)):(e.isVisibleButtonPlan=!1,u&&(e.nameWorkItem=u.state)):(e.isVisibleButtonPlan=!1,e.contextToShow=t.CONTEXT_OVERVIEW,e.nameWorkItem=bizagi.localization.getResource("workportal-project-casedashboard-activity"))):n===t.TYPE_WORKITEM_ACTIVITY&&(i?(r?(e.contextToShow=t.CONTEXT_ACTIVITYPLAN,u&&(e.nameWorkItem=u.displayName)):e.contextToShow=t.CONTEXT_OVERVIEW,e.isVisibleButtonForm=!0,e.isVisibleButtonPlan=f.Plans||!1):(e.isVisibleButtonForm=!1,e.isVisibleButtonPlan=!1,e.contextToShow=t.CONTEXT_ACTIVITYPLANOVERVIEW,e.nameWorkItem=bizagi.localization.getResource("workportal-project-casedashboard-activity"))),e},t.getMenuDashboardSecurity=function(n){n=n||{};var t={isVisibleButtonComments:null,isVisibleButtonFiles:null,isVisibleButtonTimeLine:null};return t.isVisibleButtonComments=n.Comments||!1,t.isVisibleButtonFiles=n.Files||!1,t.isVisibleButtonTimeLine=n.TimeLine||!1,t},t.getParamsByBackFromPlan=function(n,i,r){var u={};return u.paramsNotify={},t.planCreatedFromActivity(n)?(u.typeContext=t.CONTEXT_ACTIVITYPLAN,u.paramsNotify.showContextByMenuDashboard=u.typeContext,u.paramsNotify.level=i-1,u.paramsNotify.isRefresh=!1,n.plan.id=n.planParent.id,n.plan.idActivitySelected=n.planParent.idActivitySelected,n.menuDashboard.contextPlanOptionMenu=t.CONTEXT_PLANACTIVITIES):t.planCreatedFromTask(n)?(u.typeContext=t.CONTEXT_ACTIVITY,u.paramsNotify.showContextByMenuDashboard=u.typeContext,u.paramsNotify.level=i-1,u.paramsNotify.isRefresh=!1):u.typeContext=t.NOTIFICATION_NAVIGATOR_BACK,r&&(delete n.planChild,n.menuDashboard=n.menuDashboard||{},n.menuDashboard.contextPlanOptionMenu=n.planParent&&n.planParent.id?t.CONTEXT_ACTIVITYPLANCREATE:t.CONTEXT_PLANCREATE),u},t.planCreatedFromActivity=function(n){return n.planParent&&n.planParent.id},t.planCreatedFromTask=function(n){return n.plan.contextualized==!0&&typeof n.menuDashboard!="undefined"},t.planFromActivity=function(n){return n.plan.idActivitySelected?!0:!1},t.getCaseSummaryDetails=function(n){var t=this;return t.dataService.summaryCaseDetails({idCase:n.idCase||0,eventAsTasks:n.eventAsTasks,onlyUserWorkItems:n.onlyUserWorkItems})},t.getWorkitemsPlan=function(n){var t=this;return t.dataService.getWorkitemsPlan({idPlan:n})},t.getServerDateDifference=function(){var n=this;return n.dataService.getDateServer().done(function(t){n.dataDashboard.params.differenceMillisecondsServer=bizagi.util.dateFormatter.getDifferenceBetweenDates(new Date,new Date(t.date),"milliseconds")})},t.getPlanByParent=function(n){var i=this,t;return n?(t={parentWorkItem:n},i.dataService.getPlanByParent(t)):[]},t.getFirstParentPlan=function(n){var t=this,i={idPlan:n};return t.dataService.getFirstParentPlan(i)},t.getFirstParentCase=function(n){var t=this,i={idPlan:n};return t.dataService.getFirstParent(i)},t.getPlan=function(n){var t=this;return t.dataService.getPlan({idPlan:n})},t.getCurrentTheme=function(){var r=this,i=new Date,t="/Api/CurrentUser/GetCurrentTheme?"+i,n;return window.CURRENT_THEME_REMOVE_IT=window.CURRENT_THEME_REMOVE_IT||"theme1",$.mockjax({url:t,proxy:"jquery/workportal/test/data/dummy."+window.CURRENT_THEME_REMOVE_IT+".txt"}),n=$.Deferred(),$.when($.read({url:t,dataType:"json"})).done(function(t){n.resolve(t)}).fail(function(){n.resolve(null)}),n.promise()},t.setContextToShow=function(n){bizagi.services.projectDashboardContext=n},t.removeCurrentTheme=function(){$("#bizagi-theme-resources,[rel='bizagi-themes-templates']").remove()},t.setCustomizeTheme=function(){var n=this;n.getCurrentTheme().done(function(t){bizagi.loader.startAndThen("theme.base").then(function(){n.setCurrentTheme(t)})})},t.setCurrentTheme=function(n){var i,r,t,u,e,f;for($("#ui-bizagi-wp-application").remove(),$container=$("<div id='ui-bizagi-wp-application' ng-app='bizagi.services.module' ng-controller='bizagi.services.controller'><div id='ui-bizagi-wp-workarea' style='height: 100%;'><\/div><\/div>"),$("body").append($container),$workarea=$("#ui-bizagi-wp-workarea"),$("#bizagi-theme-resources,[rel='bizagi-themes-templates']").remove(),$themeResourcesContainer=$("<div id='bizagi-theme-resources'><\/div>"),i="",t=0;t<n.files.css.length;t++)i+="<style>"+n.files.css[t].content+"<\/style>";for(t=0;t<n.files.js.length;t++)i+="<script>"+n.files.js[t].content+"<\/script>";for($themeResourcesContainer.append(i),$themeResourcesContainer.appendTo("body"),r="",t=0;t<n.files.html.length;t++)u=n.files.html[t].name.toLowerCase(),r+=u.indexOf("main.html")>=0||u.indexOf("mainview.html")>=0?n.files.html[t].content:'<script rel="bizagi-themes-templates" type="text/ng-template" id="'+n.files.html[t].name+'">'+n.files.html[t].content+"<\/script>";$workarea.append(r);setTimeout(function(){$("#workportal-theme-layer").removeClass("workportal-theme-layer-visible")},300);setTimeout(function(){$("#workportal-theme-layer").remove()},600);e=bizagi.injector.get("globalHandlersService");$("#ui-bizagi-wp-project-homeportal-main,body,html").show();e.publish("showMainMenu");f=$("[ng-controller='bizagi.services.controller']");f.data("$injector","");angular.bootstrap(f[0],["bizagi.services.module"])},t};bizagi.injector.register("bizagi.workportal.services.behaviors.projectDashboard",["dataService",bizagi.workportal.services.behaviors.projectDashboard],!0);
bizagi.workportal.services.behaviors=bizagi.workportal.services.behaviors||{};bizagi.workportal.services.behaviors.orderActivitiesByTransitions=function(){var n=this;return n.tools={getObjectTransition:function(n,t){return{idActivityFrom:n,idActivityTo:t}},permuteArray:function(n){var u=this,r=[],t,i;for(t=0,length=n.length;t<length;t++)for(i=0;i<length;i++)n[t]!=n[i]&&r.push(u.getObjectTransition(n[t],n[i]));return r},getTransitionsBeforeGroup:function(n,t){var r=this,i=[];return t.forEach(function(t){i.push(r.getObjectTransition(n,t))}),i},getTransitionsAfterGroup:function(n,t){var r=this,i=[];return t.forEach(function(t){i.push(r.getObjectTransition(t,n))}),i},arrayUnique:function(n){for(var i,t=n.concat(),r=0;r<t.length;++r)for(i=r+1;i<t.length;++i)t[r]===t[i]&&t.splice(i--,1);return t}},n.getTransitionsOnGroup=function(n,t,i){var u=this,r=[];if(n&&i)r=r.concat.apply([],[r,u.tools.getTransitionsBeforeGroup(n,t),u.tools.getTransitionsAfterGroup(i,t)]);else if(n)r=r.concat.apply([],[r,u.tools.getTransitionsBeforeGroup(n,t)]);else if(i)r=r.concat.apply([],[r,u.tools.getTransitionsAfterGroup(i,t)]);else return[];return r},n.getActualTransitionsByActivities=function(t){for(var r=[],u=[],f=null,i=0;i<t.length;i+=1){if(t[i].parallel)u.push(t[i].id),i<t.length-1&&!t[i+1].parallel?(u.length>1?(r.length>0&&r.splice(-1,1),r=r.concat.apply([],[r,n.getTransitionsOnGroup(f,u,t[i+1].id)])):r=r.concat.apply([],[r,[n.tools.getObjectTransition(t[i].id,t[i+1].id)]]),u=[]):i===t.length-1&&t[i].parallel&&(r.length>0&&r.splice(-1,1),r.push.apply(r,n.getTransitionsOnGroup(f,u,null)));else{if(typeof t[i+1]=="undefined")break;t[i+1].parallel?(f=t[i].id,r.push.apply(r,[n.tools.getObjectTransition(t[i].id,t[i+1].id)])):typeof t[i+1]!="undefined"&&r.push.apply(r,[n.tools.getObjectTransition(t[i].id,t[i+1].id)])}if(i===t.length-2&&!t[i+1].parallel)break}return r},n.getActivitiesByTransitions=function(n,t){var e=this,r=[],u,i,f;if(t.length===0)r=n,n.length>1&&n.filter(function(n){n.parallel=!0});else{if(u=e.getOrderActivitiesByTransitions(t,n),activityGuidsInOrder=u.activitiesInOrder,parallelActivitiesHash=u.parallelActivitiesHash,activityGuidsInOrder.length===0)return n;for(i=0,f=activityGuidsInOrder.length;i<f;i+=1)r=r.concat(n.filter(function(n){return n.id==activityGuidsInOrder[i]&&parallelActivitiesHash[n.id]&&(n.parallel=!0),n.id==activityGuidsInOrder[i]}))}return r},n.getOrderActivitiesByTransitions=function(n,t){function s(t){var u=[],i=[],o=!1,h;if(t.forEach(function(t){var f=r.getTransitionsByFrom(n,t),s=f.length;s>0&&(o=!0,f.forEach(function(n){u.push(n.idActivityFrom);i.push(n.idActivityTo)}),s>1&&i.forEach(function(n){e[n]=!0}))}),o)h=r.tools.arrayUnique(u.concat(i)),f=r.tools.arrayUnique(f.concat(h)),s(i);else return}for(var f,r=this,e={},o=n.map(function(n){return n.idActivityFrom}),h=n.map(function(n){return n.idActivityTo}),i=[],u=0;u<o.length;u+=1)h.indexOf(o[u])===-1&&(i=r.tools.arrayUnique(i.concat([o[u]])));return i.length===0&&t.length===1?{activitiesInOrder:[t[0].id],parallelActivitiesHash:[]}:(i.length>1&&i.forEach(function(n){e[n]=!0}),f=[],s(i),{activitiesInOrder:f,parallelActivitiesHash:e})},n.getTransitionsByFrom=function(n,t){return n.filter(function(n){return n.idActivityFrom===t})},n.movePositionActivity=function(n,t,i){return n.move(t,i),n},n};bizagi.injector.register("bizagi.workportal.services.behaviors.orderActivitiesByTransitions",[bizagi.workportal.services.behaviors.orderActivitiesByTransitions],!0);
bizagi.workportal.services.behaviors=bizagi.workportal.services.behaviors||{};bizagi.workportal.services.behaviors.loadDataPlan=function(n,t){var i=this;return i.observableElement=$({}),i.dataService=n,i.serviceOrderActivitiesByTransitions=t,i.loadData=function(n,t,r){i.getDateServer=t;i.params=r;$.when(i.callGetPlan(n)).then(function(n){$.extend(i.params.plan,n,{activities:[],users:[]});var t={idPlan:i.params.plan.id};$.when(i.callGetFirstParent(t)).then(function(n){i.params.plan.firstParent=n;var t={idPlan:i.params.plan.id},r={idPlan:i.params.plan.id},u={idPlan:i.params.plan.id};$.when(i.dataService.getActivities(t),i.dataService.getWorkitemsPlan(r),i.dataService.getTransitionsByPlan(u)).then(function(n,t,r){var u=n||[];i.mergePropertiesActivitiesWithWorkitems(u,t);i.params.plan.activities=i.calculateActivityStatus(u);u=i.serviceOrderActivitiesByTransitions.getActivitiesByTransitions(u,r);i.params.plan.activities=u;i.publish("loadedWithDataActivities")});i.publish("loadedWithDataFirstParent")})})},i.mergePropertiesActivitiesWithWorkitems=function(n,t){n.forEach(function(n){var i=t.filter(function(t){return t.guidActivity==n.id});i.length>0&&$.extend(n,{startDate:i[0].wiEntryDate||null,finishDate:i[0].wiSolutionDate||null,idWorkItem:i[0].idWorkItem,workItemState:i[0].workItemState,idCase:i[0].idCase,estimatedFinishDate:i[0].wiEstimatedSolutionDate||n.estimatedFinishDate})})},i.calculateActivityStatus=function(n){var t=this;return $.each(n,function(n,i){var o;if(i.status="nodisplay",i.startDate&&i.estimatedFinishDate){var r=t.getDateServer(),u=i.estimatedFinishDate-i.startDate,f=i.startDate+.33*u,e=i.startDate+.66*u;r<f?i.status="ontime":f<=r&&r<e?i.status="delayed":e<=r&&(i.status="atrisk")}o=i.items.filter(function(n){return n.resolved===!0});i.numResolvedItems=o.length;i.numTotalItems=i.items.length;i.numTotalItems>0&&(i.progress=Math.floor(i.numResolvedItems/i.numTotalItems*100))}),n},i.callGetPlan=function(n){var i=this,t=$.Deferred();return i.dataService.getPlan(n).always(function(n){n.status===200||n.status===201||n.status===undefined?t.resolve(n):t.reject()}),t.promise()},i.callGetFirstParent=function(n){var i=this,t=$.Deferred();return i.dataService.getFirstParent(n).done(function(n){t.resolve(n)}),t.promise()},i.subscribe=function(){i.observableElement.on.apply(i.observableElement,arguments)},i.unsubscribe=function(){i.observableElement.off.apply(i.observableElement,arguments)},i.publish=function(){return i.observableElement.triggerHandler.apply(i.observableElement,arguments)},i};bizagi.injector.register("bizagi.workportal.services.behaviors.loadDataPlan",["dataService","bizagi.workportal.services.behaviors.orderActivitiesByTransitions",bizagi.workportal.services.behaviors.loadDataPlan],!0);
bizagi.workportal.services.action=function(n,t,i,r,u,f){var e=this;return e.observableElement=$({}),e.requestsInProgressActionGuid={},e.init=function(){e.model={}},t.loadTemplates({actionsTemplate:bizagi.getTemplate("bizagi.workportal.services.actions").concat("#actions-wrapper"),actionsTooltip:bizagi.getTemplate("bizagi.workportal.services.actions").concat("#actions-tooltip")}),e.getActionsData=function(t){return n.getActionsData(t).then(function(t){var i=new $.Deferred;return $.when.apply($,$.map(t,function(t){return t.type=="Process"?n.actionsHasStartForm({processId:t.reference}):!1})).done(function(){var n=$.makeArray(arguments),u=t.length,r;if(u>1)for(r=0;r<u;r++)t[r].hasStartForm=n[r]&&n[r][0].startForm,t[r].entityId=n[r]?n[r][0].entityId:"",t[r].entityName=n[r]?n[r][0].entityName:"";else u==1&&(t[0].hasStartForm=n[0]&&n[0].startForm,t[0].entityId=n[0]?n[0].entityId:"",t[0].entityName=n[0]?n[0].entityName:"");i.resolve(t)}),i.promise()})},e.processActionsData=function(n){var i=n.actions,h=n.isRefresh,c=n.isCase,f=n.isEvent,t=n.actionData,u,o,r,s;for(e.model[t.guidEntity]=e.model[t.guidEntity]||{},e.model[t.guidEntity][t.surrogateKey]=e.model[t.guidEntity][t.surrogateKey]||{},u=0,o=i.length;u<o;u++)r=i[u],r.isCase=c,s=r.id||r.reference,e.model[t.guidEntity][t.surrogateKey][s]=$.extend(r,{surrogateKey:t.surrogateKey,guidEntity:t.guidEntity,idCase:t.idCase,radNumber:t.radNumber,guidFact:t.guidFact,guidLeftEntity:t.guidLeftEntity,guidRightEntity:t.guidRightEntity,surrogateKeyLeftEntity:t.surrogateKeyLeftEntity,xpath:t.xpath});h&&(delete e.model[t.guidEntity][t.surrogateKey].actions,delete e.model[t.guidEntity][t.surrogateKey].events);f||e.model[t.guidEntity][t.surrogateKey].actions!=undefined||(e.model[t.guidEntity][t.surrogateKey].actions=i||[]);f&&e.model[t.guidEntity][t.surrogateKey].events==undefined&&(e.model[t.guidEntity][t.surrogateKey].events=i||[],e.model[t.guidEntity][t.surrogateKey].actions==undefined&&(e.model[t.guidEntity][t.surrogateKey].actions=[]),e.model[t.guidEntity][t.surrogateKey].actions=e.model[t.guidEntity][t.surrogateKey].actions.concat(i));e.model[t.guidEntity][t.surrogateKey].entityActions=$.grep(e.model[t.guidEntity][t.surrogateKey].actions,function(n){return n.multiplicity!=2});e.model[t.guidEntity][t.surrogateKey].batchActions=$.grep(e.model[t.guidEntity][t.surrogateKey].actions,function(n){return n.multiplicity==2})},e.getAction=function(n){var t=e.model[n.guidEntity]||{};return t=t[n.surrogateKey]||{},t[n.guidAction]},e.getActions=function(n){var n=n||{},r={};for(var f in n){var t=n[f],i=e.model[t.guidEntity]||{},u=t.surrogateKey||t.idCase;i=i[u]||{};r[u]=i.actions||[]}return r},e.getActionsView=function(n){var u=new $.Deferred,i=n.actionData,o=n.isRefresh,f=n.loadEvents,s=f?r.dataReady():!0,h=i.surrogateKey>=0?e.getActionsData(i):[];return $.when(h,s).then(function(n){if(n.length>0){var r=i.idCase!==undefined;e.processActionsData({actions:n,actionData:i,isRefresh:o,isCase:r})}return{actionTemplate:t.getTemplate("actionsTemplate"),actions:n,idCase:i.idCase,actionData:i,surrogateKey:i.surrogateKey}}).then(function(n){if(f){var t=r.getEvents(n.idCase);t.length>0&&(e.processActionsData({actions:t,actionData:n.actionData,idCase:n.idCase,isCase:!1,isEvent:!0}),n.idCaseEvent=t[0].idCaseEvent,n.actions=n.actions.concat(t))}return n}).done(function(n){var r,t;if(t=null,n.actions.length>0){r=e.getActionsModel(i.guidEntity,i.idCase,i.surrogateKey);r.idCaseEvent=n.idCaseEvent;t=n.actionTemplate.render(r);t.on("click",".actions-container li",e.executeAction);t.find(".actions-container li").tooltip()}u.resolve({actionsView:t,actionsData:n.actions})}),u.promise()},e.getActionsModel=function(n,t,i){var r=e.model[n][i].entityActions||[];return{actions:r,idCase:t,guidEntity:n,surrogateKey:i}},e.getAccummulativeContext=function(n){return{context:[{entityGuid:n.guidEntity,surrogateKey:[n.surrogateKey]}]}},e.displayTooltipActions=function(n){var r=$(n.target),u=r.closest(".template-actions-container").data("entityguid"),f=r.closest(".template-actions-container").data("idcase"),o=e.model[u][f].entityActions.slice(6),i=t.getTemplate("actionsTooltip").render({actions:o,idCase:f,guidEntity:u});return i.appendTo(r.parent()),setTimeout(function(){i.click(function(n){n.stopPropagation()});$(document).one("click",function(){i.remove()})},100),i},e.executeAction=function(t,i){var u=$(t.target),h,o,s,l,c;(i=i||e.getAction({guidEntity:u.closest(".template-actions-container").data("entityguid"),idCase:u.closest(".template-actions-container").data("idcase"),surrogateKey:u.closest(".template-actions-container").data("surrogatekey"),guidAction:u.closest("li").data("guid")}),i.idCaseEvent=u.closest(".template-actions-container").data("idcaseevent"),h=e.getHashForActionOrEvent(i),e.requestsInProgressActionGuid[h])||(o=u.closest(".wdg-tple-button"),e.addLoadingButtonAction(o,h),i&&(i.isEvent?(r.processEvent(i),e.removeLoadingButtonAction(o,h)):(s=i.type,l=i.data,i.type==="Process"?(c=f.countContext(),c>0?f.isValidData("entityGuid",u.closest(".template-actions-container").data("entityguid"))?f.updateLastPosition({key:"surrogateKey",value:[i.surrogateKey]}):f.addContext({entityGuid:u.closest(".template-actions-container").data("entityguid"),surrogateKey:[i.surrogateKey]}):f.addContext({entityGuid:u.closest(".template-actions-container").data("entityguid"),surrogateKey:[i.surrogateKey]}),$.when(n.getMapping({guidEntity:i.entityId||i.guidEntity,accumulatedContext:f.getContext({}),xpathContext:i.entityName})).done(function(n){typeof e["onExecute"+s]=="function"&&e["onExecute"+s].apply(e,[i,n,o])})):typeof e["onExecute"+s]=="function"&&e["onExecute"+s].apply(e,[i,undefined,o]))))},e.getHashForActionOrEvent=function(n){var t=n.id;return n.isEvent&&(t=n.idWorkitem),t},e.onExecuteProcess=function(n,t,i){n.hasStartForm?$.when(u.executeProcessAction({action:n,mappingData:t})).done(function(){e.removeLoadingButtonAction(i,n.id)}):$.when(u.executeProcessAction({action:n,mappingData:t})).done(function(){e.removeLoadingButtonAction(i,n.id)})},e.onExecuteForm=function(n,t,i){$.when(u.executeFormAction({action:n})).done(function(t){e.publish("onFormActionExecuted",$.extend(t,n))});e.removeLoadingButtonAction(i,n.id)},e.onExecuteRule=function(n,t,i){$.when(u.executeRuleAction({action:n})).done(function(){e.removeLoadingButtonAction(i,n.id)})},e.getCommonActions=function(n){var i=e.getActions(n),r=0,t=[],f=[];for(var u in i)r==0&&(t=i[u]),r==1&&(f=i[u],t=e.actionIntersection(t,f)),r>1&&(t=e.actionIntersection(t,i[u])),r++;return t},e.actionIntersection=function(n,t){var u=[],i,e,f,r,o;if(n.length==0||t.length==0)return u;for(i=0,e=n.length;i<e;i++)for(f=n[i],r=0,o=t.length;r<o;r++)f.id==t[r].id&&u.push(f);return u},e.subscribe=function(){e.observableElement.on.apply(e.observableElement,arguments)},e.unsubscribe=function(){e.observableElement.off.apply(e.observableElement,arguments)},e.publish=function(){return e.observableElement.triggerHandler.apply(e.observableElement,arguments)},e.addLoadingButtonAction=function(n,t){n.addClass("state-loading");n.prepend('<div class="ui-bizagi-loading-icon ui-bizagi-loading-button"><\/div>');e.requestsInProgressActionGuid[t]=!0},e.removeLoadingButtonAction=function(n,t){n.removeClass("state-loading");n.find(".ui-bizagi-loading-button").remove();delete e.requestsInProgressActionGuid[t]},{getActionsView:e.getActionsView,getCommonActions:e.getCommonActions,getActions:e.getActions,getActionsData:e.getActionsData,executeAction:e.executeAction,subscribe:e.subscribe,unsubscribe:e.unsubscribe,publish:e.publish,init:e.init}};bizagi.injector.register("actionService",["dataService","loadTemplatesService","usersCasesService","actionsEventsService","processActionService","accumulatedcontext",bizagi.workportal.services.action],!0);
bizagi.workportal.services.accumulatedcontext=function(){var n=this;return n.context=[],n.addContext=function(t){t.surrogateKey&&t.entityGuid&&n.context.push({entityGuid:t.entityGuid,surrogateKey:t.surrogateKey})},n.updateLastPosition=function(t){n.context[n.context.length-1][t.key]=t.value},n.deleteContext=function(){n.context.pop()},n.getContext=function(t){var i=t.empty||!1;return i?{context:[]}:{context:n.context}},n.clean=function(){n.context=[]},n.cutContext=function(t){var t=t||1,i=n.context.length-t;i>0?n.context=n.context.slice(0,-i):n.clean()},n.getSpecificValue=function(t,i){if(n.context.length>0){if(t)return n.context[i][t]}else return undefined},n.isValidData=function(t,i){return n.getSpecificValue(t,n.countContext()-1)==i?!0:!1},n.countContext=function(){return n.context.length},{addContext:n.addContext,updateLastPosition:n.updateLastPosition,deleteContext:n.deleteContext,clean:n.clean,getContext:n.getContext,cutContext:n.cutContext,getSpecificValue:n.getSpecificValue,isValidData:n.isValidData,countContext:n.countContext}};bizagi.injector.register("accumulatedcontext",[bizagi.workportal.services.accumulatedcontext]);
bizagi.workportal.services.processaction=function(n,t,i,r,u,f){var e=this;return e.observableElement=$({}),e.dialogBox={},f.loadTemplates({"popup-notification-template":bizagi.getTemplate("bizagi.workportal.services.processactions").concat("#popup-notification-template"),"popup-notification-rules-template":bizagi.getTemplate("bizagi.workportal.services.processactions").concat("#popup-notification-rules-template")}),e.executeProcessAction=function(t){var i=t.action,f=t.mappingData,s=t.mappingstakeholders||"",h=t.guidprocess||i.reference,o=i.multiplicity===1&&t.parentId>0?t.parentId:i.isCase&&i.multiplicity!==2?i.idCase:undefined,r=new $.Deferred;return e.executingBatchActions=t.executingBatchActions,i.hasStartForm?(data={closeVisible:!1,modalParameters:{title:i.displayName},isMultiInstance:i.multiplicity==2,mapping:f,mappingstakeholders:s,guidprocess:h,idParentCase:o},data.widgetInstance=bizagi.injector.get("bizagi.workportal.widgets.createcase",data),data.widgetInstance.sub("closeDialog",function(n,t){$(document).data("auto-save","");u.close();e.launchActionsAfterCreateCase($.extend(t,{action:i,showConfirmation:t.showConfirmation}));r.resolve({action:i})}),data.widgetInstance.sub("loadedForm",function(){r.resolve()}),u.renderWidget(data)):$.when(n.actionCreateCase({idProcess:i.reference,entityMapping:JSON.stringify(f),idParentCase:o})).done($.proxy(function(n){$.when(e.launchActionsAfterCreateCase($.extend({idCase:n.caseId,caseNumber:n.caseNumber},{action:this,showConfirmation:t.showConfirmation}))).done(function(){r.resolve({idCase:n.caseId,caseNumber:n.caseNumber,action:i})})},i)),r.promise()},e.launchActionsAfterCreateCase=function(n){var t=new $.Deferred;return $.when(e.currentUserBelongNextActivity(n.idCase)).done(function(r){e.executingBatchActions=e.executingBatchActions||!1;r==!0&&e.executingBatchActions==!1?(i.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:n.idCase}),t.resolve()):e.executingBatchActions==!1?n.action.showConfirmation?$.when(e.sendNotification({caseInfo:{idCase:n.idCase,caseNumber:n.caseNumber,displayName:n.action.displayName,showConfirmation:n.action.showConfirmation}})).done(function(){t.resolve()}):t.resolve():t.resolve()}),t.promise()},e.currentUserBelongNextActivity=function(n){var i=this,t=$.Deferred();return $.when(i.getCaseAssignees(n)).done(function(n){var r=n.assignees,u=!1,i;if(r)for(i=0;i<r.length;i++)if(r[i].idUser==bizagi.currentUser.idUser){u=!0;break}t.resolve(u)}),t.promise()},e.getCaseAssignees=function(t){var i=$.Deferred();return $.when(n.getCaseAssignees({idCase:t})).done(function(n){i.resolve(n)}),i.promise()},e.sendNotification=function(n){return e.showDialogNotification([{idCase:n.caseInfo.idCase,caseNumber:n.caseInfo.caseNumber}],n.caseInfo.displayName,n.caseInfo.showConfirmation)},e.executeFormAction=function(n){var i=n.action,u=new $.Deferred,f=n.mappingData,e=n.action.readonlyform||!1,t={closeVisible:!1,modalParameters:{title:i.displayName},guidForm:i.reference},r;return typeof f!="undefined"?$.extend(t,{entityGuid:i.guidEntity,mapping:f}):$.extend(t,{entityGuid:i.guidEntity,surrogateKey:i.surrogateKey}),$.extend(t,{readonlyform:e}),r=bizagi.injector.get("dialogWidgets"),t.widgetInstance=bizagi.injector.get("bizagi.workportal.widgets.updateform",t),t.widgetInstance.sub("closeDialog",function(n,t){r.close();$.forceCollectData=!1;u.resolve(t)}),$.forceCollectData=!0,r.renderWidget(t),u.promise()},e.executeRuleAction=function(t){var i=t.action,r=new $.Deferred;return $.when(n.executeRule({surrogateKey:i.surrogateKey,entityId:i.guidEntity,ruleId:i.reference})).done(function(n){n.result==="success"?$.when(e.showDialogNotificationRules([[{id:n.id},"success"]],t.action.displayName,t.action.showConfirmation)).done(function(){r.resolve(n);t.refresh=!0;e.publish("onFormRuleExecuted",$.extend(n,t))}):$.when(e.showDialogNotificationRules([[{id:n.id},"error"]],t.action.displayName,t.action.showConfirmation)).done(function(){r.resolve(n)})}),r.promise()},e.executeBatchAction=function(t){var i=t.action,u=t.commonActionsmodel,f=u.surrogateKeys,r=$.Deferred(),o;return i.type==="Process"?i.multiplicity===1?(o=u.parentsid?u.parentsid:[],$.when(e.resolveMultiplicityValidate(t,f,o)).always(function(){r.resolve()})):$.when(e.multiplicityValidate(t,[],0)).always(function(){r.resolve()}):i.multiplicity===1?$.when(e.resolveBatchRules(f,i)).always(function(){r.resolve()}):$.when(n.executeRuleMultiple({surrogateKey:u.surrogateKeys,entityId:i.guidEntity,ruleId:i.reference})).done(function(n){n.result==="success"?$.when(e.showDialogNotificationRules([[{id:n.id},"success"]],i.displayName,i.showConfirmation)).done(function(){e.publish("onFormRuleExecuted",{refresh:!0});r.resolve()}):$.when(e.showDialogNotificationRules([[{id:n.id},"error"]],i.displayName,i.showConfirmation)).done(function(){r.resolve()})}).fail(function(){$.when(e.showDialogNotificationRules([[{id:data.id},"error"]],i.displayName,i.showConfirmation)).done(function(){r.resolve()})}),r.promise()},e.resolveMultiplicityValidate=function(n,t,i){function s(){$.when.apply($,f).done($.proxy(function(){var n=arguments,t;n.length>1?(t=n.length>0?n[0].action.showConfirmation:!1,$.when(e.showDialogNotification(n,this.displayName,t)).done(function(){r.resolve()})):r.resolve()},n.action))}for(var r=$.Deferred(),f=[],u=0,o=t.length;u<o;u++)(function(n,t,i,r,u){setTimeout(function(){var o=e.multiplicityValidate(i,[r[n]],u[n]);f.push(o);n===t-1&&s()},n*1e3)})(u,o,n,t,i);return r.promise()},e.multiplicityValidate=function(t,i,u){var o=$.Deferred(),s=t.action,f=t.commonActionsmodel;return r.isValidData("entityGuid",f.guidEntity)?r.updateLastPosition({key:"surrogateKey",value:i.length>0?i:f.surrogateKeys.map(function(n){return typeof n=="string"?parseInt(n):n})}):r.addContext({entityGuid:f.guidEntity,surrogateKey:i.length>0?i:f.surrogateKeys.map(function(n){return typeof n=="string"?parseInt(n):n})}),$.when(n.getMapping({guidEntity:s.entityId,accumulatedContext:r.getContext({}),xpathContext:s.entityName})).done(function(n){t.mappingData=n;t.parentId=u;t.action.multiplicity==1&&t.commonActionsmodel.surrogateKeys.length>1&&(t.executingBatchActions=!0);$.when(e.executeProcessAction(t)).done(function(n){o.resolve(n)})}),o.promise()},e.resolveBatchRules=function(t,i){for(var o,r=$.Deferred(),f=[],u=0,s=t.length;u<s;u++)o=$.when(n.executeRule({surrogateKey:t[u],entityId:i.guidEntity,ruleId:i.reference})),f.push(o);return $.when.apply($,f).done($.proxy(function(){var n=arguments;n[0].id?$.when(e.showDialogNotificationRules([n],this.displayName,this.showConfirmation)).done(function(){e.publish("onFormRuleExecuted",{refresh:!0});r.resolve()}):$.when(e.showDialogNotificationRules(n,this.displayName,this.showConfirmation)).done(function(){e.publish("onFormRuleExecuted",{refresh:!0});r.resolve()})},i)),r.promise()},e.showDialogNotification=function(n,t,r){var s=$.Deferred(),o;if(r){var c=bizagi.localization.getResource("workportal-widget-templateengine-action-process-notification"),h=$.map(n,function(n){var t=n.caseNumber||n.idCase;return{caseCreated:c.replace("{0}","<a href='#' data-idcase='"+n.idCase+"'>"+t+"<\/a>"),icon:"check"}}),l=f.getTemplate("popup-notification-template"),u;u=h.length>1?bizagi.localization.getResource("workportal-widget-templateengine-message-summary-create-cases-plural"):bizagi.localization.getResource("workportal-widget-templateengine-message-summary-create-cases-singular");u=printf(u,h.length);messageActionGoToCase=bizagi.localization.getResource("workportal-widget-templateengine-message-action-go-to-case");e.dialogBox.formContent=l.render({messageCreatedCases:h,messageSummary:u,messageActionGoToCase:messageActionGoToCase});o=new NotificationMessage(t,{body:e.dialogBox.formContent.html(),iconType:_NOTIFICATION_ICON_TYPE.CSS});o.onShow=function(){s.resolve()};o.onClick=function(n){n.preventDefault();var t=$(n.target).data("idcase");return t&&$(n.target).is("a")&&($(n.currentTarget).unbind(n),i.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:t})),this.close(),!1};i.publish("notification",{notification:o,type:_NOTIFICATION_TYPE.MODAL})}else s.resolve();return s.promise()},e.showDialogNotificationRules=function(n,t,r){var o=$.Deferred(),h,a,u;if(r){h="workportal-widget-templateengine-action-rule-notification-"+(n.length>1?"plural":"singular");var v=printf(bizagi.localization.getResource(h),t,n.length),y=bizagi.localization.getResource("workportal-widget-templateengine-action-rule-success"),p=bizagi.localization.getResource("workportal-widget-templateengine-action-rule-error");n=$.map(n,function(n){return{type:n.length>1?n[1]:"success"}});var c=n.filter(function(n){return n.type=="success"}).length,l=n.length-c,s=[];s.push({result:printf(y,c),type:"success",icon:"check"});l>0&&s.push({result:printf(p,l),type:"error",icon:"error"});a=f.getTemplate("popup-notification-rules-template");e.dialogBox.formContent=a.render({messageSummary:v,resultTotalRules:s});u=new NotificationMessage(t,{body:e.dialogBox.formContent.html(),iconType:_NOTIFICATION_ICON_TYPE.CSS});u.onShow=function(){o.resolve()};u.onClick=function(n){return n.preventDefault(),this.close(),!1};i.publish("notification",{notification:u,type:_NOTIFICATION_TYPE.MODAL})}else o.resolve();return o.promise()},e.subscribe=function(){e.observableElement.on.apply(e.observableElement,arguments)},e.unsubscribe=function(){e.observableElement.off.apply(e.observableElement,arguments)},e.publish=function(){return e.observableElement.triggerHandler.apply(e.observableElement,arguments)},{executeProcessAction:e.executeProcessAction,executeFormAction:e.executeFormAction,executeRuleAction:e.executeRuleAction,executeBatchAction:e.executeBatchAction,subscribe:e.subscribe,unsubscribe:e.unsubscribe,publish:e.publish,sendNotification:e.sendNotification,currentUserBelongNextActivity:e.currentUserBelongNextActivity,launchActionsAfterCreateCase:e.launchActionsAfterCreateCase}};bizagi.injector.register("processActionService",["dataService","notifier","globalHandlersService","accumulatedcontext","dialogWidgets","loadTemplatesService",bizagi.workportal.services.processaction]);
bizagi.workportal.services.userscases=function(n,t){var i=this;return i.imgPrefix="data:image/png;base64,",i.defaultImg=i.imgPrefix+"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",t.loadTemplates({assignees:bizagi.getTemplate("bizagi.workportal.services.userscases").concat("#usersrelated-wrapper"),assigneesTooltip:bizagi.getTemplate("bizagi.workportal.services.userscases").concat("#usersrelated-tooltip")}),i.dataReady=function(){return i.promiseData},i.render=function(t){i.cases=[];var r=$.map(t,function(t){return n.getUsersCases({caseId:t}).done(function(n){var r={idCase:t,assignees:n.assignees,createdBy:n.createdBy,users:i.getUniqueUsers($.merge([n.createdBy],n.assignees))};i.cases.push(r)})});return i.promiseData=$.when.apply($,r).then(function(){return i.getAllUsers(i.cases)}),i.promiseData},i.getAllUsers=function(n){var f,t,o,e,r,s,u,h;for(i.users=[],f=[],t=0,o=n.length;t<o;t++)for(e=n[t],r=0,s=e.users.length;r<s;r++)u=e.users[r],h=i.users.find(function(n){return n.idUser==u.idUser}),h||(i.users.push(u),f.push(u.idUser));return i.extendedUserInfo(f),i.users},i.getInitials=function(n){var t=n.split(" "),i=typeof t[0]!="undefined"?t[0].charAt(0):"",r=typeof t[1]!="undefined"?t[1].charAt(0):"";return(i+r).toUpperCase()},i.getUniqueUsers=function(n){var t=[],r=[];return $.each(n,function(n,u){$.inArray(u.idUser,r)==-1?(t.push({idUser:u.idUser,name:u.name,initials:i.getInitials(u.name),owner:n<=0,isAssignee:n!=0}),r.push(u.idUser)):t[0].isAssignee=t[0].idUser==u.idUser}),t},i.extendedUserInfo=function(t){var r={userIds:t.join(","),width:30,height:30,square:!0};r.userIds!==""&&(i.userInfoPromise=n.getUsersData(r).then(function(n){for(var r,t=0,u=n.length;t<u;t++)r=i.users.find(function(i){return n[t].id==i.idUser}),r&&(r.extendedInfo=n[t])}))},i.getUser=function(n){return $.when(i.userInfoPromise).then(function(){return i.users.find(function(t){return t.idUser==n})})},i.getAssignees=function(n){var r=new $.Deferred;return $.when(i.dataReady()).done(function(){var u=i.cases.find(function(t){return t.idCase==n}),e=u.users.length,o=e>2?u.users.slice(0,1):u.users,s={defaultImg:i.defaultImg,assignees:o,idCase:n,totalAssignees:e},f=t.getTemplate("assignees").render(s);i.displayUsersImages(o,f);f.on("mouseenter",".usersrelated-container li",function(n){var t=$(n.target),r=t.closest(".template-usersrelated-section"),u;$(".usersrelated",r).length&&$(".usersrelated",r).remove();u=i.showTooltipUsersAssignees(n);u.position({my:"right top",at:"left bottom",of:t,collision:"flip"})});r.resolve(f)}),r.promise()},i.showTooltipUsersAssignees=function(n){var f=$(n.target),e=f.closest(".template-usersrelated-section"),s=f.closest(".usersrelated-container").data("idcase"),h=f.closest("li").data("owner")||!1,r=i.cases.find(function(n){return n.idCase==s}).users,o,u;return r=h?r.slice(0,1):r.slice(1,r.length),o={defaultImg:i.defaultImg,assignees:r},u=t.getTemplate("assigneesTooltip").render(o),e.append(u),i.displayUsersImages(r,u),setTimeout(function(){u.click(function(n){n.stopPropagation()});$(document).one("mouseout",function(){u.remove()})},100),e.find(".usersrelated")},i.displayUsersImages=function(n,t){for(var r=[],u=0,f=n.length;u<f;u++)r.push(n[u].idUser);setTimeout(function(){for(var n=0,u=r.length;n<u;n++)$.when(i.getUser(r[n]),r[n]).done(function(n,r){n.extendedInfo.picture&&t.find(".userId-"+r).attr("src",i.imgPrefix+n.extendedInfo.picture).show("fast").parent().find("span.initials").hide()})},0)},{dataReady:i.dataReady,getAssignees:i.getAssignees,render:i.render}};bizagi.injector.register("usersCasesService",["dataService","loadTemplatesService",bizagi.workportal.services.userscases]);
bizagi.workportal.services.actionsevents=function(n,t){var i=this;return i.render=function(t){i.cases=[];var r=$.map(t,function(t){return n.getActionsEvents({caseId:t}).done(function(n){var r=t,u;typeof n!="undefined"&&n.length>0&&n[0].length>0&&(r=n[0][0].idCase,n[0].forEach(function(n){n.idCaseEvent=r}));u={idCase:t,idCaseEvent:r,events:n[0]||[]};i.cases.push(u)})});return i.promiseData=$.when.apply($,r).then(function(){return i.cases}),i.promiseData},i.dataReady=function(){return i.promiseData},i.getEvents=function(n){var t=i.cases.find(function(t){return t.idCase==n});return t&&t.events?t.events:[]},i.processEvent=function(n){t.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:n.idCaseEvent,idWorkItem:n.idWorkitem,idTask:n.idTask,idWorkflow:n.idWorkflow})},{getEvents:i.getEvents,dataReady:i.dataReady,processEvent:i.processEvent,render:i.render}};bizagi.injector.register("actionsEventsService",["dataService","globalHandlersService",bizagi.workportal.services.actionsevents]);
bizagi.workportal.services.casetoolbar=function(n,t,i,r){var u=this;return i.loadTemplates({casetoolbarTemplate:bizagi.getTemplate("bizagi.workportal.services.casetoolbar").concat("#casetoolbar-wrapper")}),u.configureHandlers=function(n){n.on("click",".btn-view",u.onClickViewPath);n.on("click",".btn-fallowing",u.onClickFavorite);n.on("click",".btn-workonit",u.onClickWorkOnIt);n.find(".casetoolbar ul li").tooltip()},u.getCaseToolbar=function(n){var r=i.getTemplate("casetoolbarTemplate"),t=r.render(n);return u.configureHandlers(t),t},u.onClickFavorite=function(i){i.preventDefault();var o=this,u={},r="",f="",e=$(i.target).parent().data("idcase");$(i.target).hasClass("on")?(u={idObject:$(i.target).parent().data("guid"),favoriteType:"CASES"},$.when(n.delFavorite(u)).done(function(){r=bizagi.localization.getResource("workportal-service-casetoolbar-following-off");r=r.replace("{0}",e);$(i.target).toggleClass("on");t.showSucessMessage(r,f,{})})):(u={idObject:$(i.target).parent().data("idcase"),favoriteType:"CASES"},$.when(n.addFavorite(u)).done(function(n){r=bizagi.localization.getResource("workportal-service-casetoolbar-following-on");r=r.replace("{0}",e);$(i.target).parent().attr("data-guid",n.idFavorites);$(i.target).toggleClass("on");t.showSucessMessage(r,f,{})}))},u.onClickViewPath=function(n){n.preventDefault();var t=$(n.target).closest(".btn-view"),i={idCase:t.data("idcase"),idWorkflow:t.data("idworkflow")};bizagi.loader.start("processviewer").then(function(){r.showDialogWidget({widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GRAPHIC_QUERY,data:i,modalParameters:{title:bizagi.localization.getResource("render-graphic-query"),refreshInbox:!1},maximizeOnly:!0})})},u.onClickWorkOnIt=function(n){r.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:$(n.target).parent().data("idcase")})},{getCaseToolbar:u.getCaseToolbar}};bizagi.injector.register("casetoolbar",["dataService","notifier","loadTemplatesService","globalHandlersService",bizagi.workportal.services.casetoolbar]);
bizagi.workportal.services.relatedusers=function(n,t){var i=this;i.init=function(){i.auxNoRepeatTypesUser={};i.dataRelatedUsers=[]};i.init();i.dataService=n;i.idCase;i.content;i.hashTypesUser={assigned:bizagi.localization.getResource("workportal-project-user-assigned"),owner:bizagi.localization.getResource("workportal-project-user-owner")};t.loadTemplates({relatedUsersTemplate:bizagi.getTemplate("bizagi.workportal.services.relatedusers").concat("#relatedusers-wrapper"),relatedUserTooltip:bizagi.getTemplate("bizagi.workportal.services.relatedusers").concat("#related-user-tooltip")});i.render=function(n,t,r,u){i.init();i.$wrapper=n;i.selector=t;i.idCase=r;i.dataService.getCaseAssignees({idCase:r}).done(function(n){var t=i.getCSVUserIds(n.assignees,u);$.when(i.getUsersData(t)).done(function(t){i.prepareData(t,u,n);i.printUsers(i.dataRelatedUsers);i.addEventHandlersTooltip()})})};i.getCSVUserIds=function(n,t){var i=$.map(n,function(n){return n.idUser});return i.unshift(t[0].id),i.join(",")};i.getUsersData=function(n){var i=this,t=$.Deferred(),r={userIds:n,width:50,height:50};return i.dataService.getUsersData(r).done(function(n){t.resolve(n)}).fail(function(){t.resolve([])}),t.promise()};i.prepareData=function(n,t,r){var f=[],u,e,o;if(n)for(i.mergeTypesToAssignUsers(t,r),u=0,e=n.length;u<e;u++)o=i.prepareDataUser(n[u],t,r),f.push(o);i.dataRelatedUsers=f};i.mergeTypesToAssignUsers=function(n,t){for(var f,r=0,u=t.assignees.length;r<u;r++)f=i.auxNoRepeatTypesUser[t.assignees[r].idUser.toString()+"assigned"],typeof f=="undefined"&&(i.auxNoRepeatTypesUser[t.assignees[r].idUser.toString()+"assigned"]="",n.push({id:t.assignees[r].idUser||-1,typeName:"assigned"}))};i.printUsers=function(){i.content=t.getTemplate("relatedUsersTemplate").render({users:i.dataRelatedUsers});$("span, li",i.content).removeClass("nodisplay");$(i.selector,i.$wrapper).html(i.content)};i.prepareDataUser=function(n,t,r){var u=n.id,f={id:u,name:n.name,initials:n.name.getInitials(),picture:n.picture?"data:image/png;base64,"+n.picture:undefined,types:i.assignUserTypes(u.toString(),t),tasks:i.getTasksUser(r,u.toString())};return f.typesString=$.map(f.types,function(n){return i.hashTypesUser[n]}).join(","),f};i.getTasksUser=function(n,t){for(var u=[],r=n.assignees.filter(function(n){return n.idUser.toString()===t}),i=0,f=r.length;i<f;i+=1)u.push({taskType:bizagi.util.parseBoolean(r[i].isEvent)?bizagi.localization.getResource("workportal-project-user-event"):bizagi.localization.getResource("workportal-project-user-task"),taskName:r[i].taskName});return u};i.assignUserTypes=function(n,t){for(var r=[],i=0,u=t.length;i<u;i+=1)n===t[i].id.toString()&&r.push(t[i].typeName);return r};i.addEventHandlersTooltip=function(){$("ul",i.content).tooltip({items:"li",content:function(){var n=$(this).data("userid"),r=i.dataRelatedUsers.filter(function(t){return t.id===n})[0];return t.getTemplate("relatedUserTooltip").render(r)}})}};bizagi.injector.register("relatedusers",["dataService","loadTemplatesService",bizagi.workportal.services.relatedusers],!0);
bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{});
bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{getUserStuff:function(n){var i=this,t={},r=i.serviceLocator.getUrl("stuff-handler-getUserStuff");return n&&n.icon&&typeof n.icon!="undefined"&&(t.icon=!0),$.read(r,t)}});
bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{getSearchData:function(n){var i=this,t=i.serviceLocator.getUrl("my-search-getData"),r,u;return t=t.replace("{guidSearch}",n.guidSearch),r=n.filters||[],u={filters:JSON.stringify(r),pag:n.page||1,calculateFilters:n.calculateFilters||!1,pagSize:n.pageSize||10},$.read(t,u).then(function(n){return i.serializeEntityData(n)})},getCollectionEntityData:function(n){var i=this,r,u,t;return n=n||{},typeof n.filters!="undefined"&&(u=n.filters.filter(function(n){return typeof n.properties=="undefined"})),t={templateType:n.referenceType==="VIRTUAL"||n.referenceType==="FACT"?"List":"Content",surrogateKey:n.surrogateKey,pag:n.page||1,pagSize:n.pageSize||10,defaultFilterApplied:typeof n.defaultFilterApplied!="undefined"?n.defaultFilterApplied:!0,filters:JSON.stringify(u)||[]},n.referenceType==="VIRTUAL"?(r=i.serviceLocator.getUrl("data-navigation-handler-collection"),t.reference=n.reference):(r=i.serviceLocator.getUrl("data-navigation-handler-entity"),t.reference=n.guidEntityCurrent||n.entityId,t.xpath=n.xpath,t.collectionId=n.reference),$.read(r,t).then(function(t){return $.extend(i.serializeEntityData(t),{reference:n.reference})})},getFiltersEntityData:function(n){var r=this,t,i;return n=n||{},typeof n.filters!="undefined"&&(t=n.filters.filter(function(n){return typeof n.properties=="undefined"})),i={reference:n.guidEntityCurrent,collectionId:n.reference,surrogateKey:n.surrogateKey,xpath:n.xpath,templateType:"List",defaultFilterApplied:n.defaultFilterApplied,filters:JSON.stringify(t)},$.read({url:r.serviceLocator.getUrl("data-navigation-handler-entity-filters"),data:i}).then(function(t){return $.extend(t,{reference:n.reference})})},getMapping:function(n){var i=this,t={accumulatedContext:JSON.stringify(n.accumulatedContext),guidEntity:n.guidEntity};return n.xpathContext&&(t.xpathContext=n.xpathContext),$.ajax({url:i.serviceLocator.getUrl("entities-handler-getMapping"),data:t,type:"POST",dataType:"json"})},actionsHasStartForm:function(n){var t=this,i={processId:n.processId};return $.read({url:t.serviceLocator.getUrl("handler-validate-action-has-start-form"),data:i,batchRequest:!0})},actionCreateCase:function(n){var i=this,t={processId:n.idProcess};return n.entityMapping&&(t.entityMapping=n.entityMapping),t.parentCaseId=n.parentCaseId?n.parentCaseId:0,$.create({url:i.serviceLocator.getUrl("handler-execute-action-start"),data:t})},getIdCasesOfProcessEntities:function(n){n=n||{};var t=this,i={ids:JSON.stringify(n)};return $.ajax({url:t.serviceLocator.getUrl("process-handler-getIdCasesOfProcessEntities"),data:i,type:"POST"})},createCase:function(n){var i=this,t={idProcess:n.idProcess,entityMapping:n.entityMapping};return n.idParentCase&&(t.idParentCase=n.idParentCase),$.create({url:i.serviceLocator.getUrl("case-handler-startProcess"),data:t})},executeRule:function(n){var t=this,i={surrogateKey:n.surrogateKey,entityId:n.entityId,ruleId:n.ruleId};return $.create({url:t.serviceLocator.getUrl("actions-handler-executeRule-simple"),data:i})},executeRuleMultiple:function(n){var t=this,i={surrogateKey:JSON.stringify(n.surrogateKey),entityId:n.entityId,ruleId:n.ruleId};return $.create({url:t.serviceLocator.getUrl("actions-handler-executeRule-multiple"),data:i})}});
bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{getDiscussionsData:function(n){var t=this,i=t.serviceLocator.getUrl("project-resource-get");return $.read({batchRequest:!0,url:i,data:n,dataType:"json"}).pipe(function(n){return n})},postDiscussion:function(n){var t=this,i=t.serviceLocator.getUrl("project-resource-action");return $.create({url:i.replace("{typeResource}","Discussion"),data:JSON.stringify(n),dataType:"json",contentType:"application/json"})},postTag:function(n){var t=this,i=t.serviceLocator.getUrl("project-resource-action");return $.create({url:i.replace("{typeResource}","Tag"),data:JSON.stringify(n),dataType:"json",contentType:"application/json"})},deleteTag:function(n){var i=this,t=i.serviceLocator.getUrl("project-resource-delete");return t=t.replace("{typeResource}","Tag"),t=t.replace("{idResource}",n.idTag),$.destroy({url:t,data:JSON.stringify(n),dataType:"json",contentType:"application/json"})},getCommentsData:function(n){var t=this,i=t.serviceLocator.getUrl("project-comments-get");return $.read({batchRequest:!0,url:i,data:n,dataType:"json",contentType:"application/json"}).pipe(function(n){return n})},getCommentsCountByParent:function(n){var r=this,t={},i;return t.idParent=n,i=r.serviceLocator.getUrl("project-comments-count-by-parent"),$.read({url:i,data:t,dataType:"json",contentType:"application/json"})},postComment:function(n){var t=this,i=t.serviceLocator.getUrl("project-resource-action");return $.create({url:i.replace("{typeResource}","Comment"),data:JSON.stringify(n),dataType:"json",contentType:"application/json"})},deleteComment:function(n){var t=this,i=t.serviceLocator.getUrl("project-resource-action");return $.destroy({url:i.replace("{typeResource}","Comment"),data:JSON.stringify(n),dataType:"json",contentType:"application/json"})},editDiscussion:function(n){var t=this,i=t.serviceLocator.getUrl("project-resource-action");return $.update({url:i.replace("{typeResource}","Discussion"),data:JSON.stringify(n),dataType:"json",contentType:"application/json"})},getDownloadAttachment:function(n){var i=this,t=i.serviceLocator.getUrl("project-attachment-download");t=t.replace("{Attachment}",n);$("#project-dashboard-download").prop("src",t)}});
bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{getTimeLineActivities:function(n){var t=this,i=t.serviceLocator.getUrl("project-timeline-events-get");return $.read({url:encodeURI(i.replace("{idCase}",n)),dataType:"json",contentType:"application/json"})},getAssigneePicture:function(n){var t=this,i={userIds:n.join(),width:50,height:50},r=t.serviceLocator.getUrl("project-users-get");return $.read({url:r,data:i,dataType:"json"})},getAssignees:function(n){var t=this,i=t.serviceLocator.getUrl("project-workitem-assignees");return $.read({url:i.replace("{idWorkitem}",n),dataType:"json",contentType:"application/json"})}});
bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{getCurrentTimeDateServer:function(){var n=this,t=n.serviceLocator.getUrl("project-util-current-time");return $.read({url:t,dataType:"json",contentType:"application/json"})},getUserPlans:function(n){var t=this,i=t.serviceLocator.getUrl("plans");return $.read({url:i+"?"+jQuery.param(n),dataType:"json"})},getPlanParent:function(n){var t=this,i=t.serviceLocator.getUrl("project-plan-parent");return $.read({url:i,data:n,dataType:"json"})},getFirstParent:function(n){var i=this,r=i.serviceLocator.getUrl("project-plan-first-parent"),t=$.Deferred();return $.when($.read({url:r,data:n,dataType:"json"})).done(function(n){t.resolve(n)}).fail(function(){t.resolve(null)}),t.promise()},getCaseByPlan:function(n){var t=this,i=t.serviceLocator.getUrl("project-plan-get-case");return $.read({url:i,data:n,dataType:"json"})},getFirstParentPlan:function(n){var i=this,r=i.serviceLocator.getUrl("project-plan-first-parent-plan"),t=$.Deferred();return $.when($.read({url:r,data:n,dataType:"json"})).done(function(n){t.resolve(n)}).fail(function(){t.resolve(null)}),t.promise()}});
bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{getDateServer:function(){var n=this,t=n.serviceLocator.getUrl("project-util-current-time");return $.read({url:t,dataType:"json",contentType:"application/json"})},getUsersData:function(n){var t=this,i=t.serviceLocator.getUrl("project-users-get");return $.read({url:i,data:n,dataType:"json"})},editActivityPlan:function(n){var t=this,i=t.serviceLocator.getUrl("project-plan-activity-edit").replace("{idPlan}",n.idPlan).replace("{id}",n.id);return $.update({url:i,data:JSON.stringify(n),dataType:"json",contentType:"application/json"})},getPlanByParent:function(n){var i=this,r=i.serviceLocator.getUrl("project-plan-get-by-parent"),t=$.Deferred();return $.when($.read({url:r,data:n,dataType:"json",contentType:"application/json"})).done(function(n){t.resolve(n)}),t.promise()},getEffectiveDuration:function(n){var t=this,i=t.serviceLocator.getUrl("time-schemas-effectiveduration");return $.read({url:i,data:n,dataType:"json",contentType:"application/json"})},getEndHourWorkingByDate:function(n){var t=this,i=t.serviceLocator.getUrl("time-schemas-end-hour-working-by-date");return $.read({url:i,data:n,dataType:"json",contentType:"application/json"})},getItemsByActivity:function(n){var t=this,i=t.serviceLocator.getUrl("project-plan-activity-tasks-get");return $.read({url:i,data:n,dataType:"json",contentType:"application/json"})}});
bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{deletePlan:function(n){var t=this,i=t.serviceLocator.getUrl("project-plan-delete");return $.destroy({url:i.replace("{idPlan}",n.id),data:n,contentType:"application/x-www-form-urlencoded"})},createTemplateByPlan:function(n){var t=this,i=t.serviceLocator.getUrl("project-plan-template-create-by-plan");return $.create({url:i,data:JSON.stringify(n),contentType:"application/json"})},getTemplatesByParentWorkItem:function(n){var t=this,i=t.serviceLocator.getUrl("project-plan-template-get");return $.read({url:i,data:n,dataType:"json"})}});
bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{getMyShortcuts:function(n){var i=this,t={},r=i.serviceLocator.getUrl("handler-get-myShortcuts");return n&&n.icon&&typeof n.icon!="undefined"&&(t.icon=!0),$.read(r,t)},getMyShortcutsByCategory:function(n){var r=this,i=new $.Deferred,t=[],u=function(n){var i={};return $.each(t,function(t,r){r.category==n&&(i=r)}),i};return r.getMyShortcuts(n).done(function(n){$.each(n,function(n,i){var r=u(i.classification.displayName),f={displayName:i.displayName,idProcess:i.idProcess,icon:typeof i.icon!="undefined"?i.icon:null,showConfirmation:i.showConfirmation};$.isEmptyObject(r)?t.push({category:i.classification.displayName,items:[f]}):r.items.push(f)});i.resolve(t)}),i.promise()}});
bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{});
bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{createProjectFile:function(n){var t=this,i=t.serviceLocator.getUrl("project-files-upload");return $.create({url:i,data:JSON.stringify(n),dataType:"json",contentType:"application/json"})},updateProjectFile:function(n){var t=this,i=t.serviceLocator.getUrl("project-files-upload");return $.update({url:i,data:JSON.stringify(n),dataType:"json",contentType:"application/json"})},deleteFile:function(n){var t=this,i=t.serviceLocator.getUrl("project-resource-action");return $.destroy({url:i.replace("{typeResource}","Attachment"),data:JSON.stringify(n),dataType:"json",contentType:"application/json"})},getFilesThumbnails:function(n){var t=this,i=t.serviceLocator.getUrl("project-files-thumbnails");return $.read({url:i,data:n,dataType:"json",contentType:"application/json"})},getFilesListByRadNumber:function(n){var t=this,i=t.serviceLocator.getUrl("project-files-list");return $.read({url:i,data:n,dataType:"json",contentType:"application/json"})}});
bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{postPlan:function(n){var i=this,t;return n.idTemplate&&n.idTemplate.length!==0?(t=i.serviceLocator.getUrl("project-plan-create-by-template"),$.create({url:t.replace("{idTemplate}",n.idTemplate),data:JSON.stringify(n),dataType:"json",contentType:"application/json"})):(t=i.serviceLocator.getUrl("project-plan-create"),n.idTemplate=undefined,$.create({url:t,data:JSON.stringify(n),dataType:"json",contentType:"application/json"}))}});
bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{getPlan:function(n){var t=this,i=t.serviceLocator.getUrl("project-plan-get");return $.read({url:i,data:n,dataType:"json",contentType:"application/json"})},getActivities:function(n){var t=this,i=t.serviceLocator.getUrl("project-plan-activities");return $.read({batchRequest:!0,url:i,data:n,dataType:"json"}).pipe(function(n){return n})},getWorkitemsPlan:function(n){var t=this,i=t.serviceLocator.getUrl("project-plan-workitems");return $.read({batchRequest:!0,url:i,data:n,dataType:"json"}).pipe(function(n){return n})},getTransitionsByPlan:function(n){var t=this,i=t.serviceLocator.getUrl("project-plan-transitions-get");return $.read({batchRequest:!0,url:i,data:n,dataType:"json",contentType:"application/json"}).pipe(function(n){return n})}});
bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{});
bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{getCaseAssignees:function(n){var t=this;return n=n||{},$.read(t.serviceLocator.getUrl("case-handler-getCaseAssignees"),{idCase:n.idCase}).pipe(function(n){return n})}});
bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{});
bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{getActivityMap:function(n){var i=this,r=i.serviceLocator.getUrl("activity-map"),t={};return n.radNumber?t.radNumber=n.radNumber:"",$.read({url:r,data:t})},getActivitySummary:function(n){var i=this,t={};return t.guidWorkitem=n.guidWorkitem,$.ajax({url:i.serviceLocator.getUrl("activity-map-getActivitySummary"),data:t,type:"GET",dataType:"json"})},getSubProcessMap:function(n){var i=this,r=i.serviceLocator.getUrl("subprocess-map"),t={};return n=n||{},n.radNumber?t.radNumber=n.radNumber:"",$.read({url:r,data:t})}});
bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{createPlanActivity:function(n){var t=this,i=t.serviceLocator.getUrl("project-plan-createactivity").replace("{idPlan}",n.idPlan);return $.create({url:i,data:JSON.stringify(n),dataType:"json",contentType:"application/json"})},changeTransitions:function(n){var t=this,i=t.serviceLocator.getUrl("project-plan-transitions-put");return $.update({url:i.replace("{idPlan}",n.idPlan),data:JSON.stringify(n.transitions),dataType:"json",contentType:"application/json"})},putExecutePlan:function(n){var t=this,i=t.serviceLocator.getUrl("project-plan-execute");return $.create({url:i,data:n,contentType:"application/x-www-form-urlencoded"})},updatePlan:function(n){var t=this,i=t.serviceLocator.getUrl("project-plan-update");return $.update({url:i.replace("{idPlan}",n.id),data:JSON.stringify(n),dataType:"json",contentType:"application/json"})},deleteActivityPlan:function(n){var t=this,i=t.serviceLocator.getUrl("project-plan-activity-delete");return $.destroy({url:i,data:n,dataType:"json",contentType:"application/json"})},closePlan:function(n){var t=this,i=t.serviceLocator.getUrl("project-plan-close");return $.create({url:i,data:n,contentType:"application/x-www-form-urlencoded"})}});
bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{getActivity:function(n){var t=this,i=t.serviceLocator.getUrl("project-plan-activity-get");return $.read({url:i,data:n,dataType:"json",contentType:"application/json"})}});
bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{});
bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{});
bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{getStartForm:function(n){var t=this;return $.create({url:t.serviceLocator.getUrl("actions-handler-getDataForm"),data:n})}});
bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{getEntityForm:function(n){var t=this;return n=n||{},$.create({url:t.serviceLocator.getUrl("actions-handler-getDataForm"),data:n})}});
bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{getActivitiesData:function(n){var i=this,r=i.serviceLocator.getUrl("process-handler-getActivitiesData"),t;return n=n||{},t={page:n.page||1,pagsize:n.pageSize||10},typeof n.idworkflow!="undefined"&&n.idworkflow&&(t.idWorkflow=n.idworkflow),typeof n.idCase!="undefined"&&n.idCase&&(t.idCase=n.idCase),$.read(r,t).then(function(n){return i.serializeEntityData(n)})},getPendingsData:function(n){var i=this,r=i.serviceLocator.getUrl("process-handler-getPendingsData"),t;return n=n||{},t={page:n.page||1,pagsize:n.pageSize||10},typeof n.idworkflow!="undefined"&&n.idworkflow&&(t.idWorkflow=n.idworkflow),typeof n.idCase!="undefined"&&n.idCase&&(t.idCase=n.idCase),typeof n.taskState!="undefined"&&n.taskState&&(t.taskState=n.taskState),$.read(r,t).then(function(n){return i.serializeEntityData(n)})},getActionsData:function(n){var i=this,t;return n=n||{},t={guidEntity:n.guidEntity,surrogateKey:n.surrogateKey},typeof n.idCase!="undefined"&&n.idCase&&(t.caseId=n.idCase),typeof n.tags!="undefined"&&n.tags&&(t.tags=n.tags),$.read({url:i.serviceLocator.getUrl("entities-handler-getActions"),data:t,batchRequest:!0})},getActionsEvents:function(n){var i=this,t;return n=n||{},t={caseId:n.caseId},$.read({url:i.serviceLocator.getUrl("process-handler-getActionsEvents"),data:t,batchRequest:!0}).then(function(n){for(var i=[],t=0,r=n.length;t<r;t++)n[t].reference=Math.guid(),n[t].isEvent=!0,i.push(n);return i})},getUsersCases:function(n){var i=this,t;return n=n||{},t={caseId:n.caseId},$.read({url:i.serviceLocator.getUrl("process-handler-getUsersCases"),data:t,batchRequest:!0}).pipe(function(n){return n})},getUsersData:function(n){var t=this;return $.read({url:t.serviceLocator.getUrl("project-users-get"),data:n||{},dataType:"json"})}});
bizagi.workportal.services.service.extend("bizagi.workportal.services.service",{},{getMultipleInstancesActions:function(n){var t=this,i={guidEntity:n.guidEntity};return $.ajax({url:t.serviceLocator.getUrl("sort-bar-getMultipleInstancesActions"),data:i,type:"GET",dataType:"json"})},getProcessAddAction:function(n){var t=this,i=t.serviceLocator.getUrl("action-handler-getProcessAddAction"),r={reference:n.args.reference,surrogateKey:n.args.surrogateKey};return function(n){return $.read(i,r).then(function(t){return $.extend(t,{referenceEntity:n})})}(n.args.reference)},executeAction:function(n){var t=this,i={actionGuid:n.actionGuid,guidEntity:n.guidEntity,mapping:JSON.stringify(n.mapping)};return $.ajax({url:t.serviceLocator.getUrl("sort-bar-execute"),data:i,type:"POST",dataType:"json"})}});
$.Class.extend("bizagi.workportal.desktop.widgets.dialog",{DIALOG_WIDTH:1080,DIALOG_HEIGHT:710},{init:function(n,t){this.dataService=n;this.workportalFacade=t;this.triggerCloseCallback=!0},renderWidget:function(n){function f(){$.when(u).then(function(t){return i=t,i.render(n)}).done(function(){var u=i.getContent();t.dialogBox.append(u).appendTo("body",e);n.widget=i||null;t.showDialogBox(t.dialogBox,n).done(function(){r.resolve()})})}var t=this,e=window.document,r=new $.Deferred,i,u;return n=n||{},t.dialogBox=n.dialogBox=$("<div />"),u=n.widgetInstance?n.widgetInstance:t.workportalFacade.getWidget(n.widgetName,n),n.guidForm?bizagi.loader.start("rendering").then(function(){f()}):f(),r.promise()},showDialogBox:function(n,t){var i=this,u=[],e=new $.Deferred,r=t.modalParameters||{},o=t.closeVisible==undefined?!0:t.closeVisible,s=t.closeOnEscape==undefined?!0:t.closeOnEscape,h=t.dialogClass==undefined?"":t.dialogClass,f;return u=o?[{text:bizagi.localization.getResource("workportal-widget-dialog-box-close"),click:function(){n.dialog("close");r.refreshInbox===!1||i.refreshInbox()}}]:[],t.buttons&&(t.buttons.length>0?u=$.merge(u,t.buttons):$.extend(u,u,t.buttons)),f=r.height||t.modalParameters&&i.getDialogSize(t.modalParameters.id).height||this.Class.DIALOG_HEIGHT,f=f>$(window).height()?$(window).height():f,n.dialog({widget:t.widget,show:r.show||"fade",width:r.width||t.modalParameters&&i.getDialogSize(t.modalParameters.id).width||this.Class.DIALOG_WIDTH,height:f,modal:!0,dialogClass:h,closeOnEscape:s,draggable:!1,title:r.title||"",maximize:typeof t.maximize!="undefined"?t.maximize:!0,maximized:t.maximized!==undefined?t.maximized:!1,maximizeOnly:t.maximizeOnly!==undefined?t.maximizeOnly:!1,buttons:u,resizable:t.modalParameters&&i.getResizableState(t.modalParameters.id)||!1,close:function(){typeof t.widget!="undefined"&&typeof t.widget.dispose!="undefined"&&(t.avoidDispose||t.widget.dispose());n.dialog("destroy");n.remove();e.resolve();t.onClose&&i.triggerCloseCallback&&t.onClose()},open:function(){t.modalParameters&&i.getDialogSize(t.modalParameters.id).maximize&&(i.getDialogSize(t.modalParameters.id).maximizeOnly&&n.dialog("option",{maximizeOnly:!0}),n.dialog("maximize"));r.dialogOpened&&r.dialogOpened.resolve({widgetReference:t.widget})}}),e.promise()},refreshInbox:function(){var n,u=$.isFunction(bizagi.cookie)?bizagi.cookie("bizagiDefaultWidget"):i,r=bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX,t=bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL,i=bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID;switch(u){case r:n=r;break;case t:n=t;break;case i:n=i;break;default:n=t}return $(document).triggerHandler("changeWidget",{widgetName:n})},close:function(){this.triggerCloseCallback=!1;this.dialogBox.dialog("close")},getResizableState:function(n){n=n||"";var t;switch(n){case"EntityAdmin":t=!0;break;default:t=!1}return t},getDialogSize:function(n){n=n||"";var t={height:this.Class.DIALOG_HEIGHT,width:this.Class.DIALOG_WIDTH,maximize:!1,maximizeOnly:!1};switch(n){case"BAMProcess":case"BAMTask":case"AnalyticsProcess":case"AnalyticsTask":case"AnalyticsSensor":case"GRDimensionAdmin":t.maximizeOnly=!0;t.width=this.Class.DIALOG_WIDTH+220;case"BusinessPolicies":case"ResourceBAM":t.maximize=!0;break;case"UserAdmin":t.height=this.Class.DIALOG_HEIGHT+100;break;case"AsynchronousWorkitemRetries":t.width=this.Class.DIALOG_WIDTH+200;break;case"AdhocProcessAdmin":t.maximize=!0}return t}});bizagi.injector.register("dialogWidgets",["dataService","workportalFacade",bizagi.workportal.desktop.widgets.dialog]);
$.Class.extend("bizagi.workportal.desktop.facade",{getWidgetImplementation:function(n){return typeof bizagi.workportal.widgets=="undefined"||typeof bizagi.workportal.widgets.widget=="undefined"?"":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX?"bizagi.workportal.widgets.inbox":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOME?"bizagi.workportal.widgets.home":n.toUpperCase()==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL.toUpperCase()?"bizagi.workportal.widgets.homeportal":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ACTIVITY?"bizagi.workportal.widgets.project.activity":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROJECT_DASHBOARD?"bizagi.workportal.widgets.homeportal":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADVANCE_SEARCH?"bizagi.workportal.widgets.advanceSearch":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID?"bizagi.workportal.widgets.inboxGrid":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ROUTING?"bizagi.workportal.widgets.routing":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_RENDER?bizagi.override.enableProjectDashboard?"bizagi.workportal.widgets.project.activity":"bizagi.workportal.widgets.render":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_START_FORM?"bizagi.workportal.widgets.startForm":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_NEWCASE?"bizagi.workportal.widgets.newCase":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SUBMENU?"bizagi.workportal.widgets.subMenu":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ASYNC?"bizagi.workportal.widgets.async":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERIES?"bizagi.workportal.widgets.queries":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERIES_DEFINITION?"bizagi.workportal.widgets.queries.definition":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERIES_SHORTCUT?"bizagi.workportal.widgets.queries.shortcut":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERYFORM?"bizagi.workportal.widgets.queryform":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME?"bizagi.workportal.widgets.genericiframe":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SEARCH?"bizagi.workportal.widgets.search":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_FOLDERS?"bizagi.workportal.widgets.folders":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PRINT?"bizagi.workportal.widgets.print":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_FONTSIZE?"bizagi.workportal.widgets.fontsize":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_OLDRENDERINTEGRATION?"bizagi.workportal.widgets.oldrenderintegration":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PAGE?"bizagi.workportal.widgets.page":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ENTITIES?"bizagi.workportal.widgets.entities":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_RENDERFORM?"bizagi.workportal.widgets.renderform":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_REPORTS?"bizagi.workportal.widgets.reports":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_REPORTS_MENU?"bizagi.workportal.widgets.reportsMenu":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_REPORTS_CHART?"bizagi.workportal.widgets.reportsChart":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SMARTFOLDERS?"bizagi.workportal.widgets.smartfolders":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_CASES?"bizagi.workportal.widgets.admin.cases":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ASYNCECM_UPLOAD?"bizagi.workportal.widgets.asyncecm.upload":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ACTIVITY_LOG?"bizagi.workportal.widgets.activity.log":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_AUTHENTICATION_LOG?"bizagi.workportal.widgets.authentication.log":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ENCRYPT_PASSWORDS?"bizagi.workportal.widgets.admin.encrypt.passwords":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_REQUESTS?"bizagi.workportal.widgets.admin.users.requests":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_CASE_SEARCH?"bizagi.workportal.widgets.admin.caseSearch":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_HOLIDAYS?"bizagi.workportal.widgets.admin.holidays":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_PROJECTNAME?"bizagi.workportal.widgets.admin.projectName":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_OAUTH2APPLICATIONS?"bizagi.workportal.widgets.admin.oauth2Applications":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROCESS_TREE?"bizagi.workportal.widgets.processtree":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ENTITIES_TREE?"bizagi.workportal.widgets.entitiestree":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_USERS_TABLE?"bizagi.workportal.widgets.userstable":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_DEFAULTS_ASSIGNATION_USER?"bizagi.workportal.widgets.admin.defaults.assignation.user":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_PROFILES?"bizagi.workportal.widgets.admin.user.profiles":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ASYNC_ACTIVITIES?"bizagi.workportal.widgets.admin.async.activities":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ALARMS?"bizagi.workportal.widgets.admin.alarms":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_LICENSES?"bizagi.workportal.widgets.admin.user.licenses":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_DIMENSIONS?"bizagi.workportal.widgets.admin.dimensions":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_DOCUMENT_TEMPLATES?"bizagi.workportal.widgets.admin.document.templates":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_PROCESSES?"bizagi.workportal.widgets.admin.processes":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES?"bizagi.workportal.widgets.admin.business.policies":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_DECISION_TABLE?"bizagi.workportal.widgets.admin.business.policies.decision.table":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_RULES?"bizagi.workportal.widgets.admin.business.policies.rules":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_TABS?"bizagi.workportal.widgets.admin.business.policies.tabs":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_POLITICS?"bizagi.workportal.widgets.admin.business.policies.politics":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_VOCABULARIES?"bizagi.workportal.widgets.admin.business.policies.vocabularies":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_TREE?"bizagi.workportal.widgets.tree":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_LANGUAGE?"bizagi.workportal.widgets.admin.language":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ENTITIES?"bizagi.workportal.widgets.admin.entities":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GRAPHIC_QUERY?"bizagi.workportal.widgets.graphicquery":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_REASSIGN_CASE?"bizagi.workportal.widgets.reassigncase":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_ADMINISTRATION?"bizagi.workportal.widgets.admin.usersAdministration":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_STAKEHOLDERS?"bizagi.workportal.widgets.admin.stakeholders":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_PREFERENCES?"bizagi.workportal.widgets.admin.preferences":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_START_PROCESS?"bizagi.workportal.widgets.createcase":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROJECT_PROCESS_MAP?"bizagi.workportal.widgets.project.processMap":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROJECT_PROCESS_DIAGRAM_HELPER?"bizagi.workportal.widgets.project.processDiagram.helper":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROJECT_ACTIVITY_MAP_TOOLTIP?"bizagi.workportal.widgets.project.activityMap.tooltip":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROJECT_USERSUMMARY?"bizagi.workportal.widgets.usersummary":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_MYSEARCHLIST?"bizagi.workportal.widgets.mySearchList":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_LOADFORM?"bizagi.workportal.widgets.loadForm":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_TEMPLATE_ENGINE?"bizagi.workportal.widgets.templates":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_DIALOGNAV?"bizagi.workportal.widgets.dialognav":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROCESS_MODELER_VIEW?"bizagi.workportal.widgets.processmodeler":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_PROCESSES?"bizagi.workportal.widgets.admin.adhoc.processes":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_ENTITIES?"bizagi.workportal.widgets.admin.adhoc.entities":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_USER_GROUPS?"bizagi.workportal.widgets.admin.adhoc.usergroup":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_BOOLEAN_EXP?"bizagi.workportal.widgets.admin.adhoc.booleanexp":n==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADHOC_CREATE_PROCESS?"bizagi.workportal.widgets.adhoc.create.process":null}},{init:function(n,t){this.templates={};this.workportal=n;this.dataService=t;this.getWorkPortalVersion();bizagi.injector.registerInstance("workportalFacade",this)},getWorkportal:function(){return this.workportal},initAsyncStuff:function(n){var t=this,i,r;return bizagi.enableCustomizations?(i=function(){return bizagi.templateService.loadCustomTemplates().pipe(function(i){return n?t.loadTemplates():i})},r=function(){return bizagi.util.loadFile({src:bizagi.getJavaScript("bizagi.workportal.desktop.overrides"),type:"js"})},$.when(i(),this.loadPersonalizedTheme(),r()).done(function(){bizagi.util.loadFile({src:bizagi.getStyleSheet("bizagi.overrides.desktop.custom.styles"),type:"css"})})):n?$.when(t.loadTemplates()):null},loadTemplates:function(){var n=this,t=new $.Deferred;return $.when(n.loadTemplate("workportal",bizagi.getTemplate("bizagi.workportal.desktop")),n.loadTemplate("workportal.notCompatibleIE",bizagi.getTemplate("bizagi.workportal.desktop.notCompatibleIE")),n.loadTemplate("menu",bizagi.getTemplate("bizagi.workportal.desktop.menu")+"#ui-bizagi-workportal-widget-menu"),n.loadTemplate("menu.custom-button",bizagi.getTemplate("bizagi.workportal.desktop.menu")+"#ui-bizagi-workportal-widget-menu-custom-button"),n.loadTemplate("menu.security",bizagi.getTemplate("bizagi.workportal.desktop.menu")+"#ui-bizagi-workportal-widget-menu-permissions"),n.loadTemplate("menu.submenu",bizagi.getTemplate("bizagi.workportal.desktop.menu")+"#ui-bizagi-workportal-widget-menu-submenu"),n.loadTemplate("menu.submenu.container",bizagi.getTemplate("bizagi.workportal.desktop.menu")+"#ui-bizagi-workportal-widget-menu-submenu"),n.loadTemplate("menu.submenu.list",bizagi.getTemplate("bizagi.workportal.desktop.menu")+"#ui-bizagi-workportal-widget-menu-submenu-list"),n.loadTemplate("popup",bizagi.getTemplate("bizagi.workportal.desktop.popup")),n.loadTemplate("menu.modal.widgets",bizagi.getTemplate("bizagi.workportal.desktop.menu.modal.widgets")),n.loadTemplate("menu.modal.user",bizagi.getTemplate("bizagi.workportal.desktop.menu.modal.user")),n.loadTemplate("menu.modal.about",bizagi.getTemplate("bizagi.workportal.desktop.menu.modal.about")),n.loadTemplate("inbox-common-pagination-grid",bizagi.getTemplate("bizagi.workportal.desktop.widget.inbox.common")+"#ui-bizagi-workportal-widget-inbox-common-pagination-grid"),n.loadTemplate("inbox-common-pagination-inbox",bizagi.getTemplate("bizagi.workportal.desktop.widget.inbox.common")+"#ui-bizagi-workportal-widget-inbox-common-pagination-inbox"),n.loadTemplate("inbox-common-header",bizagi.getTemplate("bizagi.workportal.desktop.widget.inbox.common")+"#ui-bizagi-workportal-widget-inbox-common-header"),n.loadTemplate("inbox-common-header-folders",bizagi.getTemplate("bizagi.workportal.desktop.widget.inbox.common")+"#ui-bizagi-workportal-widget-inbox-folders"),n.loadTemplate("inbox-common-case-summary-oldrender",bizagi.getTemplate("bizagi.workportal.desktop.widget.inbox.common")+"#ui-bizagi-workportal-widget-inbox-common-oldrender"),n.loadTemplate("loadForm",bizagi.getTemplate("bizagi.workportal.desktop.widget.loadForm")+"#ui-bizagi-workportal-widget-loadForm"),n.loadTemplate("print-frame",bizagi.getTemplate("bizagi.workportal.desktop.widget.print")+"#bz-wp-widget-print-frame"),n.loadTemplate("print-frame-header",bizagi.getTemplate("bizagi.workportal.desktop.widget.print")+"#bz-wp-widget-print-frame-header"),n.loadTemplate("render",bizagi.getTemplate("bizagi.workportal.desktop.widget.render")+"#ui-bizagi-workportal-widget-render"),n.loadTemplate("search",bizagi.getTemplate("bizagi.workportal.desktop.widget.search")+"#ui-bizagi-workportal-widget-search"),n.loadTemplate("info-message",bizagi.getTemplate("common.bizagi.desktop.info-message")),n.loadTemplate("bizagi.workportal.desktop.upload.dialog",bizagi.getTemplate("bizagi.workportal.desktop.upload.dialog")),n.loadTemplate("bizagi.workportal.desktop.fileupload.form",bizagi.getTemplate("bizagi.workportal.desktop.fileupload.form"))).done(function(){t.resolve()}),t.promise()},loadTemplate:function(n,t){var i=this;return bizagi.templateService.getTemplate(t).done(function(t){i.templates[n]=t})},loadTemplateWebpart:function(n,t){var i=this;return bizagi.templateService.getTemplateWebpart(t).done(function(t){i.templates[n]=t})},getTemplate:function(n){var t=this;return t.templates[n]},getMainController:function(){return new bizagi.workportal.controllers.main(this,this.dataService)},getMenuController:function(){return new bizagi.workportal.controllers.menu(this,this.dataService)},getWorkareaController:function(){return new bizagi.workportal.controllers.workarea(this,this.dataService)},getWidget:function(n,t){var f=this,e=this.Class.getWidgetImplementation(n),i,r,u;if(e)try{return i="var baDynamicFn = function(facade, dataService, params){ \r\n",i+="return new "+e+"(facade, dataService, params);\r\n",i+="}\r\n",i+="baDynamicFn",i=eval(i),i(this,this.dataService,t)}catch(o){}else if(r=new $.Deferred,u=bizagi.getWebpart(n),u)return $.when(bizagi.util.initWebpart(u)).done(function(){r.resolve(new bizagi.workportal.widgets.webpart(f,f.dataService,$.extend(t,{webpart:n})))}),r.promise();return bizagi.log(n+" widget not supported",t,"error"),null},getAction:function(n,t){return n==bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING?new bizagi.workportal.actions.routing(this,this.dataService,t):n==bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_SEARCH?new bizagi.workportal.actions.search(this,this.dataService,t):(bizagi.log(n+" action not supported",t,"error"),null)},loadWebpart:function(n){var r=this,i=new $.Deferred,u=n.webpart,t=bizagi.getWebpart(u);return t||bizagi.webparts.addConfigurationMessage(n,"bizagi-sharepoint-loading-webpart-error"),$.when(bizagi.util.initWebpart(t)).done(function(){$.when.apply(this,$.map(t.tmpl,function(n){return r.loadTemplateWebpart(n.originalAlias,bizagi.getTemplate(n.alias,!0))})).done(function(){i.resolve()})}),i.promise()},getWebpart:function(n,t){var u=bizagi.getWebpart(n),r=u["class"],i;if(r)try{return i="var baDynamicFn = function(facade, dataService, params){ \r\n",i+="return new "+r+"(facade, dataService, params);\r\n",i+="}\r\n",i+="baDynamicFn",i=eval(i),i(this,this.dataService,t)}catch(f){bizagi.log(f)}return bizagi.log(n+" webpart not supported",t,"error"),null},loadPersonalizedTheme:function(){var n=this;typeof Windows=="undefined"&&$.when(n.dataService.getCurrentTheme()).done(function(n){var i,r,t,u,f;if(n=n||[],bizagi.themeLogo=n.logo||"img/img/barra/logo-bizagi.svg",$("#ui-bizagi-wp-app-menu-logo-client img").attr("src",bizagi.themeLogo),n.css){for(i=$('head link [rel="stylesheet"]'),t=0;t<i.length;t++)if(u=$(i[t]).attr("href"),f=u.indexOf("bizagi.custom.styles.css"),f!=-1){r=$(i[t]);break}r?$('<style id="bizagi-theme">'+n.css+"<\/style>").insertBefore(r):$("head").append('<style id="bizagi-theme">'+n.css+"<\/style>")}})},getWorkPortalVersion:function(){var n=this;bizagi.setWorkPortalVersion(bizagi.loader.version)}});
bizagi.workportal=bizagi.workportal||{};bizagi.workportal.currentInboxView||(bizagi.workportal.currentInboxView="inbox");bizagi.workportal.state=bizagi.workportal.state||{};$.Class.extend("bizagi.workportal.facade",{},{init:function(n){this.deviceFactory=new bizagi.workportal.device.factory(this);this.dataService=new bizagi.workportal.services.service(n);this.dataService.routing=new bizagi.workportal.services.routing({dataService:this.dataService});this.defaultParams=n||{};this.timeoutID},loadDefaultWidget:function(){var n,t;this.defaultWidget||bizagi.util.isEmpty(window.location.hash)||(n=bizagi.util.getHashParams(),n[0]!="/"&&(this.defaultWidget=n[0]));this.defaultWidget||bizagi.util.isEmpty(window.location.search)||(t=bizagi.util.getQueryString(),t.widget!=="activityform"&&this.defaultParams.widget!=="activityform"||bizagi.util.isMobileDevice()?this.defaultWidget=t.widget:(this.defaultWidget="projectDashboard",this.defaultParams.caseLink=!0));this.defaultWidget||bizagi.util.isEmpty(this.defaultParams.widget)||(this.defaultWidget=this.defaultParams.widget);this.defaultWidget||typeof BIZAGI_DEFAULT_WIDGET=="undefined"||bizagi.util.isEmpty(BIZAGI_DEFAULT_WIDGET)||(this.defaultWidget=BIZAGI_DEFAULT_WIDGET);!this.defaultWidget&&bizagi.cookie("bizagiDefaultWidget")&&(this.defaultWidget=bizagi.cookie("bizagiDefaultWidget"));this.defaultWidget||(this.defaultWidget=bizagi.util.detectDevice()=="smartphone_ios"||bizagi.util.detectDevice()=="smartphone_android"?bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID);this.defaultWidget!=="projectDashboard"&&this.defaultWidget!=="homeportal"&&bizagi.cookie("bizagiDefaultWidget",this.defaultWidget,{expires:30});this.defaultWidget==="homeportal"&&bizagi.cookie("bizagiDefaultWidget",bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID,{expires:30});this.dataService&&!this.dataService.online&&bizagi.util.isTabletDevice()&&bizagi.cookie("bizagiDefaultWidget",bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX,{expires:30})},execute:function(n){var t=this,r=this.ownerDocument,i=$("body",r);return n=n||$("<div/>").appendTo(i),t.loadDefaultWidget(),t.executionDeferred=new $.Deferred,t.process().done(function(r){bizagi.util.replaceSelector(i,n,r);t.executionDeferred.resolve()})},createWebpart:function(n){return this.executeWebpart($.extend(n,{creating:!0}))},testWebpartConfiguration:function(n){var u=this,t=n.webpartConfiguration,i=this.ownerDocument,r=$("body",i),f=n.canvas||$("<div/>").appendTo(r);return!t.url||t.url==""?(bizagi.webparts.addConfigurationMessage(n,"bizagi-sharepoint-configuration-error"),!1):!0},executeWebpart:function(n){var t=this,r=this.ownerDocument,u=$("body",r),f=n.canvas||$("<div/>").appendTo(u),i=!0;return n.webpartConfiguration&&(i=t.testWebpartConfiguration(n)),i?t.processWebpart(n).done(function(n){f.append(n.content)}):void 0},ready:function(){return this.executionDeferred.promise()},process:function(){var n=this,t=new $.Deferred,i=this.deviceFactory.getWorkportalFacade(n.dataService);return n.processOfflineData(),$.when(i).pipe(function(t){return n.processWorkportal(t)}).done(function(n){t.resolve(n)}),t.promise()},processOfflineData:function(){var n=this;typeof n.dataService.fetchOfflineData!="undefined"&&n.dataService.online==!0&&$.when(n.dataService.pushOfflineData()).always(function(){n.dataService.fetchOfflineData()})},processWebpart:function(n){var u=this,i,r=new $.Deferred,t,f=bizagi.detectRealDevice();return i=this.deviceFactory.getWorkportalFacade(u.dataService,!1),$.extend(n,this.defaultParams),$.when(i).pipe(function(t){var i=new $.Deferred;return $.when(t.loadWebpart(n)).done(function(){i.resolve(t)}),i.promise()}).pipe(function(i){return t=i.getWebpart(n.webpart,n),t.render(n)}).done(function(n){r.resolve({webpart:t,content:n})}),r.promise()},processWorkportal:function(n){var i=this,t=this.mainController=n.getMainController(),r=new $.Deferred;return t.render().then(function(n){return $.when(t.menu.isRendered()).then(function(){var n=i.getWidgetByDataUser(i.defaultParams),r;n==="projectDashboard"&&i.defaultParams.caseLink?(r={action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:bizagi.util.getQueryString().idCase,guid:bizagi.util.getQueryString().guid,caseLink:!0},typeof bizagi.util.getQueryString().idWorkitem!="undefined"&&(r.idWorkItem=bizagi.util.getQueryString().idWorkitem),t.publish("executeAction",r)):t.setWidget($.extend(i.defaultParams,{widgetName:n},bizagi.util.getQueryString()));t.menu&&(t.menu.performResizeLayout(),(n===bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX||n===bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID)&&i.mainController.publish("showMainMenu"))}),n})},getWidgetByDataUser:function(){var t=this,i=bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID,u=t.defaultWidget!=="projectDashboard"?bizagi.cookie("bizagiDefaultWidget"):"projectDashboard",n="",r,f;if(bizagi.currentUser.sUserProperties)for(r=0,f=bizagi.currentUser.sUserProperties.length;r<f;r++)if(bizagi.currentUser.sUserProperties[r].key==="userstartpage"){n=bizagi.currentUser.sUserProperties[r];break}return u!=bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX&&u!=bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID&&u!=bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL?i=u:typeof n=="undefined"||n===""||n.value===""||n.value==="1"?i=t.getWidgetByCookieAndStakeholders():n.value==="2"&&t.currentUserHaveStakeholderAssociated()?i=bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL:n.value!=="2"||t.currentUserHaveStakeholderAssociated()?n.value==="3"&&(i=t.getWidgetByCookie(!0)):i=t.getWidgetByCookie(!0),i},getWidgetByCookieAndStakeholders:function(){var n=this;return n.getWidgetByCookie(!1)},currentUserHaveStakeholderAssociated:function(){return bizagi.currentUser.associatedStakeholders&&bizagi.currentUser.associatedStakeholders.length>0},getWidgetByCookie:function(n){var i=this,t=bizagi.cookie("bizagiDefaultWidget");return n?t===bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX||t===bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID?t:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID:i.currentUserHaveStakeholderAssociated()?bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL:t&&t===bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX||t===bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID?t:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID},getMainController:function(){return this.mainController}});
$.Class.extend("bizagi.workportal.observable",{},{init:function(){this.observableElement=$({})},sub:function(n){var t=$._data(this.observableElement[0],"events");t&&t[n]||this.observableElement.on.apply(this.observableElement,arguments)},unsub:function(){this.observableElement.off.unbind?this.observableElement.off.unbind.apply(this.observableElement,arguments):this.observableElement.off.apply(this.observableElement,arguments)},pub:function(){return this.observableElement.triggerHandler.apply(this.observableElement,arguments)}});
bizagi.workportal.observable.extend("bizagi.workportal.widgets.manager",{createCase:"bizagi.workportal.widgets.createcase",updateForm:"bizagi.workportal.widgets.updateform"},{init:function(n,t,i,r){var u=this;u._super();u._facade=n||null;u._dataService=t||null;u._notify=i;u._widgets={};u._innerWidgets={};u._mainWidgets={};u._context="none";u._layouts=[];u._supportNav=r&&r.supportNav},_notifyChange:function(n,t){var i=this;if(t.type=="navigate")i.updateView(t.args);else return i.pub("notifyChange",t)},_showDialogWidget:function(n,t){var i=this,r=new $.Deferred,f=i.Class[t.widgetName],u=new bizagi.workportal.desktop.widgets.dialog(i._dataService,i._facade);return t.widgetInstance=i._createWidgetInstance(f,t),t.widgetInstance.sub("closeDialog",function(n,t){u.close();r.resolve(t)}),u.renderWidget(t),r.promise()},_showNotification:function(n,t){var i=this,r=t.type;r=="message"?i._notify.showSucessMessage(t.message,t.title,t.options):r=="error"&&i._notify.showErrorMessage(t.message,t.title,t.options)},_render:function(n,t,i){var f=this,e=f._widgets[n],r=e.widget[t],u=e.canvas,o=new $.Deferred;if(i||!r.isRendered()||!r.getContent().is(":visible"))return u.empty(),$(u).startLoading(),r.clean(),$.when(r.render()).pipe(function(n){return f._renderInnerWidgets(r,n)}).done(function(n){$(u).endLoading();u.append(n);o.resolve()}),o.promise()},_renderInnerWidgets:function(n,t){var r=new $.Deferred,u=[],f,i;for(f in n.innerWidgets)i=n.innerWidgets[f],i.clean(),u.push($.when(i.render(),i.canvas).done(function(n,i){var r=t.find('.ui-bizagi-layout[layout="'+i+'"]');r.length==0&&(r=t.closest('.ui-bizagi-layout[layout="'+i+'"]'));r.empty();r.append(n)}));return $.when.apply($,u).done(function(){r.resolve(t)}),r.promise()},_createWidgetInstance:function(n,t,i){var r=this,u=i?bizagi.injector.getNewInstance(n,t):bizagi.injector.get(n,t);return u.sub("notify",$.proxy(r._notifyChange,r)),u.sub("showDialogWidget",$.proxy(r._showDialogWidget,r)),u.sub("showNotification",$.proxy(r._showNotification,r)),u},_changeWidget:function(n){var t=this,r=n.layout,i=n.widgetName,o=n.refresh,e=n.args,f=t._widgets[r],s=n.newInstance||!1,u;return f.widget[i]?t._innerWidgets[r]&&(u=f.widget[i],t._createInnerWidgets(r,u,e)):(u=t._createWidgetInstance(i,e,s),t._createInnerWidgets(r,u,e),f.widget[i]=u),f.active=i,t._render(r,i,o)},_createInnerWidgets:function(n,t,i){for(var u,r,e=this,s=e._innerWidgets[n]||[],f=t.innerWidgets||{},o=0,h=s.length;o<h;o++)u=s[o],r=f[u.canvas],r?(r.clean(),r=e._createWidgetInstance(u.widgetName,i,!0),r.canvas=u.canvas,f[u.canvas]=r):(r=e._createWidgetInstance(u.widgetName,i),r.canvas=u.canvas,f[u.canvas]=r);t.innerWidgets=f},_supportNavigation:function(){return this._supportNav},_setContext:function(n){this._context=n},_isSameContext:function(n){var t=this;return t._context==n},emit:function(n){var h=this,f=h._widgets,u=[],e=n.context,o,i,r,t,s;for(o in f)if(i=f[o],!$.isEmptyObject(i.widget)){r=i.widget[i.active];t=r.pub(e,n);typeof t!="undefined"&&u.push(t);for(s in r.innerWidgets)t=r.innerWidgets[s].pub(e,n),typeof t!="undefined"&&u.push(t)}return u},emitNavigate:function(n){var r=this,i=r._widgets.navigator,u=n.args||{},t;i&&(t=i.widget[i.active],t&&!u.isRefresh&&$.when(t.isRendered()).done(function(){t.pub("NAVIGATE",n)}))},_searchWidgets:function(n){var i=this,u,t,r;delete i._innerWidgets;i._innerWidgets={};delete i._mainWidgets;i._mainWidgets={};for(u in n)t=n[u],i._layouts.indexOf(t.layout)==-1?(r=n[t.layout],i._innerWidgets[r.layout]=i._innerWidgets[r.layout]||[],i._innerWidgets[r.layout].push({widgetName:t.name,canvas:t.canvas,refresh:t.refresh==undefined?!0:t.refresh})):i._mainWidgets[t.layout]={widgetName:t.name,refresh:t.refresh==undefined?!0:t.refresh,newInstance:t.newInstance==undefined?!1:t.newInstance}},updateView:function(n){var t=this,e=n.data,r=n.context,i=n.args||{},u=new $.Deferred,o=e.widgets,f;return t._isSameContext(r)&&!i.refreshAllWidgets?(n.args.refreshAllWidgets=undefined,f=t.emit(n),!i.stopNavigation&&t._supportNavigation()&&t.emitNavigate(n),f):(t._searchWidgets(o),$.when.apply($,$.map(t._mainWidgets,function(n,r){return t._changeWidget({layout:r,widgetName:n.widgetName,refresh:n.refresh,newInstance:n.newInstance,args:i})})).done(function(){t.emit(n);t._supportNavigation()&&t.emitNavigate(n);u.resolve()}),t._setContext(r),u.promise())},setLayout:function(n){var t=this,u,r,f,i;for(t._context="none",t._widgets={},u=t.getLayouts(n)||[],r=0,f=u.length;r<f;r++)i=u[r],t._widgets[i.name]={widget:{},canvas:i.layout,layout:i.name},t._layouts.push(i.name)},getLayouts:function(n){return $.map($(".ui-bizagi-layout[layout]",n),function(n){return{name:$(n).attr("layout"),layout:$(n)}})},dispose:function(){var n=this},clean:function(){var i=this,r,t,u,n,f;for(r in i._widgets){t=i._widgets[r].widget;for(u in t){n=t[u];for(f in n.innerWidgets)n.innerWidgets[f].clean();n.clean()}}}});bizagi.injector.register("widgetManager",["workportalFacade","dataService","notifier",bizagi.workportal.widgets.manager]);
$.Class.extend("bizagi.workportal.device.factory",{},{init:function(n){this.device=bizagi.util.detectDevice();this.workportal=n;this.cachedFacade=null},getWorkportalFacade:function(n,t){var i=this,r=new $.Deferred;return t=typeof t!="undefined"?t:!0,i.cachedFacade!=null?r.resolve(i.cachedFacade):this.device=="desktop"?$.when(i.getDesktopWorkportalFacade(n,t)).done(function(n){i.cachedFacade=n;r.resolve(n)}):this.device=="tablet"||this.device=="tablet_ios"||this.device=="tablet_android"?$.when(i.getTabletWorkportalFacade(n,t)).done(function(n){i.cachedFacade=n;r.resolve(n)}):this.device=="smartphone_ios"||this.device=="smartphone_android"?$.when(i.getSmartphoneWorkportalFacade(n,t)).done(function(n){i.cachedFacade=n;r.resolve(n)}):(alert("Not supported device: "+this.device),r.resolve("")),r.promise()},getDesktopWorkportalFacade:function(n,t){var i=$.Deferred(),r=new bizagi.workportal.desktop.facade(this.workportal,n);return $.when(r.initAsyncStuff(t)).done(function(){i.resolve(r)}),i.promise()},getTabletWorkportalFacade:function(n){var t=new $.Deferred,i=new bizagi.workportal.tablet.facade(this.workportal,n);return i.initAsyncStuff().done(function(){t.resolve(i)}),t.promise()},getSmartphoneWorkportalFacade:function(n){var t=new $.Deferred,i=new bizagi.workportal.smartphone.facade(n);return i.initAsyncStuff().done(function(){t.resolve(i)}),t.promise()},getDataService:function(){return this.dataService}});
(function(n){function c(t){var i,u,f;window.DOMParser==undefined&&window.ActiveXObject&&(DOMParser=function(){},DOMParser.prototype.parseFromString=function(n){var t=new ActiveXObject("Microsoft.XMLDOM");return t.async="false",t.loadXML(n),t});try{if(i=(new DOMParser).parseFromString(t,"text/xml"),n.isXMLDoc(i)){if(u=n("parsererror",i),u.length==1)throw"Error: "+n(i).text();}else throw"Unable to parse XML";return i}catch(r){return f=r.name==undefined?r:r.name+": "+r.message,n(document).trigger("xmlParseError",[f]),undefined}}function f(t,i,r){(t.context?n(t.context):n.event).trigger(i,r)}function e(t,i){var r=!0;return typeof i=="string"?n.isFunction(t.test)?t.test(i):t==i:(n.each(t,function(u){if(i[u]===undefined)return r=!1;r=typeof i[u]=="object"?r&&e(t[u],i[u]):n.isFunction(t[u].test)?r&&t[u].test(i[u]):r&&t[u]==i[u]}),r)}function l(t,i){if(n.isFunction(t))return t(i);if(n.isFunction(t.url.test)){if(!t.url.test(i.url))return null}else{var r=t.url.indexOf("*");if(t.url!==i.url&&r===-1||!new RegExp(t.url.replace(/[-[\]{}()+?.,\\^$|#\s]/g,"\\$&").replace(/\*/g,".+")).test(i.url))return null}return t.data&&i.data&&!e(t.data,i.data)?null:t&&t.type&&t.type.toLowerCase()!=i.type.toLowerCase()?null:t}function a(t,i,u){var f=function(r){return function(){return function(){var r;this.status=t.status;this.statusText=t.statusText;this.readyState=4;n.isFunction(t.response)&&t.response(u);t.mockjson&&(t.responseText=n.mockJSON.generateFromTemplate(JSON.parse(t.responseText)));n.isFunction(t.transform)&&(t.responseText=t.transform(t.responseText,u));i.dataType=="json"&&typeof t.responseText=="object"?this.responseText=JSON.stringify(t.responseText):i.dataType=="xml"?typeof t.responseXML=="string"?(this.responseXML=c(t.responseXML),this.responseText=t.responseXML):this.responseXML=t.responseXML:this.responseText=t.responseText;(typeof t.status=="number"||typeof t.status=="string")&&(this.status=t.status);typeof t.statusText=="string"&&(this.statusText=t.statusText);r=this.onreadystatechange||this.onload;n.isFunction(r)?(t.isTimeout&&(this.status=-1),r.call(this,t.isTimeout?"timeout":undefined)):t.isTimeout&&(this.status=-1)}.apply(r)}}(this);t.mockjson&&(t.proxy=t.mockjson,t.proxyDataType="text");t.proxy?r({global:!1,url:t.proxy,type:t.proxyType,data:t.data,dataType:t.proxyDataType||(i.dataType==="script"?"text/plain":i.dataType),complete:function(n){t.responseXML=n.responseXML;t.responseText=n.responseText;t.status=n.status;t.statusText=n.statusText;this.responseTimer=setTimeout(f,t.responseTime||0)}}):i.async===!1?f():this.responseTimer=setTimeout(f,t.responseTime||50)}function v(t,i,r,u){return t=n.extend(!0,{},n.mockjaxSettings,t),typeof t.headers=="undefined"&&(t.headers={}),t.contentType&&(t.headers["content-type"]=t.contentType),{status:t.status,statusText:t.statusText,readyState:1,open:function(){},send:function(){u.fired=!0;a.call(this,t,i,r)},abort:function(){clearTimeout(this.responseTimer)},setRequestHeader:function(n,i){t.headers[n]=i},getResponseHeader:function(n){return t.headers&&t.headers[n]?t.headers[n]:n.toLowerCase()=="last-modified"?t.lastModified||(new Date).toString():n.toLowerCase()=="etag"?t.etag||"":n.toLowerCase()=="content-type"?t.contentType||"text/plain":void 0},getAllResponseHeaders:function(){var i="";return n.each(t.headers,function(n,t){i+=n+": "+t+"\n"}),i}}}function y(n,t,r){var f;if(p(n),n.dataType="json",n.data&&i.test(n.data)||i.test(n.url)){b(n,t,r);var u=/^(\w+:)?\/\/([^\/?#]+)/.exec(n.url),e=u&&(u[1]&&u[1]!==location.protocol||u[2]!==location.host);if(n.dataType="script",n.type.toUpperCase()==="GET"&&e)return f=w(n,t,r),f?f:!0}return null}function p(n){n.type.toUpperCase()==="GET"?i.test(n.url)||(n.url+=(/\?/.test(n.url)?"&":"?")+(n.jsonp||"callback")+"=?"):n.data&&i.test(n.data)||(n.data=(n.data?n.data+"&":"")+(n.jsonp||"callback")+"=?")}function w(t,i,r){var u=r&&r.context||t,f=null;return i.response&&n.isFunction(i.response)?i.response(r):typeof i.responseText=="object"?n.globalEval("("+JSON.stringify(i.responseText)+")"):n.globalEval("("+i.responseText+")"),o(t,u,i),s(t,u,i),n.Deferred&&(f=new n.Deferred,typeof i.responseText=="object"?f.resolveWith(u,[i.responseText]):f.resolveWith(u,[n.parseJSON(i.responseText)])),f}function b(n,t,r){var f=r&&r.context||n,u=n.jsonpCallback||"jsonp"+h++;n.data&&(n.data=(n.data+"").replace(i,"="+u+"$1"));n.url=n.url.replace(i,"="+u+"$1");window[u]=window[u]||function(i){data=i;o(n,f,t);s(n,f,t);window[u]=undefined;try{delete window[u]}catch(r){}head&&head.removeChild(script)}}function o(n,t,i){n.success&&n.success.call(t,i.responseText||"",status,{});n.global&&f(n,"ajaxSuccess",[{},n])}function s(t,i){t.complete&&t.complete.call(i,{},status);t.global&&f("ajaxComplete",[{},t]);t.global&&!--n.active&&n.event.trigger("ajaxStop")}function k(i,f){var h,e,o,s;for(typeof i=="object"?(f=i,i=undefined):f.url=i,e=n.extend(!0,{},n.ajaxSettings,f),s=0;s<t.length;s++)if(t[s]&&(o=l(t[s],e),o))return(u.push(e),n.mockjaxSettings.log(o,e),e.dataType==="jsonp"&&(h=y(e,o,f)))?h:(o.cache=e.cache,o.timeout=e.timeout,o.global=e.global,d(o,f),function(t,i,u,f){h=r.call(n,n.extend(!0,{},u,{xhr:function(){return v(t,i,u,f)}}))}(o,e,f,t[s]),h);return r.apply(n,[f])}function d(n,t){var i,f;if(n.url instanceof RegExp&&n.hasOwnProperty("urlParams")&&(i=n.url.exec(t.url),i.length!==1)){i.shift();var r=0,e=i.length,o=n.urlParams.length,s=Math.min(e,o),u={};for(r;r<s;r++)f=n.urlParams[r],u[f]=i[r];t.urlParams=u}}var r=n.ajax,t=[],u=[],i=/=\?(&|$)/,h=(new Date).getTime();n.extend({ajax:k});n.mockjaxSettings={log:function(t,i){if(t.logging!==!1&&(typeof t.logging!="undefined"||n.mockjaxSettings.logging!==!1)&&window.console&&console.log){var r="MOCK "+i.type.toUpperCase()+": "+i.url,u=n.extend({},i);if(typeof console.log=="function")console.log(r,u);else try{console.log(r+" "+JSON.stringify(u))}catch(f){console.log(r)}}},logging:!0,status:200,statusText:"OK",responseTime:500,isTimeout:!1,contentType:"text/plain",response:"",responseText:"",responseXML:"",proxy:"",proxyType:"GET",lastModified:null,etag:"",headers:{etag:"IJF@H#@923uf8023hFO@I#H#","content-type":"text/plain"}};n.mockjax=function(i){var r=t.length,u=!1;return n.each(t,function(n,r){r.url.toString()==i.url.toString()&&(t[n]=i,u=!0)}),u||(t[r]=i),r};n.mockjaxClear=function(n){arguments.length==1?t[n]=null:t=[];u=[]};n.mockjax.handler=function(n){if(arguments.length==1)return t[n]};n.mockjax.mockedAjaxCalls=function(){return u}})(jQuery);
(function(n){function e(i){var u,r,f;if(i=i.substr(1),u=i.match(/\(([^\)]+)\)/g)||[],!(i in n.mockJSON.data))return console.log(i),console.log(u),i;r=n.mockJSON.data[i];switch(o(r)){case"array":return f=Math.floor(r.length*t()),r[f];case"function":return r()}}function o(t){return n.isArray(t)?"array":t===null?"null":typeof t}function u(n){return n<10?"0"+n:n+""}function t(){return n.mockJSON.random?Math.random():(f=f.concat(f.splice(0,1)),f[0])}function r(){return new Date(Math.floor(t()*(new Date).valueOf()))}var i=[],s,f;n.mockJSON=function(t,r){for(var f,u=0;u<i.length;u++)if(f=i[u],f.request.toString()==t.toString()){i.splice(u,1);break}return i.push({request:t,template:r}),n};n.mockJSON.random=!0;s=n.ajax;n.ajax=function(t){var r,u;if(t.dataType==="json")for(r=0;r<i.length;r++)if(u=i[r],u.request.test(t.url))return t.success(n.mockJSON.generateFromTemplate(u.template)),n;return s.apply(this,arguments)};n.mockJSON.generateFromTemplate=function(i,r){var h=0,c=(r||"").match(/\w+\|(\d+)-(\d+)/),l,w,u,s,a,b,v,y,p,f;c&&(l=parseInt(c[1],10),w=parseInt(c[2],10),h=Math.round(t()*(w-l))+l);u=null;switch(o(i)){case"array":if(c==null){u=[];for(s in i)u[s.replace(/\|\d+-\d+/,"")]=n.mockJSON.generateFromTemplate(i[s],s);return u}for(u=[],f=0;f<h;f++)u[f]=n.mockJSON.generateFromTemplate(i[0]);break;case"object":u={};for(s in i)u[s.replace(/\|(\d+-\d+|\+\d+)/,"")]=n.mockJSON.generateFromTemplate(i[s],s),a=s.match(/\w+\|\+(\d+)/),a&&o(i[s])=="number"&&(b=parseInt(a[1],10),i[s]+=b);break;case"number":u=c?h:i;break;case"boolean":u=c?t()>=.5:i;break;case"string":if(i.length){for(u="",h=h||1,f=0;f<h;f++)u+=i;for(v=u.match(/@([A-Z_0-9\(\),]+)/g)||[],f=0;f<v.length;f++)y=v[f],p=e(y),u=u.replace(y,p),o(p)=="number"&&(u=Number(u))}else for(u="",f=0;f<h;f++)u+=String.fromCharCode(Math.floor(t()*255));break;default:u=i}return u};f=[.021768910889510606,.23762323165420307,.90796161182043056,.65343053099974657,.22049697572443694,.076874661633648977,.80174287755479046,.16165353264404825,.51243456716704827,.19337327636624613,.39963994200698416,.80125926541395143,.22474962687229938,.97913962344523986,.79654283533177561,.97776643406296215,.51352167029837315,.74071282361921453,.12880984991420075,.81866008004914836,.51876914454388512,.034723021925916586,.56250928330408534,.025028385719977009,.663696305503698,.3481608684353138,.89916235851751058,.36405425642770872,.83207668741217233,.012778915627689846,.14276803700613361,.97744082892039563,.010229381207667587,.25966108852230929,.61505401042971275,.7130773919030915,.86383383029740846,.6178483032907357,.980312844391733,.50072774150123478,.63486720311131273,.44000977755033033,.84684584514082117,.38724997893647317,.690237920987028,.19850102297146477,.44895115941315766,.22283381913760725,.031228117310125314,.3367510872581615,.28155752394210787,.14696694832580504,.081646351617609914,.88377334777856242,.45901791485391419,.96131954132174646,.11263127577456922,.743695635896287,.00024248914391433729,.19646228325466131,.73333631388789222,.55755686820033556,.20426374168098604,.18030934250338893,.97926364083927586,.30121911048336913,.77349068867202653,.69840511277675266,.66380585113793433,.33109562563881823,.36632372827973203,.89964947023338948,.82359176630497632,.418496734118911,.81646484950973319,.94578316063546863,.28452275421170492,.42374718399151545,.3431728911657228,.52893140062199728,.60292436004071126,.65283011407007574,.6948768236197832,.78873027840929111,.89502741961199062,.6121642239166305,.31797481561514696,.34903732589844216,.35803200922817657,.8312225728434115,.32331010157206974,.16395388672837796,.60729603060038717,.65805269679994238,.23472961545632742,.61386378554893428,.30673033390606819,.44935935129958315,.24729465243280668,.82441897159677113];n.mockJSON.data={NUMBER:"0123456789".split(""),LETTER_UPPER:"ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),LETTER_LOWER:"abcdefghijklmnopqrstuvwxyz".split(""),MALE_FIRST_NAME:["James","John","Robert","Michael","William","David","Richard","Charles","Joseph","Thomas","Christopher","Daniel","Paul","Mark","Donald","George","Kenneth","Steven","Edward","Brian","Ronald","Anthony","Kevin","Jason","Matthew","Gary","Timothy","Jose","Larry","Jeffrey","Frank","Scott","Eric"],FEMALE_FIRST_NAME:["Mary","Patricia","Linda","Barbara","Elizabeth","Jennifer","Maria","Susan","Margaret","Dorothy","Lisa","Nancy","Karen","Betty","Helen","Sandra","Donna","Carol","Ruth","Sharon","Michelle","Laura","Sarah","Kimberly","Deborah","Jessica","Shirley","Cynthia","Angela","Melissa","Brenda","Amy","Anna"],LAST_NAME:["Smith","Johnson","Williams","Brown","Jones","Miller","Davis","Garcia","Rodriguez","Wilson","Martinez","Anderson","Taylor","Thomas","Hernandez","Moore","Martin","Jackson","Thompson","White","Lopez","Lee","Gonzalez","Harris","Clark","Lewis","Robinson","Walker","Perez","Hall","Young","Allen"],EMAIL:function(){return e("@LETTER_LOWER")+"."+e("@LAST_NAME").toLowerCase()+"@"+e("@LAST_NAME").toLowerCase()+".com"},DATE_YYYY:function(){var n=r().getFullYear();return n+""},DATE_DD:function(){return u(r().getDate())},DATE_MM:function(){return u(r().getMonth()+1)},TIME_HH:function(){return u(r().getHours())},TIME_MM:function(){return u(r().getMinutes())},TIME_SS:function(){return u(r().getSeconds())},LOREM:function(){var n="lorem ipsum dolor sit amet consectetur adipisicing elit sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Ut enim ad minim veniam quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur Excepteur sint occaecat cupidatat non proident sunt in culpa qui officia deserunt mollit anim id est laborum".split(" "),i=Math.floor(t()*n.length);return n[i]},LOREM_IPSUM:function(){for(var u,n="Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum".split(" "),i=[],f=Math.floor(t()*n.length/2),r=0;r<f;r++)u=Math.floor(t()*n.length),i.push(n[u]);return i.join(" ")}}})(jQuery);
